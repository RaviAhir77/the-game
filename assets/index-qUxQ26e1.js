(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var lh={exports:{}},Zo={},uh={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function hv(){if(Qp)return Se;Qp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,$={};function O(L,Q,he){this.props=L,this.context=Q,this.refs=$,this.updater=he||D}O.prototype.isReactComponent={},O.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=O.prototype;function Z(L,Q,he){this.props=L,this.context=Q,this.refs=$,this.updater=he||D}var J=Z.prototype=new q;J.constructor=Z,M(J,O.prototype),J.isPureReactComponent=!0;var fe=Array.isArray,Re=Object.prototype.hasOwnProperty,we={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(L,Q,he){var Te,Ie={},ke=null,Oe=null;if(Q!=null)for(Te in Q.ref!==void 0&&(Oe=Q.ref),Q.key!==void 0&&(ke=""+Q.key),Q)Re.call(Q,Te)&&!x.hasOwnProperty(Te)&&(Ie[Te]=Q[Te]);var Fe=arguments.length-2;if(Fe===1)Ie.children=he;else if(1<Fe){for(var je=Array(Fe),gt=0;gt<Fe;gt++)je[gt]=arguments[gt+2];Ie.children=je}if(L&&L.defaultProps)for(Te in Fe=L.defaultProps,Fe)Ie[Te]===void 0&&(Ie[Te]=Fe[Te]);return{$$typeof:i,type:L,key:ke,ref:Oe,props:Ie,_owner:we.current}}function A(L,Q){return{$$typeof:i,type:L.type,key:Q,ref:L.ref,props:L.props,_owner:L._owner}}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function N(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(he){return Q[he]})}var F=/\/+/g;function C(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):Q.toString(36)}function tt(L,Q,he,Te,Ie){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(ke){case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case i:case e:Oe=!0}}if(Oe)return Oe=L,Ie=Ie(Oe),L=Te===""?"."+C(Oe,0):Te,fe(Ie)?(he="",L!=null&&(he=L.replace(F,"$&/")+"/"),tt(Ie,Q,he,"",function(gt){return gt})):Ie!=null&&(k(Ie)&&(Ie=A(Ie,he+(!Ie.key||Oe&&Oe.key===Ie.key?"":(""+Ie.key).replace(F,"$&/")+"/")+L)),Q.push(Ie)),1;if(Oe=0,Te=Te===""?".":Te+":",fe(L))for(var Fe=0;Fe<L.length;Fe++){ke=L[Fe];var je=Te+C(ke,Fe);Oe+=tt(ke,Q,he,je,Ie)}else if(je=I(L),typeof je=="function")for(L=je.call(L),Fe=0;!(ke=L.next()).done;)ke=ke.value,je=Te+C(ke,Fe++),Oe+=tt(ke,Q,he,je,Ie);else if(ke==="object")throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Oe}function kt(L,Q,he){if(L==null)return L;var Te=[],Ie=0;return tt(L,Te,"","",function(ke){return Q.call(he,ke,Ie++)}),Te}function xt(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(he){(L._status===0||L._status===-1)&&(L._status=1,L._result=he)},function(he){(L._status===0||L._status===-1)&&(L._status=2,L._result=he)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var ze={current:null},ne={transition:null},pe={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:ne,ReactCurrentOwner:we};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:kt,forEach:function(L,Q,he){kt(L,function(){Q.apply(this,arguments)},he)},count:function(L){var Q=0;return kt(L,function(){Q++}),Q},toArray:function(L){return kt(L,function(Q){return Q})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Se.Component=O,Se.Fragment=n,Se.Profiler=a,Se.PureComponent=Z,Se.StrictMode=s,Se.Suspense=g,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Se.act=ie,Se.cloneElement=function(L,Q,he){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Te=M({},L.props),Ie=L.key,ke=L.ref,Oe=L._owner;if(Q!=null){if(Q.ref!==void 0&&(ke=Q.ref,Oe=we.current),Q.key!==void 0&&(Ie=""+Q.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(je in Q)Re.call(Q,je)&&!x.hasOwnProperty(je)&&(Te[je]=Q[je]===void 0&&Fe!==void 0?Fe[je]:Q[je])}var je=arguments.length-2;if(je===1)Te.children=he;else if(1<je){Fe=Array(je);for(var gt=0;gt<je;gt++)Fe[gt]=arguments[gt+2];Te.children=Fe}return{$$typeof:i,type:L.type,key:Ie,ref:ke,props:Te,_owner:Oe}},Se.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:u,_context:L},L.Consumer=L},Se.createElement=S,Se.createFactory=function(L){var Q=S.bind(null,L);return Q.type=L,Q},Se.createRef=function(){return{current:null}},Se.forwardRef=function(L){return{$$typeof:p,render:L}},Se.isValidElement=k,Se.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:xt}},Se.memo=function(L,Q){return{$$typeof:_,type:L,compare:Q===void 0?null:Q}},Se.startTransition=function(L){var Q=ne.transition;ne.transition={};try{L()}finally{ne.transition=Q}},Se.unstable_act=ie,Se.useCallback=function(L,Q){return ze.current.useCallback(L,Q)},Se.useContext=function(L){return ze.current.useContext(L)},Se.useDebugValue=function(){},Se.useDeferredValue=function(L){return ze.current.useDeferredValue(L)},Se.useEffect=function(L,Q){return ze.current.useEffect(L,Q)},Se.useId=function(){return ze.current.useId()},Se.useImperativeHandle=function(L,Q,he){return ze.current.useImperativeHandle(L,Q,he)},Se.useInsertionEffect=function(L,Q){return ze.current.useInsertionEffect(L,Q)},Se.useLayoutEffect=function(L,Q){return ze.current.useLayoutEffect(L,Q)},Se.useMemo=function(L,Q){return ze.current.useMemo(L,Q)},Se.useReducer=function(L,Q,he){return ze.current.useReducer(L,Q,he)},Se.useRef=function(L){return ze.current.useRef(L)},Se.useState=function(L){return ze.current.useState(L)},Se.useSyncExternalStore=function(L,Q,he){return ze.current.useSyncExternalStore(L,Q,he)},Se.useTransition=function(){return ze.current.useTransition()},Se.version="18.3.1",Se}var Kp;function Xh(){return Kp||(Kp=1,uh.exports=hv()),uh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function fv(){if(Gp)return Zo;Gp=1;var i=Xh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,_){var E,T={},I=null,D=null;_!==void 0&&(I=""+_),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(D=g.ref);for(E in g)s.call(g,E)&&!u.hasOwnProperty(E)&&(T[E]=g[E]);if(p&&p.defaultProps)for(E in g=p.defaultProps,g)T[E]===void 0&&(T[E]=g[E]);return{$$typeof:e,type:p,key:I,ref:D,props:T,_owner:a.current}}return Zo.Fragment=n,Zo.jsx=h,Zo.jsxs=h,Zo}var Yp;function dv(){return Yp||(Yp=1,lh.exports=fv()),lh.exports}var Le=dv(),H=Xh(),$l={},ch={exports:{}},Gt={},hh={exports:{}},fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function pv(){return Xp||(Xp=1,function(i){function e(ne,pe){var ie=ne.length;ne.push(pe);e:for(;0<ie;){var L=ie-1>>>1,Q=ne[L];if(0<a(Q,pe))ne[L]=pe,ne[ie]=Q,ie=L;else break e}}function n(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var pe=ne[0],ie=ne.pop();if(ie!==pe){ne[0]=ie;e:for(var L=0,Q=ne.length,he=Q>>>1;L<he;){var Te=2*(L+1)-1,Ie=ne[Te],ke=Te+1,Oe=ne[ke];if(0>a(Ie,ie))ke<Q&&0>a(Oe,Ie)?(ne[L]=Oe,ne[ke]=ie,L=ke):(ne[L]=Ie,ne[Te]=ie,L=Te);else if(ke<Q&&0>a(Oe,ie))ne[L]=Oe,ne[ke]=ie,L=ke;else break e}}return pe}function a(ne,pe){var ie=ne.sortIndex-pe.sortIndex;return ie!==0?ie:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var g=[],_=[],E=1,T=null,I=3,D=!1,M=!1,$=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(ne){for(var pe=n(_);pe!==null;){if(pe.callback===null)s(_);else if(pe.startTime<=ne)s(_),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=n(_)}}function fe(ne){if($=!1,J(ne),!M)if(n(g)!==null)M=!0,xt(Re);else{var pe=n(_);pe!==null&&ze(fe,pe.startTime-ne)}}function Re(ne,pe){M=!1,$&&($=!1,q(S),S=-1),D=!0;var ie=I;try{for(J(pe),T=n(g);T!==null&&(!(T.expirationTime>pe)||ne&&!N());){var L=T.callback;if(typeof L=="function"){T.callback=null,I=T.priorityLevel;var Q=L(T.expirationTime<=pe);pe=i.unstable_now(),typeof Q=="function"?T.callback=Q:T===n(g)&&s(g),J(pe)}else s(g);T=n(g)}if(T!==null)var he=!0;else{var Te=n(_);Te!==null&&ze(fe,Te.startTime-pe),he=!1}return he}finally{T=null,I=ie,D=!1}}var we=!1,x=null,S=-1,A=5,k=-1;function N(){return!(i.unstable_now()-k<A)}function F(){if(x!==null){var ne=i.unstable_now();k=ne;var pe=!0;try{pe=x(!0,ne)}finally{pe?C():(we=!1,x=null)}}else we=!1}var C;if(typeof Z=="function")C=function(){Z(F)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,kt=tt.port2;tt.port1.onmessage=F,C=function(){kt.postMessage(null)}}else C=function(){O(F,0)};function xt(ne){x=ne,we||(we=!0,C())}function ze(ne,pe){S=O(function(){ne(i.unstable_now())},pe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){M||D||(M=!0,xt(Re))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_getFirstCallbackNode=function(){return n(g)},i.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var pe=3;break;default:pe=I}var ie=I;I=pe;try{return ne()}finally{I=ie}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ie=I;I=ne;try{return pe()}finally{I=ie}},i.unstable_scheduleCallback=function(ne,pe,ie){var L=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?L+ie:L):ie=L,ne){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ie+Q,ne={id:E++,callback:pe,priorityLevel:ne,startTime:ie,expirationTime:Q,sortIndex:-1},ie>L?(ne.sortIndex=ie,e(_,ne),n(g)===null&&ne===n(_)&&($?(q(S),S=-1):$=!0,ze(fe,ie-L))):(ne.sortIndex=Q,e(g,ne),M||D||(M=!0,xt(Re))),ne},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(ne){var pe=I;return function(){var ie=I;I=pe;try{return ne.apply(this,arguments)}finally{I=ie}}}}(fh)),fh}var Jp;function mv(){return Jp||(Jp=1,hh.exports=pv()),hh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function gv(){if(Zp)return Gt;Zp=1;var i=Xh(),e=mv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function I(t){return g.call(T,t)?!0:g.call(E,t)?!1:_.test(t)?T[t]=!0:(E[t]=!0,!1)}function D(t,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M(t,r,o,c){if(r===null||typeof r>"u"||D(t,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function $(t,r,o,c,f,m,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=m,this.removeEmptyString=v}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){O[t]=new $(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];O[r]=new $(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){O[t]=new $(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){O[t]=new $(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){O[t]=new $(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){O[t]=new $(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){O[t]=new $(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){O[t]=new $(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){O[t]=new $(t,5,!1,t.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(q,Z);O[r]=new $(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(q,Z);O[r]=new $(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(q,Z);O[r]=new $(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){O[t]=new $(t,1,!1,t.toLowerCase(),null,!1,!1)}),O.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){O[t]=new $(t,1,!1,t.toLowerCase(),null,!0,!0)});function J(t,r,o,c){var f=O.hasOwnProperty(r)?O[r]:null;(f!==null?f.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(M(r,o,f,c)&&(o=null),c||f===null?I(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):f.mustUseProperty?t[f.propertyName]=o===null?f.type===3?!1:"":o:(r=f.attributeName,c=f.attributeNamespace,o===null?t.removeAttribute(r):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,c?t.setAttributeNS(c,r,o):t.setAttribute(r,o))))}var fe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),we=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),ne=Symbol.iterator;function pe(t){return t===null||typeof t!="object"?null:(t=ne&&t[ne]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Object.assign,L;function Q(t){if(L===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+t}var he=!1;function Te(t,r){if(!t||he)return"";he=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var c=B}Reflect.construct(t,[],r)}else{try{r.call()}catch(B){c=B}t.call(r.prototype)}else{try{throw Error()}catch(B){c=B}t()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),m=c.stack.split(`
`),v=f.length-1,R=m.length-1;1<=v&&0<=R&&f[v]!==m[R];)R--;for(;1<=v&&0<=R;v--,R--)if(f[v]!==m[R]){if(v!==1||R!==1)do if(v--,R--,0>R||f[v]!==m[R]){var P=`
`+f[v].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=v&&0<=R);break}}}finally{he=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Q(t):""}function Ie(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=Te(t.type,!1),t;case 11:return t=Te(t.type.render,!1),t;case 1:return t=Te(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case we:return"Portal";case A:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case tt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case F:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case xt:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function Oe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function je(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gt(t){var r=je(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function er(t){t._valueTracker||(t._valueTracker=gt(t))}function qi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=je(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function li(t,r){var o=r.checked;return ie({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Hi(t,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=Fe(r.value!=null?r.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function io(t,r){r=r.checked,r!=null&&J(t,"checked",r,!1)}function so(t,r){io(t,r);var o=Fe(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Wi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Wi(t,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Pa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Wi(t,r,o){(r!=="number"||Ir(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var tr=Array.isArray;function nr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Fe(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function oo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ie({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(tr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Fe(o)}}function Ki(t,r){var o=Fe(r.value),c=Fe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function ao(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ut(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ut(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rr,lo=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,f){MSApp.execUnsafeLocalFunction(function(){return t(r,o,c,f)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(rr=rr||document.createElement("div"),rr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=rr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ci.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ui[r]=ui[t]})});function uo(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ui.hasOwnProperty(t)&&ui[t]?(""+r).trim():r+"px"}function co(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,f=uo(o,r[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,f):t[o]=f}}var ho=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(t,r){if(r){if(ho[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function po(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function Gi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,ln=null,Ln=null;function Xi(t){if(t=Uo(t)){if(typeof Yi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=il(r),Yi(t.stateNode,t.type,r))}}function Mn(t){ln?Ln?Ln.push(t):Ln=[t]:ln=t}function mo(){if(ln){var t=ln,r=Ln;if(Ln=ln=null,Xi(t),r)for(t=0;t<r.length;t++)Xi(r[t])}}function fi(t,r){return t(r)}function go(){}var ir=!1;function yo(t,r,o){if(ir)return t(r,o);ir=!0;try{return fi(t,r,o)}finally{ir=!1,(ln!==null||Ln!==null)&&(go(),mo())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var c=il(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Ji=!1;if(p)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Ji=!1}function di(t,r,o,c,f,m,v,R,P){var B=Array.prototype.slice.call(arguments,3);try{r.apply(o,B)}catch(Y){this.onError(Y)}}var pi=!1,Zi=null,vn=!1,_o=null,Ou={onError:function(t){pi=!0,Zi=t}};function es(t,r,o,c,f,m,v,R,P){pi=!1,Zi=null,di.apply(Ou,arguments)}function ka(t,r,o,c,f,m,v,R,P){if(es.apply(this,arguments),pi){if(pi){var B=Zi;pi=!1,Zi=null}else throw Error(n(198));vn||(vn=!0,_o=B)}}function En(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function mi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function wn(t){if(En(t)!==t)throw Error(n(188))}function xa(t){var r=t.alternate;if(!r){if(r=En(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return wn(f),t;if(m===c)return wn(f),r;m=m.sibling}throw Error(n(188))}if(o.return!==c.return)o=f,c=m;else{for(var v=!1,R=f.child;R;){if(R===o){v=!0,o=f,c=m;break}if(R===c){v=!0,c=f,o=m;break}R=R.sibling}if(!v){for(R=m.child;R;){if(R===o){v=!0,o=m,c=f;break}if(R===c){v=!0,c=m,o=f;break}R=R.sibling}if(!v)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function vo(t){return t=xa(t),t!==null?ts(t):null}function ts(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ts(t);if(r!==null)return r;t=t.sibling}return null}var ns=e.unstable_scheduleCallback,Eo=e.unstable_cancelCallback,Va=e.unstable_shouldYield,Fu=e.unstable_requestPaint,$e=e.unstable_now,Da=e.unstable_getCurrentPriorityLevel,gi=e.unstable_ImmediatePriority,Rr=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,wo=e.unstable_LowPriority,Na=e.unstable_IdlePriority,yi=null,Zt=null;function La(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Oa,To=Math.log,Ma=Math.LN2;function Oa(t){return t>>>=0,t===0?32:31-(To(t)/Ma|0)|0}var rs=64,is=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _i(t,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,f=t.suspendedLanes,m=t.pingedLanes,v=o&268435455;if(v!==0){var R=v&~f;R!==0?c=Ar(R):(m&=v,m!==0&&(c=Ar(m)))}else v=o&~f,v!==0?c=Ar(v):m!==0&&(c=Ar(m));if(c===0)return 0;if(r!==0&&r!==c&&!(r&f)&&(f=c&-c,m=r&-r,f>=m||f===16&&(m&4194240)!==0))return r;if(c&4&&(c|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)o=31-Ut(r),f=1<<o,c|=t[o],r&=~f;return c}function Uu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes;0<m;){var v=31-Ut(m),R=1<<v,P=f[v];P===-1?(!(R&o)||R&c)&&(f[v]=Uu(R,r)):P<=r&&(t.expiredLanes|=R),m&=~R}}function en(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=rs;return rs<<=1,!(rs&4194240)&&(rs=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function Be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var f=31-Ut(o),m=1<<f;r[f]=0,c[f]=-1,t[f]=-1,o&=~m}}function kr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ut(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}var Ce=0;function xr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fa,ss,Ua,ba,za,Io=!1,On=[],Tt=null,Tn=null,In=null,Vr=new Map,cn=new Map,Fn=[],bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ba(t,r){switch(t){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Vr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(r.pointerId)}}function jt(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Uo(r),r!==null&&ss(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function zu(t,r,o,c,f){switch(r){case"focusin":return Tt=jt(Tt,t,r,o,c,f),!0;case"dragenter":return Tn=jt(Tn,t,r,o,c,f),!0;case"mouseover":return In=jt(In,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Vr.set(m,jt(Vr.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,cn.set(m,jt(cn.get(m)||null,t,r,o,c,f)),!0}return!1}function ja(t){var r=Si(t.target);if(r!==null){var o=En(r);if(o!==null){if(r=o.tag,r===13){if(r=mi(o),r!==null){t.blockedOn=r,za(t.priority,function(){Ua(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function or(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=os(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);hi=c,o.target.dispatchEvent(c),hi=null}else return r=Uo(o),r!==null&&ss(r),t.blockedOn=o,!1;r.shift()}return!0}function Ei(t,r,o){or(t)&&o.delete(r)}function $a(){Io=!1,Tt!==null&&or(Tt)&&(Tt=null),Tn!==null&&or(Tn)&&(Tn=null),In!==null&&or(In)&&(In=null),Vr.forEach(Ei),cn.forEach(Ei)}function Sn(t,r){t.blockedOn===r&&(t.blockedOn=null,Io||(Io=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$a)))}function Rn(t){function r(f){return Sn(f,t)}if(0<On.length){Sn(On[0],t);for(var o=1;o<On.length;o++){var c=On[o];c.blockedOn===t&&(c.blockedOn=null)}}for(Tt!==null&&Sn(Tt,t),Tn!==null&&Sn(Tn,t),In!==null&&Sn(In,t),Vr.forEach(r),cn.forEach(r),o=0;o<Fn.length;o++)c=Fn[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Fn.length&&(o=Fn[0],o.blockedOn===null);)ja(o),o.blockedOn===null&&Fn.shift()}var ar=fe.ReactCurrentBatchConfig,Dr=!0;function Ke(t,r,o,c){var f=Ce,m=ar.transition;ar.transition=null;try{Ce=1,So(t,r,o,c)}finally{Ce=f,ar.transition=m}}function Bu(t,r,o,c){var f=Ce,m=ar.transition;ar.transition=null;try{Ce=4,So(t,r,o,c)}finally{Ce=f,ar.transition=m}}function So(t,r,o,c){if(Dr){var f=os(t,r,o,c);if(f===null)Ju(t,r,c,wi,o),Ba(t,c);else if(zu(f,t,r,o,c))c.stopPropagation();else if(Ba(t,c),r&4&&-1<bu.indexOf(t)){for(;f!==null;){var m=Uo(f);if(m!==null&&Fa(m),m=os(t,r,o,c),m===null&&Ju(t,r,c,wi,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Ju(t,r,c,null,o)}}var wi=null;function os(t,r,o,c){if(wi=null,t=Gi(c),t=Si(t),t!==null)if(r=En(t),r===null)t=null;else if(o=r.tag,o===13){if(t=mi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return wi=t,null}function Ro(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Da()){case gi:return 1;case Rr:return 4;case un:case wo:return 16;case Na:return 536870912;default:return 16}default:return 16}}var tn=null,as=null,$t=null;function Ao(){if($t)return $t;var t,r=as,o=r.length,c,f="value"in tn?tn.value:tn.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var v=o-t;for(c=1;c<=v&&r[o-c]===f[m-c];c++);return $t=f.slice(t,1<c?1-c:void 0)}function ls(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Un(){return!0}function Co(){return!1}function It(t){function r(o,c,f,m,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(o=t[R],this[R]=o?o(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Un:Co,this.isPropagationStopped=Co,this}return ie(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),r}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=It(An),bn=ie({},An,{view:0,detail:0}),ju=It(bn),cs,lr,Nr,Ti=ie({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(cs=t.screenX-Nr.screenX,lr=t.screenY-Nr.screenY):lr=cs=0,Nr=t),cs)},movementY:function(t){return"movementY"in t?t.movementY:lr}}),hs=It(Ti),Po=ie({},Ti,{dataTransfer:0}),qa=It(Po),fs=ie({},bn,{relatedTarget:0}),ds=It(fs),Ha=ie({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),ur=It(Ha),Wa=ie({},An,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qa=It(Wa),Ka=ie({},An,{data:0}),ko=It(Ka),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ya(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ga[t])?!!r[t]:!1}function zn(){return Ya}var l=ie({},bn,{key:function(t){if(t.key){var r=ps[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(t){return t.type==="keypress"?ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=It(l),y=ie({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=It(y),U=ie({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn}),j=It(U),te=ie({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=It(te),ht=ie({},Ti,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=It(ht),yt=[9,13,27,32],st=p&&"CompositionEvent"in window,hn=null;p&&"documentMode"in document&&(hn=document.documentMode);var nn=p&&"TextEvent"in window&&!hn,Ii=p&&(!st||hn&&8<hn&&11>=hn),ms=" ",Bf=!1;function jf(t,r){switch(t){case"keyup":return yt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function u_(t,r){switch(t){case"compositionend":return $f(r);case"keypress":return r.which!==32?null:(Bf=!0,ms);case"textInput":return t=r.data,t===ms&&Bf?null:t;default:return null}}function c_(t,r){if(gs)return t==="compositionend"||!st&&jf(t,r)?(t=Ao(),$t=as=tn=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ii&&r.locale!=="ko"?null:r.data;default:return null}}var h_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!h_[t.type]:r==="textarea"}function Hf(t,r,o,c){Mn(c),r=tl(r,"onChange"),0<r.length&&(o=new us("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var xo=null,Vo=null;function f_(t){ud(t,0)}function Xa(t){var r=ws(t);if(qi(r))return t}function d_(t,r){if(t==="change")return r}var Wf=!1;if(p){var $u;if(p){var qu="oninput"in document;if(!qu){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),qu=typeof Qf.oninput=="function"}$u=qu}else $u=!1;Wf=$u&&(!document.documentMode||9<document.documentMode)}function Kf(){xo&&(xo.detachEvent("onpropertychange",Gf),Vo=xo=null)}function Gf(t){if(t.propertyName==="value"&&Xa(Vo)){var r=[];Hf(r,Vo,t,Gi(t)),yo(f_,r)}}function p_(t,r,o){t==="focusin"?(Kf(),xo=r,Vo=o,xo.attachEvent("onpropertychange",Gf)):t==="focusout"&&Kf()}function m_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xa(Vo)}function g_(t,r){if(t==="click")return Xa(r)}function y_(t,r){if(t==="input"||t==="change")return Xa(r)}function __(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Cn=typeof Object.is=="function"?Object.is:__;function Do(t,r){if(Cn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!g.call(r,f)||!Cn(t[f],r[f]))return!1}return!0}function Yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xf(t,r){var o=Yf(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Yf(o)}}function Jf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Jf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Zf(){for(var t=window,r=Ir();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ir(t.document)}return r}function Hu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function v_(t){var r=Zf(),o=t.focusedElem,c=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Jf(o.ownerDocument.documentElement,o)){if(c!==null&&Hu(o)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var f=o.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!t.extend&&m>c&&(f=c,c=m,m=f),f=Xf(o,m);var v=Xf(o,c);f&&v&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(f.node,f.offset),t.removeAllRanges(),m>c?(t.addRange(r),t.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E_=p&&"documentMode"in document&&11>=document.documentMode,ys=null,Wu=null,No=null,Qu=!1;function ed(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qu||ys==null||ys!==Ir(c)||(c=ys,"selectionStart"in c&&Hu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),No&&Do(No,c)||(No=c,c=tl(Wu,"onSelect"),0<c.length&&(r=new us("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=ys)))}function Ja(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var _s={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},Ku={},td={};p&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Za(t){if(Ku[t])return Ku[t];if(!_s[t])return t;var r=_s[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in td)return Ku[t]=r[o];return t}var nd=Za("animationend"),rd=Za("animationiteration"),id=Za("animationstart"),sd=Za("transitionend"),od=new Map,ad="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,r){od.set(t,r),u(r,[t])}for(var Gu=0;Gu<ad.length;Gu++){var Yu=ad[Gu],w_=Yu.toLowerCase(),T_=Yu[0].toUpperCase()+Yu.slice(1);Lr(w_,"on"+T_)}Lr(nd,"onAnimationEnd"),Lr(rd,"onAnimationIteration"),Lr(id,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(sd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function ld(t,r,o){var c=t.type||"unknown-event";t.currentTarget=o,ka(c,r,void 0,t),t.currentTarget=null}function ud(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var R=c[v],P=R.instance,B=R.currentTarget;if(R=R.listener,P!==m&&f.isPropagationStopped())break e;ld(f,R,B),m=P}else for(v=0;v<c.length;v++){if(R=c[v],P=R.instance,B=R.currentTarget,R=R.listener,P!==m&&f.isPropagationStopped())break e;ld(f,R,B),m=P}}}if(vn)throw t=_o,vn=!1,_o=null,t}function He(t,r){var o=r[ic];o===void 0&&(o=r[ic]=new Set);var c=t+"__bubble";o.has(c)||(cd(r,t,2,!1),o.add(c))}function Xu(t,r,o){var c=0;r&&(c|=4),cd(o,t,c,r)}var el="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[el]){t[el]=!0,s.forEach(function(o){o!=="selectionchange"&&(I_.has(o)||Xu(o,!1,t),Xu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[el]||(r[el]=!0,Xu("selectionchange",!1,r))}}function cd(t,r,o,c){switch(Ro(r)){case 1:var f=Ke;break;case 4:f=Bu;break;default:f=So}o=f.bind(null,r,o,t),f=void 0,!Ji||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Ju(t,r,o,c,f){var m=c;if(!(r&1)&&!(r&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;v=v.return}for(;R!==null;){if(v=Si(R),v===null)return;if(P=v.tag,P===5||P===6){c=m=v;continue e}R=R.parentNode}}c=c.return}yo(function(){var B=m,Y=Gi(o),X=[];e:{var G=od.get(t);if(G!==void 0){var re=us,ae=t;switch(t){case"keypress":if(ls(o)===0)break e;case"keydown":case"keyup":re=d;break;case"focusin":ae="focus",re=ds;break;case"focusout":ae="blur",re=ds;break;case"beforeblur":case"afterblur":re=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=qa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=j;break;case nd:case rd:case id:re=ur;break;case sd:re=be;break;case"scroll":re=ju;break;case"wheel":re=xe;break;case"copy":case"cut":case"paste":re=Qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=w}var ue=(r&4)!==0,rt=!ue&&t==="scroll",b=ue?G!==null?G+"Capture":null:G;ue=[];for(var V=B,z;V!==null;){z=V;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,b!==null&&(ee=nt(V,b),ee!=null&&ue.push(Oo(V,ee,z)))),rt)break;V=V.return}0<ue.length&&(G=new re(G,ae,null,o,Y),X.push({event:G,listeners:ue}))}}if(!(r&7)){e:{if(G=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",G&&o!==hi&&(ae=o.relatedTarget||o.fromElement)&&(Si(ae)||ae[cr]))break e;if((re||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,re?(ae=o.relatedTarget||o.toElement,re=B,ae=ae?Si(ae):null,ae!==null&&(rt=En(ae),ae!==rt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=B),re!==ae)){if(ue=hs,ee="onMouseLeave",b="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ue=w,ee="onPointerLeave",b="onPointerEnter",V="pointer"),rt=re==null?G:ws(re),z=ae==null?G:ws(ae),G=new ue(ee,V+"leave",re,o,Y),G.target=rt,G.relatedTarget=z,ee=null,Si(Y)===B&&(ue=new ue(b,V+"enter",ae,o,Y),ue.target=z,ue.relatedTarget=rt,ee=ue),rt=ee,re&&ae)t:{for(ue=re,b=ae,V=0,z=ue;z;z=vs(z))V++;for(z=0,ee=b;ee;ee=vs(ee))z++;for(;0<V-z;)ue=vs(ue),V--;for(;0<z-V;)b=vs(b),z--;for(;V--;){if(ue===b||b!==null&&ue===b.alternate)break t;ue=vs(ue),b=vs(b)}ue=null}else ue=null;re!==null&&hd(X,G,re,ue,!1),ae!==null&&rt!==null&&hd(X,rt,ae,ue,!0)}}e:{if(G=B?ws(B):window,re=G.nodeName&&G.nodeName.toLowerCase(),re==="select"||re==="input"&&G.type==="file")var ce=d_;else if(qf(G))if(Wf)ce=y_;else{ce=m_;var me=p_}else(re=G.nodeName)&&re.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ce=g_);if(ce&&(ce=ce(t,B))){Hf(X,ce,o,Y);break e}me&&me(t,G,B),t==="focusout"&&(me=G._wrapperState)&&me.controlled&&G.type==="number"&&Wi(G,"number",G.value)}switch(me=B?ws(B):window,t){case"focusin":(qf(me)||me.contentEditable==="true")&&(ys=me,Wu=B,No=null);break;case"focusout":No=Wu=ys=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,ed(X,o,Y);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":ed(X,o,Y)}var ge;if(st)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else gs?jf(t,o)&&(ye="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ye="onCompositionStart");ye&&(Ii&&o.locale!=="ko"&&(gs||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&gs&&(ge=Ao()):(tn=Y,as="value"in tn?tn.value:tn.textContent,gs=!0)),me=tl(B,ye),0<me.length&&(ye=new ko(ye,t,null,o,Y),X.push({event:ye,listeners:me}),ge?ye.data=ge:(ge=$f(o),ge!==null&&(ye.data=ge)))),(ge=nn?u_(t,o):c_(t,o))&&(B=tl(B,"onBeforeInput"),0<B.length&&(Y=new ko("onBeforeInput","beforeinput",null,o,Y),X.push({event:Y,listeners:B}),Y.data=ge))}ud(X,r)})}function Oo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function tl(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=nt(t,o),m!=null&&c.unshift(Oo(t,m,f)),m=nt(t,r),m!=null&&c.push(Oo(t,m,f))),t=t.return}return c}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hd(t,r,o,c,f){for(var m=r._reactName,v=[];o!==null&&o!==c;){var R=o,P=R.alternate,B=R.stateNode;if(P!==null&&P===c)break;R.tag===5&&B!==null&&(R=B,f?(P=nt(o,m),P!=null&&v.unshift(Oo(o,P,R))):f||(P=nt(o,m),P!=null&&v.push(Oo(o,P,R)))),o=o.return}v.length!==0&&t.push({event:r,listeners:v})}var S_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function fd(t){return(typeof t=="string"?t:""+t).replace(S_,`
`).replace(R_,"")}function nl(t,r,o){if(r=fd(r),fd(t)!==r&&o)throw Error(n(425))}function rl(){}var Zu=null,ec=null;function tc(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nc=typeof setTimeout=="function"?setTimeout:void 0,A_=typeof clearTimeout=="function"?clearTimeout:void 0,dd=typeof Promise=="function"?Promise:void 0,C_=typeof queueMicrotask=="function"?queueMicrotask:typeof dd<"u"?function(t){return dd.resolve(null).then(t).catch(P_)}:nc;function P_(t){setTimeout(function(){throw t})}function rc(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){t.removeChild(f),Rn(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);Rn(r)}function Mr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function pd(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Es,Fo="__reactProps$"+Es,cr="__reactContainer$"+Es,ic="__reactEvents$"+Es,k_="__reactListeners$"+Es,x_="__reactHandles$"+Es;function Si(t){var r=t[Bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[cr]||o[Bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=pd(t);t!==null;){if(o=t[Bn])return o;t=pd(t)}return r}t=o,o=t.parentNode}return null}function Uo(t){return t=t[Bn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function il(t){return t[Fo]||null}var sc=[],Ts=-1;function Or(t){return{current:t}}function We(t){0>Ts||(t.current=sc[Ts],sc[Ts]=null,Ts--)}function qe(t,r){Ts++,sc[Ts]=t.current,t.current=r}var Fr={},Vt=Or(Fr),qt=Or(!1),Ri=Fr;function Is(t,r){var o=t.type.contextTypes;if(!o)return Fr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in o)f[m]=r[m];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=f),f}function Ht(t){return t=t.childContextTypes,t!=null}function sl(){We(qt),We(Vt)}function md(t,r,o){if(Vt.current!==Fr)throw Error(n(168));qe(Vt,r),qe(qt,o)}function gd(t,r,o){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var f in c)if(!(f in r))throw Error(n(108,Oe(t)||"Unknown",f));return ie({},o,c)}function ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ri=Vt.current,qe(Vt,t),qe(qt,qt.current),!0}function yd(t,r,o){var c=t.stateNode;if(!c)throw Error(n(169));o?(t=gd(t,r,Ri),c.__reactInternalMemoizedMergedChildContext=t,We(qt),We(Vt),qe(Vt,t)):We(qt),qe(qt,o)}var hr=null,al=!1,oc=!1;function _d(t){hr===null?hr=[t]:hr.push(t)}function V_(t){al=!0,_d(t)}function Ur(){if(!oc&&hr!==null){oc=!0;var t=0,r=Ce;try{var o=hr;for(Ce=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}hr=null,al=!1}catch(f){throw hr!==null&&(hr=hr.slice(t+1)),ns(gi,Ur),f}finally{Ce=r,oc=!1}}return null}var Ss=[],Rs=0,ll=null,ul=0,fn=[],dn=0,Ai=null,fr=1,dr="";function Ci(t,r){Ss[Rs++]=ul,Ss[Rs++]=ll,ll=t,ul=r}function vd(t,r,o){fn[dn++]=fr,fn[dn++]=dr,fn[dn++]=Ai,Ai=t;var c=fr;t=dr;var f=32-Ut(c)-1;c&=~(1<<f),o+=1;var m=32-Ut(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,fr=1<<32-Ut(r)+f|o<<f|c,dr=m+t}else fr=1<<m|o<<f|c,dr=t}function ac(t){t.return!==null&&(Ci(t,1),vd(t,1,0))}function lc(t){for(;t===ll;)ll=Ss[--Rs],Ss[Rs]=null,ul=Ss[--Rs],Ss[Rs]=null;for(;t===Ai;)Ai=fn[--dn],fn[dn]=null,dr=fn[--dn],fn[dn]=null,fr=fn[--dn],fn[dn]=null}var rn=null,sn=null,Ge=!1,Pn=null;function Ed(t,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function wd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,rn=t,sn=Mr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,rn=t,sn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ai!==null?{id:fr,overflow:dr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,rn=t,sn=null,!0):!1;default:return!1}}function uc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cc(t){if(Ge){var r=sn;if(r){var o=r;if(!wd(t,r)){if(uc(t))throw Error(n(418));r=Mr(o.nextSibling);var c=rn;r&&wd(t,r)?Ed(c,o):(t.flags=t.flags&-4097|2,Ge=!1,rn=t)}}else{if(uc(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ge=!1,rn=t}}}function Td(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function cl(t){if(t!==rn)return!1;if(!Ge)return Td(t),Ge=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!tc(t.type,t.memoizedProps)),r&&(r=sn)){if(uc(t))throw Id(),Error(n(418));for(;r;)Ed(t,r),r=Mr(r.nextSibling)}if(Td(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){sn=Mr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}sn=null}}else sn=rn?Mr(t.stateNode.nextSibling):null;return!0}function Id(){for(var t=sn;t;)t=Mr(t.nextSibling)}function As(){sn=rn=null,Ge=!1}function hc(t){Pn===null?Pn=[t]:Pn.push(t)}var D_=fe.ReactCurrentBatchConfig;function bo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var c=o.stateNode}if(!c)throw Error(n(147,t));var f=c,m=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(v){var R=f.refs;v===null?delete R[m]:R[m]=v},r._stringRef=m,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function hl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Sd(t){var r=t._init;return r(t._payload)}function Rd(t){function r(b,V){if(t){var z=b.deletions;z===null?(b.deletions=[V],b.flags|=16):z.push(V)}}function o(b,V){if(!t)return null;for(;V!==null;)r(b,V),V=V.sibling;return null}function c(b,V){for(b=new Map;V!==null;)V.key!==null?b.set(V.key,V):b.set(V.index,V),V=V.sibling;return b}function f(b,V){return b=Wr(b,V),b.index=0,b.sibling=null,b}function m(b,V,z){return b.index=z,t?(z=b.alternate,z!==null?(z=z.index,z<V?(b.flags|=2,V):z):(b.flags|=2,V)):(b.flags|=1048576,V)}function v(b){return t&&b.alternate===null&&(b.flags|=2),b}function R(b,V,z,ee){return V===null||V.tag!==6?(V=nh(z,b.mode,ee),V.return=b,V):(V=f(V,z),V.return=b,V)}function P(b,V,z,ee){var ce=z.type;return ce===x?Y(b,V,z.props.children,ee,z.key):V!==null&&(V.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===xt&&Sd(ce)===V.type)?(ee=f(V,z.props),ee.ref=bo(b,V,z),ee.return=b,ee):(ee=Ml(z.type,z.key,z.props,null,b.mode,ee),ee.ref=bo(b,V,z),ee.return=b,ee)}function B(b,V,z,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=rh(z,b.mode,ee),V.return=b,V):(V=f(V,z.children||[]),V.return=b,V)}function Y(b,V,z,ee,ce){return V===null||V.tag!==7?(V=Mi(z,b.mode,ee,ce),V.return=b,V):(V=f(V,z),V.return=b,V)}function X(b,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=nh(""+V,b.mode,z),V.return=b,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Re:return z=Ml(V.type,V.key,V.props,null,b.mode,z),z.ref=bo(b,null,V),z.return=b,z;case we:return V=rh(V,b.mode,z),V.return=b,V;case xt:var ee=V._init;return X(b,ee(V._payload),z)}if(tr(V)||pe(V))return V=Mi(V,b.mode,z,null),V.return=b,V;hl(b,V)}return null}function G(b,V,z,ee){var ce=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ce!==null?null:R(b,V,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:return z.key===ce?P(b,V,z,ee):null;case we:return z.key===ce?B(b,V,z,ee):null;case xt:return ce=z._init,G(b,V,ce(z._payload),ee)}if(tr(z)||pe(z))return ce!==null?null:Y(b,V,z,ee,null);hl(b,z)}return null}function re(b,V,z,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return b=b.get(z)||null,R(V,b,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Re:return b=b.get(ee.key===null?z:ee.key)||null,P(V,b,ee,ce);case we:return b=b.get(ee.key===null?z:ee.key)||null,B(V,b,ee,ce);case xt:var me=ee._init;return re(b,V,z,me(ee._payload),ce)}if(tr(ee)||pe(ee))return b=b.get(z)||null,Y(V,b,ee,ce,null);hl(V,ee)}return null}function ae(b,V,z,ee){for(var ce=null,me=null,ge=V,ye=V=0,Et=null;ge!==null&&ye<z.length;ye++){ge.index>ye?(Et=ge,ge=null):Et=ge.sibling;var Me=G(b,ge,z[ye],ee);if(Me===null){ge===null&&(ge=Et);break}t&&ge&&Me.alternate===null&&r(b,ge),V=m(Me,V,ye),me===null?ce=Me:me.sibling=Me,me=Me,ge=Et}if(ye===z.length)return o(b,ge),Ge&&Ci(b,ye),ce;if(ge===null){for(;ye<z.length;ye++)ge=X(b,z[ye],ee),ge!==null&&(V=m(ge,V,ye),me===null?ce=ge:me.sibling=ge,me=ge);return Ge&&Ci(b,ye),ce}for(ge=c(b,ge);ye<z.length;ye++)Et=re(ge,b,ye,z[ye],ee),Et!==null&&(t&&Et.alternate!==null&&ge.delete(Et.key===null?ye:Et.key),V=m(Et,V,ye),me===null?ce=Et:me.sibling=Et,me=Et);return t&&ge.forEach(function(Qr){return r(b,Qr)}),Ge&&Ci(b,ye),ce}function ue(b,V,z,ee){var ce=pe(z);if(typeof ce!="function")throw Error(n(150));if(z=ce.call(z),z==null)throw Error(n(151));for(var me=ce=null,ge=V,ye=V=0,Et=null,Me=z.next();ge!==null&&!Me.done;ye++,Me=z.next()){ge.index>ye?(Et=ge,ge=null):Et=ge.sibling;var Qr=G(b,ge,Me.value,ee);if(Qr===null){ge===null&&(ge=Et);break}t&&ge&&Qr.alternate===null&&r(b,ge),V=m(Qr,V,ye),me===null?ce=Qr:me.sibling=Qr,me=Qr,ge=Et}if(Me.done)return o(b,ge),Ge&&Ci(b,ye),ce;if(ge===null){for(;!Me.done;ye++,Me=z.next())Me=X(b,Me.value,ee),Me!==null&&(V=m(Me,V,ye),me===null?ce=Me:me.sibling=Me,me=Me);return Ge&&Ci(b,ye),ce}for(ge=c(b,ge);!Me.done;ye++,Me=z.next())Me=re(ge,b,ye,Me.value,ee),Me!==null&&(t&&Me.alternate!==null&&ge.delete(Me.key===null?ye:Me.key),V=m(Me,V,ye),me===null?ce=Me:me.sibling=Me,me=Me);return t&&ge.forEach(function(cv){return r(b,cv)}),Ge&&Ci(b,ye),ce}function rt(b,V,z,ee){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Re:e:{for(var ce=z.key,me=V;me!==null;){if(me.key===ce){if(ce=z.type,ce===x){if(me.tag===7){o(b,me.sibling),V=f(me,z.props.children),V.return=b,b=V;break e}}else if(me.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===xt&&Sd(ce)===me.type){o(b,me.sibling),V=f(me,z.props),V.ref=bo(b,me,z),V.return=b,b=V;break e}o(b,me);break}else r(b,me);me=me.sibling}z.type===x?(V=Mi(z.props.children,b.mode,ee,z.key),V.return=b,b=V):(ee=Ml(z.type,z.key,z.props,null,b.mode,ee),ee.ref=bo(b,V,z),ee.return=b,b=ee)}return v(b);case we:e:{for(me=z.key;V!==null;){if(V.key===me)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){o(b,V.sibling),V=f(V,z.children||[]),V.return=b,b=V;break e}else{o(b,V);break}else r(b,V);V=V.sibling}V=rh(z,b.mode,ee),V.return=b,b=V}return v(b);case xt:return me=z._init,rt(b,V,me(z._payload),ee)}if(tr(z))return ae(b,V,z,ee);if(pe(z))return ue(b,V,z,ee);hl(b,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(o(b,V.sibling),V=f(V,z),V.return=b,b=V):(o(b,V),V=nh(z,b.mode,ee),V.return=b,b=V),v(b)):o(b,V)}return rt}var Cs=Rd(!0),Ad=Rd(!1),fl=Or(null),dl=null,Ps=null,fc=null;function dc(){fc=Ps=dl=null}function pc(t){var r=fl.current;We(fl),t._currentValue=r}function mc(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function ks(t,r){dl=t,fc=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Wt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(fc!==t)if(t={context:t,memoizedValue:r,next:null},Ps===null){if(dl===null)throw Error(n(308));Ps=t,dl.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return r}var Pi=null;function gc(t){Pi===null?Pi=[t]:Pi.push(t)}function Cd(t,r,o,c){var f=r.interleaved;return f===null?(o.next=o,gc(r)):(o.next=f.next,f.next=o),r.interleaved=o,pr(t,c)}function pr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var br=!1;function yc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,Ne&2){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,pr(t,o)}return f=c.interleaved,f===null?(r.next=r,gc(c)):(r.next=f.next,f.next=r),c.interleaved=r,pr(t,o)}function pl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,kr(t,o)}}function kd(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function ml(t,r,o,c){var f=t.updateQueue;br=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var P=R,B=P.next;P.next=null,v===null?m=B:v.next=B,v=P;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==v&&(R===null?Y.firstBaseUpdate=B:R.next=B,Y.lastBaseUpdate=P))}if(m!==null){var X=f.baseState;v=0,Y=B=P=null,R=m;do{var G=R.lane,re=R.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:re,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ae=t,ue=R;switch(G=r,re=o,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){X=ae.call(re,X,G);break e}X=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,G=typeof ae=="function"?ae.call(re,X,G):ae,G==null)break e;X=ie({},X,G);break e;case 2:br=!0}}R.callback!==null&&R.lane!==0&&(t.flags|=64,G=f.effects,G===null?f.effects=[R]:G.push(R))}else re={eventTime:re,lane:G,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(B=Y=re,P=X):Y=Y.next=re,v|=G;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;G=R,R=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);if(Y===null&&(P=X),f.baseState=P,f.firstBaseUpdate=B,f.lastBaseUpdate=Y,r=f.shared.interleaved,r!==null){f=r;do v|=f.lane,f=f.next;while(f!==r)}else m===null&&(f.shared.lanes=0);Vi|=v,t.lanes=v,t.memoizedState=X}}function xd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],f=c.callback;if(f!==null){if(c.callback=null,c=o,typeof f!="function")throw Error(n(191,f));f.call(c)}}}var zo={},jn=Or(zo),Bo=Or(zo),jo=Or(zo);function ki(t){if(t===zo)throw Error(n(174));return t}function _c(t,r){switch(qe(jo,r),qe(Bo,t),qe(jn,zo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ct(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ct(r,t)}We(jn),qe(jn,r)}function xs(){We(jn),We(Bo),We(jo)}function Vd(t){ki(jo.current);var r=ki(jn.current),o=ct(r,t.type);r!==o&&(qe(Bo,t),qe(jn,o))}function vc(t){Bo.current===t&&(We(jn),We(Bo))}var Ye=Or(0);function gl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ec=[];function wc(){for(var t=0;t<Ec.length;t++)Ec[t]._workInProgressVersionPrimary=null;Ec.length=0}var yl=fe.ReactCurrentDispatcher,Tc=fe.ReactCurrentBatchConfig,xi=0,Xe=null,ft=null,_t=null,_l=!1,$o=!1,qo=0,N_=0;function Dt(){throw Error(n(321))}function Ic(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Cn(t[o],r[o]))return!1;return!0}function Sc(t,r,o,c,f,m){if(xi=m,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,yl.current=t===null||t.memoizedState===null?F_:U_,t=o(c,f),$o){m=0;do{if($o=!1,qo=0,25<=m)throw Error(n(301));m+=1,_t=ft=null,r.updateQueue=null,yl.current=b_,t=o(c,f)}while($o)}if(yl.current=wl,r=ft!==null&&ft.next!==null,xi=0,_t=ft=Xe=null,_l=!1,r)throw Error(n(300));return t}function Rc(){var t=qo!==0;return qo=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Xe.memoizedState=_t=t:_t=_t.next=t,_t}function mn(){if(ft===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=_t===null?Xe.memoizedState:_t.next;if(r!==null)_t=r,ft=t;else{if(t===null)throw Error(n(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Xe.memoizedState=_t=t:_t=_t.next=t}return _t}function Ho(t,r){return typeof r=="function"?r(t):r}function Ac(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=ft,f=c.baseQueue,m=o.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}c.baseQueue=f=m,o.pending=null}if(f!==null){m=f.next,c=c.baseState;var R=v=null,P=null,B=m;do{var Y=B.lane;if((xi&Y)===Y)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:t(c,B.action);else{var X={lane:Y,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(R=P=X,v=c):P=P.next=X,Xe.lanes|=Y,Vi|=Y}B=B.next}while(B!==null&&B!==m);P===null?v=c:P.next=R,Cn(c,r.memoizedState)||(Wt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=P,o.lastRenderedState=c}if(t=o.interleaved,t!==null){f=t;do m=f.lane,Xe.lanes|=m,Vi|=m,f=f.next;while(f!==t)}else f===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Cc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);Cn(m,r.memoizedState)||(Wt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Dd(){}function Nd(t,r){var o=Xe,c=mn(),f=r(),m=!Cn(c.memoizedState,f);if(m&&(c.memoizedState=f,Wt=!0),c=c.queue,Pc(Od.bind(null,o,c,t),[t]),c.getSnapshot!==r||m||_t!==null&&_t.memoizedState.tag&1){if(o.flags|=2048,Wo(9,Md.bind(null,o,c,f,r),void 0,null),vt===null)throw Error(n(349));xi&30||Ld(o,r,f)}return f}function Ld(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Md(t,r,o,c){r.value=o,r.getSnapshot=c,Fd(r)&&Ud(t)}function Od(t,r,o){return o(function(){Fd(r)&&Ud(t)})}function Fd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Cn(t,o)}catch{return!0}}function Ud(t){var r=pr(t,1);r!==null&&Dn(r,t,1,-1)}function bd(t){var r=$n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},r.queue=t,t=t.dispatch=O_.bind(null,Xe,t),[r.memoizedState,t]}function Wo(t,r,o,c){return t={tag:t,create:r,destroy:o,deps:c,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t)),t}function zd(){return mn().memoizedState}function vl(t,r,o,c){var f=$n();Xe.flags|=t,f.memoizedState=Wo(1|r,o,void 0,c===void 0?null:c)}function El(t,r,o,c){var f=mn();c=c===void 0?null:c;var m=void 0;if(ft!==null){var v=ft.memoizedState;if(m=v.destroy,c!==null&&Ic(c,v.deps)){f.memoizedState=Wo(r,o,m,c);return}}Xe.flags|=t,f.memoizedState=Wo(1|r,o,m,c)}function Bd(t,r){return vl(8390656,8,t,r)}function Pc(t,r){return El(2048,8,t,r)}function jd(t,r){return El(4,2,t,r)}function $d(t,r){return El(4,4,t,r)}function qd(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Hd(t,r,o){return o=o!=null?o.concat([t]):null,El(4,4,qd.bind(null,r,t),o)}function kc(){}function Wd(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Ic(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Qd(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&Ic(r,c[1])?c[0]:(t=t(),o.memoizedState=[t,r],t)}function Kd(t,r,o){return xi&21?(Cn(o,r)||(o=vi(),Xe.lanes|=o,Vi|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o)}function L_(t,r){var o=Ce;Ce=o!==0&&4>o?o:4,t(!0);var c=Tc.transition;Tc.transition={};try{t(!1),r()}finally{Ce=o,Tc.transition=c}}function Gd(){return mn().memoizedState}function M_(t,r,o){var c=qr(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Yd(t))Xd(r,o);else if(o=Cd(t,r,o,c),o!==null){var f=Bt();Dn(o,t,c,f),Jd(o,r,c)}}function O_(t,r,o){var c=qr(t),f={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Yd(t))Xd(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,R=m(v,o);if(f.hasEagerState=!0,f.eagerState=R,Cn(R,v)){var P=r.interleaved;P===null?(f.next=f,gc(r)):(f.next=P.next,P.next=f),r.interleaved=f;return}}catch{}finally{}o=Cd(t,r,f,c),o!==null&&(f=Bt(),Dn(o,t,c,f),Jd(o,r,c))}}function Yd(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Xd(t,r){$o=_l=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Jd(t,r,o){if(o&4194240){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,kr(t,o)}}var wl={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},F_={readContext:pn,useCallback:function(t,r){return $n().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:Bd,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,vl(4194308,4,qd.bind(null,r,t),o)},useLayoutEffect:function(t,r){return vl(4194308,4,t,r)},useInsertionEffect:function(t,r){return vl(4,2,t,r)},useMemo:function(t,r){var o=$n();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var c=$n();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=M_.bind(null,Xe,t),[c.memoizedState,t]},useRef:function(t){var r=$n();return t={current:t},r.memoizedState=t},useState:bd,useDebugValue:kc,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=bd(!1),r=t[0];return t=L_.bind(null,t[1]),$n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var c=Xe,f=$n();if(Ge){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),vt===null)throw Error(n(349));xi&30||Ld(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Bd(Od.bind(null,c,m,t),[t]),c.flags|=2048,Wo(9,Md.bind(null,c,m,o,r),void 0,null),o},useId:function(){var t=$n(),r=vt.identifierPrefix;if(Ge){var o=dr,c=fr;o=(c&~(1<<32-Ut(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=qo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=N_++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},U_={readContext:pn,useCallback:Wd,useContext:pn,useEffect:Pc,useImperativeHandle:Hd,useInsertionEffect:jd,useLayoutEffect:$d,useMemo:Qd,useReducer:Ac,useRef:zd,useState:function(){return Ac(Ho)},useDebugValue:kc,useDeferredValue:function(t){var r=mn();return Kd(r,ft.memoizedState,t)},useTransition:function(){var t=Ac(Ho)[0],r=mn().memoizedState;return[t,r]},useMutableSource:Dd,useSyncExternalStore:Nd,useId:Gd,unstable_isNewReconciler:!1},b_={readContext:pn,useCallback:Wd,useContext:pn,useEffect:Pc,useImperativeHandle:Hd,useInsertionEffect:jd,useLayoutEffect:$d,useMemo:Qd,useReducer:Cc,useRef:zd,useState:function(){return Cc(Ho)},useDebugValue:kc,useDeferredValue:function(t){var r=mn();return ft===null?r.memoizedState=t:Kd(r,ft.memoizedState,t)},useTransition:function(){var t=Cc(Ho)[0],r=mn().memoizedState;return[t,r]},useMutableSource:Dd,useSyncExternalStore:Nd,useId:Gd,unstable_isNewReconciler:!1};function kn(t,r){if(t&&t.defaultProps){r=ie({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function xc(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:ie({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Tl={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var c=Bt(),f=qr(t),m=mr(c,f);m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,f),r!==null&&(Dn(r,t,f,c),pl(r,t,f))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=Bt(),f=qr(t),m=mr(c,f);m.tag=1,m.payload=r,o!=null&&(m.callback=o),r=zr(t,m,f),r!==null&&(Dn(r,t,f,c),pl(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),c=qr(t),f=mr(o,c);f.tag=2,r!=null&&(f.callback=r),r=zr(t,f,c),r!==null&&(Dn(r,t,c,o),pl(r,t,c))}};function Zd(t,r,o,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!Do(o,c)||!Do(f,m):!0}function ep(t,r,o){var c=!1,f=Fr,m=r.contextType;return typeof m=="object"&&m!==null?m=pn(m):(f=Ht(r)?Ri:Vt.current,c=r.contextTypes,m=(c=c!=null)?Is(t,f):Fr),r=new r(o,m),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tl,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=m),r}function tp(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&Tl.enqueueReplaceState(r,r.state,null)}function Vc(t,r,o,c){var f=t.stateNode;f.props=o,f.state=t.memoizedState,f.refs={},yc(t);var m=r.contextType;typeof m=="object"&&m!==null?f.context=pn(m):(m=Ht(r)?Ri:Vt.current,f.context=Is(t,m)),f.state=t.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(xc(t,r,m,o),f.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(r=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),r!==f.state&&Tl.enqueueReplaceState(f,f.state,null),ml(t,o,f,c),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,r){try{var o="",c=r;do o+=Ie(c),c=c.return;while(c);var f=o}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:t,source:r,stack:f,digest:null}}function Dc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Nc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function np(t,r,o){o=mr(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){kl||(kl=!0,Kc=c),Nc(t,r)},o}function rp(t,r,o){o=mr(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var f=r.value;o.payload=function(){return c(f)},o.callback=function(){Nc(t,r)}}var m=t.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Nc(t,r),typeof c!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),o}function ip(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new z_;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(f.add(o),t=ev.bind(null,t,r,o),r.then(t,t))}function sp(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function op(t,r,o,c,f){return t.mode&1?(t.flags|=65536,t.lanes=f,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=mr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t)}var B_=fe.ReactCurrentOwner,Wt=!1;function zt(t,r,o,c){r.child=t===null?Ad(r,null,o,c):Cs(r,t.child,o,c)}function ap(t,r,o,c,f){o=o.render;var m=r.ref;return ks(r,f),c=Sc(t,r,o,c,m,f),o=Rc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,gr(t,r,f)):(Ge&&o&&ac(r),r.flags|=1,zt(t,r,c,f),r.child)}function lp(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!th(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=m,up(t,r,m,c,f)):(t=Ml(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!(t.lanes&f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Do,o(v,c)&&t.ref===r.ref)return gr(t,r,f)}return r.flags|=1,t=Wr(m,c),t.ref=r.ref,t.return=r,r.child=t}function up(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(Do(m,c)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=c=m,(t.lanes&f)!==0)t.flags&131072&&(Wt=!0);else return r.lanes=t.lanes,gr(t,r,f)}return Lc(t,r,o,c,f)}function cp(t,r,o){var c=r.pendingProps,f=c.children,m=t!==null?t.memoizedState:null;if(c.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Ns,on),on|=o;else{if(!(o&1073741824))return t=m!==null?m.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,qe(Ns,on),on|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:o,qe(Ns,on),on|=c}else m!==null?(c=m.baseLanes|o,r.memoizedState=null):c=o,qe(Ns,on),on|=c;return zt(t,r,f,o),r.child}function hp(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Lc(t,r,o,c,f){var m=Ht(o)?Ri:Vt.current;return m=Is(r,m),ks(r,f),o=Sc(t,r,o,c,m,f),c=Rc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~f,gr(t,r,f)):(Ge&&c&&ac(r),r.flags|=1,zt(t,r,o,f),r.child)}function fp(t,r,o,c,f){if(Ht(o)){var m=!0;ol(r)}else m=!1;if(ks(r,f),r.stateNode===null)Sl(t,r),ep(r,o,c),Vc(r,o,c,f),c=!0;else if(t===null){var v=r.stateNode,R=r.memoizedProps;v.props=R;var P=v.context,B=o.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Ht(o)?Ri:Vt.current,B=Is(r,B));var Y=o.getDerivedStateFromProps,X=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==c||P!==B)&&tp(r,v,c,B),br=!1;var G=r.memoizedState;v.state=G,ml(r,c,v,f),P=r.memoizedState,R!==c||G!==P||qt.current||br?(typeof Y=="function"&&(xc(r,o,Y,c),P=r.memoizedState),(R=br||Zd(r,o,R,c,G,P,B))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=P),v.props=c,v.state=P,v.context=B,c=R):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Pd(t,r),R=r.memoizedProps,B=r.type===r.elementType?R:kn(r.type,R),v.props=B,X=r.pendingProps,G=v.context,P=o.contextType,typeof P=="object"&&P!==null?P=pn(P):(P=Ht(o)?Ri:Vt.current,P=Is(r,P));var re=o.getDerivedStateFromProps;(Y=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==X||G!==P)&&tp(r,v,c,P),br=!1,G=r.memoizedState,v.state=G,ml(r,c,v,f);var ae=r.memoizedState;R!==X||G!==ae||qt.current||br?(typeof re=="function"&&(xc(r,o,re,c),ae=r.memoizedState),(B=br||Zd(r,o,B,c,G,ae,P)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ae,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ae,P)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),v.props=c,v.state=ae,v.context=P,c=B):(typeof v.componentDidUpdate!="function"||R===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),c=!1)}return Mc(t,r,o,c,m,f)}function Mc(t,r,o,c,f,m){hp(t,r);var v=(r.flags&128)!==0;if(!c&&!v)return f&&yd(r,o,!1),gr(t,r,m);c=r.stateNode,B_.current=r;var R=v&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&v?(r.child=Cs(r,t.child,null,m),r.child=Cs(r,null,R,m)):zt(t,r,R,m),r.memoizedState=c.state,f&&yd(r,o,!0),r.child}function dp(t){var r=t.stateNode;r.pendingContext?md(t,r.pendingContext,r.pendingContext!==r.context):r.context&&md(t,r.context,!1),_c(t,r.containerInfo)}function pp(t,r,o,c,f){return As(),hc(f),r.flags|=256,zt(t,r,o,c),r.child}var Oc={dehydrated:null,treeContext:null,retryLane:0};function Fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function mp(t,r,o){var c=r.pendingProps,f=Ye.current,m=!1,v=(r.flags&128)!==0,R;if((R=v)||(R=t!==null&&t.memoizedState===null?!1:(f&2)!==0),R?(m=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),qe(Ye,f&1),t===null)return cc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(v=c.children,t=c.fallback,m?(c=r.mode,m=r.child,v={mode:"hidden",children:v},!(c&1)&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Ol(v,c,0,null),t=Mi(t,c,o,null),m.return=r,t.return=r,m.sibling=t,r.child=m,r.child.memoizedState=Fc(o),r.memoizedState=Oc,t):Uc(r,v));if(f=t.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return j_(t,r,v,c,R,f,o);if(m){m=c.fallback,v=r.mode,f=t.child,R=f.sibling;var P={mode:"hidden",children:c.children};return!(v&1)&&r.child!==f?(c=r.child,c.childLanes=0,c.pendingProps=P,r.deletions=null):(c=Wr(f,P),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?m=Wr(R,m):(m=Mi(m,v,o,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,v=t.child.memoizedState,v=v===null?Fc(o):{baseLanes:v.baseLanes|o,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=t.childLanes&~o,r.memoizedState=Oc,c}return m=t.child,t=m.sibling,c=Wr(m,{mode:"visible",children:c.children}),!(r.mode&1)&&(c.lanes=o),c.return=r,c.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=c,r.memoizedState=null,c}function Uc(t,r){return r=Ol({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Il(t,r,o,c){return c!==null&&hc(c),Cs(r,t.child,null,o),t=Uc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function j_(t,r,o,c,f,m,v){if(o)return r.flags&256?(r.flags&=-257,c=Dc(Error(n(422))),Il(t,r,v,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(m=c.fallback,f=r.mode,c=Ol({mode:"visible",children:c.children},f,0,null),m=Mi(m,f,v,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,r.mode&1&&Cs(r,t.child,null,v),r.child.memoizedState=Fc(v),r.memoizedState=Oc,m);if(!(r.mode&1))return Il(t,r,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,m=Error(n(419)),c=Dc(m,c,void 0),Il(t,r,v,c)}if(R=(v&t.childLanes)!==0,Wt||R){if(c=vt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|v)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,pr(t,f),Dn(c,t,f,-1))}return eh(),c=Dc(Error(n(421))),Il(t,r,v,c)}return f.data==="$?"?(r.flags|=128,r.child=t.child,r=tv.bind(null,t),f._reactRetry=r,null):(t=m.treeContext,sn=Mr(f.nextSibling),rn=r,Ge=!0,Pn=null,t!==null&&(fn[dn++]=fr,fn[dn++]=dr,fn[dn++]=Ai,fr=t.id,dr=t.overflow,Ai=r),r=Uc(r,c.children),r.flags|=4096,r)}function gp(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),mc(t.return,r,o)}function bc(t,r,o,c,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=o,m.tailMode=f)}function yp(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;if(zt(t,r,c.children,o),c=Ye.current,c&2)c=c&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gp(t,o,r);else if(t.tag===19)gp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(qe(Ye,c),!(r.mode&1))r.memoizedState=null;else switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&gl(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),bc(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&gl(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}bc(r,!0,o,null,m);break;case"together":bc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Sl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function gr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Vi|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Wr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Wr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function $_(t,r,o){switch(r.tag){case 3:dp(r),As();break;case 5:Vd(r);break;case 1:Ht(r.type)&&ol(r);break;case 4:_c(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,f=r.memoizedProps.value;qe(fl,c._currentValue),c._currentValue=f;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(qe(Ye,Ye.current&1),r.flags|=128,null):o&r.child.childLanes?mp(t,r,o):(qe(Ye,Ye.current&1),t=gr(t,r,o),t!==null?t.sibling:null);qe(Ye,Ye.current&1);break;case 19:if(c=(o&r.childLanes)!==0,t.flags&128){if(c)return yp(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),qe(Ye,Ye.current),c)break;return null;case 22:case 23:return r.lanes=0,cp(t,r,o)}return gr(t,r,o)}var _p,zc,vp,Ep;_p=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},zc=function(){},vp=function(t,r,o,c){var f=t.memoizedProps;if(f!==c){t=r.stateNode,ki(jn.current);var m=null;switch(o){case"input":f=li(t,f),c=li(t,c),m=[];break;case"select":f=ie({},f,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":f=oo(t,f),c=oo(t,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=rl)}fo(o,c);var v;o=null;for(B in f)if(!c.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var R=f[B];for(v in R)R.hasOwnProperty(v)&&(o||(o={}),o[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var P=c[B];if(R=f!=null?f[B]:void 0,c.hasOwnProperty(B)&&P!==R&&(P!=null||R!=null))if(B==="style")if(R){for(v in R)!R.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(o||(o={}),o[v]="");for(v in P)P.hasOwnProperty(v)&&R[v]!==P[v]&&(o||(o={}),o[v]=P[v])}else o||(m||(m=[]),m.push(B,o)),o=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(m=m||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(m=m||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&He("scroll",t),m||R===P||(m=[])):(m=m||[]).push(B,P))}o&&(m=m||[]).push("style",o);var B=m;(r.updateQueue=B)&&(r.flags|=4)}},Ep=function(t,r,o,c){o!==c&&(r.flags|=4)};function Qo(t,r){if(!Ge)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function q_(t,r,o){var c=r.pendingProps;switch(lc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Ht(r.type)&&sl(),Nt(r),null;case 3:return c=r.stateNode,xs(),We(qt),We(Vt),wc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(cl(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Pn!==null&&(Xc(Pn),Pn=null))),zc(t,r),Nt(r),null;case 5:vc(r);var f=ki(jo.current);if(o=r.type,t!==null&&r.stateNode!=null)vp(t,r,o,c,f),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=ki(jn.current),cl(r)){c=r.stateNode,o=r.type;var m=r.memoizedProps;switch(c[Bn]=r,c[Fo]=m,t=(r.mode&1)!==0,o){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(f=0;f<Lo.length;f++)He(Lo[f],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":Hi(c,m),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},He("invalid",c);break;case"textarea":Qi(c,m),He("invalid",c)}fo(o,m),f=null;for(var v in m)if(m.hasOwnProperty(v)){var R=m[v];v==="children"?typeof R=="string"?c.textContent!==R&&(m.suppressHydrationWarning!==!0&&nl(c.textContent,R,t),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(m.suppressHydrationWarning!==!0&&nl(c.textContent,R,t),f=["children",""+R]):a.hasOwnProperty(v)&&R!=null&&v==="onScroll"&&He("scroll",c)}switch(o){case"input":er(c),Pa(c,m,!0);break;case"textarea":er(c),ao(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=rl)}c=f,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ut(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=v.createElement(o,{is:c.is}):(t=v.createElement(o),o==="select"&&(v=t,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):t=v.createElementNS(t,o),t[Bn]=r,t[Fo]=c,_p(t,r,!1,!1),r.stateNode=t;e:{switch(v=po(o,c),o){case"dialog":He("cancel",t),He("close",t),f=c;break;case"iframe":case"object":case"embed":He("load",t),f=c;break;case"video":case"audio":for(f=0;f<Lo.length;f++)He(Lo[f],t);f=c;break;case"source":He("error",t),f=c;break;case"img":case"image":case"link":He("error",t),He("load",t),f=c;break;case"details":He("toggle",t),f=c;break;case"input":Hi(t,c),f=li(t,c),He("invalid",t);break;case"option":f=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},f=ie({},c,{value:void 0}),He("invalid",t);break;case"textarea":Qi(t,c),f=oo(t,c),He("invalid",t);break;default:f=c}fo(o,f),R=f;for(m in R)if(R.hasOwnProperty(m)){var P=R[m];m==="style"?co(t,P):m==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&lo(t,P)):m==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Sr(t,P):typeof P=="number"&&Sr(t,""+P):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(a.hasOwnProperty(m)?P!=null&&m==="onScroll"&&He("scroll",t):P!=null&&J(t,m,P,v))}switch(o){case"input":er(t),Pa(t,c,!1);break;case"textarea":er(t),ao(t);break;case"option":c.value!=null&&t.setAttribute("value",""+Fe(c.value));break;case"select":t.multiple=!!c.multiple,m=c.value,m!=null?nr(t,!!c.multiple,m,!1):c.defaultValue!=null&&nr(t,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=rl)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)Ep(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(n(166));if(o=ki(jo.current),ki(jn.current),cl(r)){if(c=r.stateNode,o=r.memoizedProps,c[Bn]=r,(m=c.nodeValue!==o)&&(t=rn,t!==null))switch(t.tag){case 3:nl(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nl(c.nodeValue,o,(t.mode&1)!==0)}m&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Bn]=r,r.stateNode=c}return Nt(r),null;case 13:if(We(Ye),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&sn!==null&&r.mode&1&&!(r.flags&128))Id(),As(),r.flags|=98560,m=!1;else if(m=cl(r),c!==null&&c.dehydrated!==null){if(t===null){if(!m)throw Error(n(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Bn]=r}else As(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),m=!1}else Pn!==null&&(Xc(Pn),Pn=null),m=!0;if(!m)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,r.mode&1&&(t===null||Ye.current&1?dt===0&&(dt=3):eh())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return xs(),zc(t,r),t===null&&Mo(r.stateNode.containerInfo),Nt(r),null;case 10:return pc(r.type._context),Nt(r),null;case 17:return Ht(r.type)&&sl(),Nt(r),null;case 19:if(We(Ye),m=r.memoizedState,m===null)return Nt(r),null;if(c=(r.flags&128)!==0,v=m.rendering,v===null)if(c)Qo(m,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(v=gl(t),v!==null){for(r.flags|=128,Qo(m,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)m=o,t=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=t,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,t=v.dependencies,m.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return qe(Ye,Ye.current&1|2),r.child}t=t.sibling}m.tail!==null&&$e()>Ls&&(r.flags|=128,c=!0,Qo(m,!1),r.lanes=4194304)}else{if(!c)if(t=gl(v),t!==null){if(r.flags|=128,c=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Qo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Ge)return Nt(r),null}else 2*$e()-m.renderingStartTime>Ls&&o!==1073741824&&(r.flags|=128,c=!0,Qo(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(o=m.last,o!==null?o.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=$e(),r.sibling=null,o=Ye.current,qe(Ye,c?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return Zc(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&r.mode&1?on&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function H_(t,r){switch(lc(r),r.tag){case 1:return Ht(r.type)&&sl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return xs(),We(qt),We(Vt),wc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return vc(r),null;case 13:if(We(Ye),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));As()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return We(Ye),null;case 4:return xs(),null;case 10:return pc(r.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Rl=!1,Lt=!1,W_=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ds(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){et(t,r,c)}else o.current=null}function Bc(t,r,o){try{o()}catch(c){et(t,r,c)}}var wp=!1;function Q_(t,r){if(Zu=Dr,t=Zf(),Hu(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,R=-1,P=-1,B=0,Y=0,X=t,G=null;t:for(;;){for(var re;X!==o||f!==0&&X.nodeType!==3||(R=v+f),X!==m||c!==0&&X.nodeType!==3||(P=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(re=X.firstChild)!==null;)G=X,X=re;for(;;){if(X===t)break t;if(G===o&&++B===f&&(R=v),G===m&&++Y===c&&(P=v),(re=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=re}o=R===-1||P===-1?null:{start:R,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(ec={focusedElem:t,selectionRange:o},Dr=!1,oe=r;oe!==null;)if(r=oe,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,oe=t;else for(;oe!==null;){r=oe;try{var ae=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,rt=ae.memoizedState,b=r.stateNode,V=b.getSnapshotBeforeUpdate(r.elementType===r.type?ue:kn(r.type,ue),rt);b.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ee){et(r,r.return,ee)}if(t=r.sibling,t!==null){t.return=r.return,oe=t;break}oe=r.return}return ae=wp,wp=!1,ae}function Ko(t,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&t)===t){var m=f.destroy;f.destroy=void 0,m!==void 0&&Bc(r,o,m)}f=f.next}while(f!==c)}}function Al(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function jc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Tp(t){var r=t.alternate;r!==null&&(t.alternate=null,Tp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Bn],delete r[Fo],delete r[ic],delete r[k_],delete r[x_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ip(t){return t.tag===5||t.tag===3||t.tag===4}function Sp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ip(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $c(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=rl));else if(c!==4&&(t=t.child,t!==null))for($c(t,r,o),t=t.sibling;t!==null;)$c(t,r,o),t=t.sibling}function qc(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(qc(t,r,o),t=t.sibling;t!==null;)qc(t,r,o),t=t.sibling}var St=null,xn=!1;function Br(t,r,o){for(o=o.child;o!==null;)Rp(t,r,o),o=o.sibling}function Rp(t,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(yi,o)}catch{}switch(o.tag){case 5:Lt||Ds(o,r);case 6:var c=St,f=xn;St=null,Br(t,r,o),St=c,xn=f,St!==null&&(xn?(t=St,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):St.removeChild(o.stateNode));break;case 18:St!==null&&(xn?(t=St,o=o.stateNode,t.nodeType===8?rc(t.parentNode,o):t.nodeType===1&&rc(t,o),Rn(t)):rc(St,o.stateNode));break;case 4:c=St,f=xn,St=o.stateNode.containerInfo,xn=!0,Br(t,r,o),St=c,xn=f;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,v=m.destroy;m=m.tag,v!==void 0&&(m&2||m&4)&&Bc(o,r,v),f=f.next}while(f!==c)}Br(t,r,o);break;case 1:if(!Lt&&(Ds(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(R){et(o,r,R)}Br(t,r,o);break;case 21:Br(t,r,o);break;case 22:o.mode&1?(Lt=(c=Lt)||o.memoizedState!==null,Br(t,r,o),Lt=c):Br(t,r,o);break;default:Br(t,r,o)}}function Ap(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new W_),r.forEach(function(c){var f=nv.bind(null,t,c);o.has(c)||(o.add(c),c.then(f,f))})}}function Vn(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];try{var m=t,v=r,R=v;e:for(;R!==null;){switch(R.tag){case 5:St=R.stateNode,xn=!1;break e;case 3:St=R.stateNode.containerInfo,xn=!0;break e;case 4:St=R.stateNode.containerInfo,xn=!0;break e}R=R.return}if(St===null)throw Error(n(160));Rp(m,v,f),St=null,xn=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(B){et(f,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Cp(r,t),r=r.sibling}function Cp(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(r,t),qn(t),c&4){try{Ko(3,t,t.return),Al(3,t)}catch(ue){et(t,t.return,ue)}try{Ko(5,t,t.return)}catch(ue){et(t,t.return,ue)}}break;case 1:Vn(r,t),qn(t),c&512&&o!==null&&Ds(o,o.return);break;case 5:if(Vn(r,t),qn(t),c&512&&o!==null&&Ds(o,o.return),t.flags&32){var f=t.stateNode;try{Sr(f,"")}catch(ue){et(t,t.return,ue)}}if(c&4&&(f=t.stateNode,f!=null)){var m=t.memoizedProps,v=o!==null?o.memoizedProps:m,R=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{R==="input"&&m.type==="radio"&&m.name!=null&&io(f,m),po(R,v);var B=po(R,m);for(v=0;v<P.length;v+=2){var Y=P[v],X=P[v+1];Y==="style"?co(f,X):Y==="dangerouslySetInnerHTML"?lo(f,X):Y==="children"?Sr(f,X):J(f,Y,X,B)}switch(R){case"input":so(f,m);break;case"textarea":Ki(f,m);break;case"select":var G=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var re=m.value;re!=null?nr(f,!!m.multiple,re,!1):G!==!!m.multiple&&(m.defaultValue!=null?nr(f,!!m.multiple,m.defaultValue,!0):nr(f,!!m.multiple,m.multiple?[]:"",!1))}f[Fo]=m}catch(ue){et(t,t.return,ue)}}break;case 6:if(Vn(r,t),qn(t),c&4){if(t.stateNode===null)throw Error(n(162));f=t.stateNode,m=t.memoizedProps;try{f.nodeValue=m}catch(ue){et(t,t.return,ue)}}break;case 3:if(Vn(r,t),qn(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Rn(r.containerInfo)}catch(ue){et(t,t.return,ue)}break;case 4:Vn(r,t),qn(t);break;case 13:Vn(r,t),qn(t),f=t.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Qc=$e())),c&4&&Ap(t);break;case 22:if(Y=o!==null&&o.memoizedState!==null,t.mode&1?(Lt=(B=Lt)||Y,Vn(r,t),Lt=B):Vn(r,t),qn(t),c&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!Y&&t.mode&1)for(oe=t,Y=t.child;Y!==null;){for(X=oe=Y;oe!==null;){switch(G=oe,re=G.child,G.tag){case 0:case 11:case 14:case 15:Ko(4,G,G.return);break;case 1:Ds(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){c=G,o=G.return;try{r=c,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(ue){et(c,o,ue)}}break;case 5:Ds(G,G.return);break;case 22:if(G.memoizedState!==null){xp(X);continue}}re!==null?(re.return=G,oe=re):xp(X)}Y=Y.sibling}e:for(Y=null,X=t;;){if(X.tag===5){if(Y===null){Y=X;try{f=X.stateNode,B?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(R=X.stateNode,P=X.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=uo("display",v))}catch(ue){et(t,t.return,ue)}}}else if(X.tag===6){if(Y===null)try{X.stateNode.nodeValue=B?"":X.memoizedProps}catch(ue){et(t,t.return,ue)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===t)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===t)break e;for(;X.sibling===null;){if(X.return===null||X.return===t)break e;Y===X&&(Y=null),X=X.return}Y===X&&(Y=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Vn(r,t),qn(t),c&4&&Ap(t);break;case 21:break;default:Vn(r,t),qn(t)}}function qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Ip(o)){var c=o;break e}o=o.return}throw Error(n(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Sr(f,""),c.flags&=-33);var m=Sp(t);qc(t,m,f);break;case 3:case 4:var v=c.stateNode.containerInfo,R=Sp(t);$c(t,R,v);break;default:throw Error(n(161))}}catch(P){et(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function K_(t,r,o){oe=t,Pp(t)}function Pp(t,r,o){for(var c=(t.mode&1)!==0;oe!==null;){var f=oe,m=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||Rl;if(!v){var R=f.alternate,P=R!==null&&R.memoizedState!==null||Lt;R=Rl;var B=Lt;if(Rl=v,(Lt=P)&&!B)for(oe=f;oe!==null;)v=oe,P=v.child,v.tag===22&&v.memoizedState!==null?Vp(f):P!==null?(P.return=v,oe=P):Vp(f);for(;m!==null;)oe=m,Pp(m),m=m.sibling;oe=f,Rl=R,Lt=B}kp(t)}else f.subtreeFlags&8772&&m!==null?(m.return=f,oe=m):kp(t)}}function kp(t){for(;oe!==null;){var r=oe;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Lt||Al(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Lt)if(o===null)c.componentDidMount();else{var f=r.elementType===r.type?o.memoizedProps:kn(r.type,o.memoizedProps);c.componentDidUpdate(f,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&xd(r,m,c);break;case 3:var v=r.updateQueue;if(v!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}xd(r,v,o)}break;case 5:var R=r.stateNode;if(o===null&&r.flags&4){o=R;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var Y=B.memoizedState;if(Y!==null){var X=Y.dehydrated;X!==null&&Rn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lt||r.flags&512&&jc(r)}catch(G){et(r,r.return,G)}}if(r===t){oe=null;break}if(o=r.sibling,o!==null){o.return=r.return,oe=o;break}oe=r.return}}function xp(t){for(;oe!==null;){var r=oe;if(r===t){oe=null;break}var o=r.sibling;if(o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Vp(t){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Al(4,r)}catch(P){et(r,o,P)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var f=r.return;try{c.componentDidMount()}catch(P){et(r,f,P)}}var m=r.return;try{jc(r)}catch(P){et(r,m,P)}break;case 5:var v=r.return;try{jc(r)}catch(P){et(r,v,P)}}}catch(P){et(r,r.return,P)}if(r===t){oe=null;break}var R=r.sibling;if(R!==null){R.return=r.return,oe=R;break}oe=r.return}}var G_=Math.ceil,Cl=fe.ReactCurrentDispatcher,Hc=fe.ReactCurrentOwner,gn=fe.ReactCurrentBatchConfig,Ne=0,vt=null,ot=null,Rt=0,on=0,Ns=Or(0),dt=0,Go=null,Vi=0,Pl=0,Wc=0,Yo=null,Qt=null,Qc=0,Ls=1/0,yr=null,kl=!1,Kc=null,jr=null,xl=!1,$r=null,Vl=0,Xo=0,Gc=null,Dl=-1,Nl=0;function Bt(){return Ne&6?$e():Dl!==-1?Dl:Dl=$e()}function qr(t){return t.mode&1?Ne&2&&Rt!==0?Rt&-Rt:D_.transition!==null?(Nl===0&&(Nl=vi()),Nl):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Ro(t.type)),t):1}function Dn(t,r,o,c){if(50<Xo)throw Xo=0,Gc=null,Error(n(185));Pr(t,o,c),(!(Ne&2)||t!==vt)&&(t===vt&&(!(Ne&2)&&(Pl|=o),dt===4&&Hr(t,Rt)),Kt(t,c),o===1&&Ne===0&&!(r.mode&1)&&(Ls=$e()+500,al&&Ur()))}function Kt(t,r){var o=t.callbackNode;sr(t,r);var c=_i(t,t===vt?Rt:0);if(c===0)o!==null&&Eo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(o!=null&&Eo(o),r===1)t.tag===0?V_(Np.bind(null,t)):_d(Np.bind(null,t)),C_(function(){!(Ne&6)&&Ur()}),o=null;else{switch(xr(c)){case 1:o=gi;break;case 4:o=Rr;break;case 16:o=un;break;case 536870912:o=Na;break;default:o=un}o=Bp(o,Dp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Dp(t,r){if(Dl=-1,Nl=0,Ne&6)throw Error(n(327));var o=t.callbackNode;if(Ms()&&t.callbackNode!==o)return null;var c=_i(t,t===vt?Rt:0);if(c===0)return null;if(c&30||c&t.expiredLanes||r)r=Ll(t,c);else{r=c;var f=Ne;Ne|=2;var m=Mp();(vt!==t||Rt!==r)&&(yr=null,Ls=$e()+500,Ni(t,r));do try{J_();break}catch(R){Lp(t,R)}while(!0);dc(),Cl.current=m,Ne=f,ot!==null?r=0:(vt=null,Rt=0,r=dt)}if(r!==0){if(r===2&&(f=en(t),f!==0&&(c=f,r=Yc(t,f))),r===1)throw o=Go,Ni(t,0),Hr(t,c),Kt(t,$e()),o;if(r===6)Hr(t,c);else{if(f=t.current.alternate,!(c&30)&&!Y_(f)&&(r=Ll(t,c),r===2&&(m=en(t),m!==0&&(c=m,r=Yc(t,m))),r===1))throw o=Go,Ni(t,0),Hr(t,c),Kt(t,$e()),o;switch(t.finishedWork=f,t.finishedLanes=c,r){case 0:case 1:throw Error(n(345));case 2:Li(t,Qt,yr);break;case 3:if(Hr(t,c),(c&130023424)===c&&(r=Qc+500-$e(),10<r)){if(_i(t,0)!==0)break;if(f=t.suspendedLanes,(f&c)!==c){Bt(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=nc(Li.bind(null,t,Qt,yr),r);break}Li(t,Qt,yr);break;case 4:if(Hr(t,c),(c&4194240)===c)break;for(r=t.eventTimes,f=-1;0<c;){var v=31-Ut(c);m=1<<v,v=r[v],v>f&&(f=v),c&=~m}if(c=f,c=$e()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*G_(c/1960))-c,10<c){t.timeoutHandle=nc(Li.bind(null,t,Qt,yr),c);break}Li(t,Qt,yr);break;case 5:Li(t,Qt,yr);break;default:throw Error(n(329))}}}return Kt(t,$e()),t.callbackNode===o?Dp.bind(null,t):null}function Yc(t,r){var o=Yo;return t.current.memoizedState.isDehydrated&&(Ni(t,r).flags|=256),t=Ll(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&Xc(r)),t}function Xc(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function Y_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(t,r){for(r&=~Wc,r&=~Pl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),c=1<<o;t[o]=-1,r&=~c}}function Np(t){if(Ne&6)throw Error(n(327));Ms();var r=_i(t,0);if(!(r&1))return Kt(t,$e()),null;var o=Ll(t,r);if(t.tag!==0&&o===2){var c=en(t);c!==0&&(r=c,o=Yc(t,c))}if(o===1)throw o=Go,Ni(t,0),Hr(t,r),Kt(t,$e()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Li(t,Qt,yr),Kt(t,$e()),null}function Jc(t,r){var o=Ne;Ne|=1;try{return t(r)}finally{Ne=o,Ne===0&&(Ls=$e()+500,al&&Ur())}}function Di(t){$r!==null&&$r.tag===0&&!(Ne&6)&&Ms();var r=Ne;Ne|=1;var o=gn.transition,c=Ce;try{if(gn.transition=null,Ce=1,t)return t()}finally{Ce=c,gn.transition=o,Ne=r,!(Ne&6)&&Ur()}}function Zc(){on=Ns.current,We(Ns)}function Ni(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,A_(o)),ot!==null)for(o=ot.return;o!==null;){var c=o;switch(lc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&sl();break;case 3:xs(),We(qt),We(Vt),wc();break;case 5:vc(c);break;case 4:xs();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:pc(c.type._context);break;case 22:case 23:Zc()}o=o.return}if(vt=t,ot=t=Wr(t.current,null),Rt=on=r,dt=0,Go=null,Wc=Pl=Vi=0,Qt=Yo=null,Pi!==null){for(r=0;r<Pi.length;r++)if(o=Pi[r],c=o.interleaved,c!==null){o.interleaved=null;var f=c.next,m=o.pending;if(m!==null){var v=m.next;m.next=f,c.next=v}o.pending=c}Pi=null}return t}function Lp(t,r){do{var o=ot;try{if(dc(),yl.current=wl,_l){for(var c=Xe.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}_l=!1}if(xi=0,_t=ft=Xe=null,$o=!1,qo=0,Hc.current=null,o===null||o.return===null){dt=1,Go=r,ot=null;break}e:{var m=t,v=o.return,R=o,P=r;if(r=Rt,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,Y=R,X=Y.tag;if(!(Y.mode&1)&&(X===0||X===11||X===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var re=sp(v);if(re!==null){re.flags&=-257,op(re,v,R,m,r),re.mode&1&&ip(m,B,r),r=re,P=B;var ae=r.updateQueue;if(ae===null){var ue=new Set;ue.add(P),r.updateQueue=ue}else ae.add(P);break e}else{if(!(r&1)){ip(m,B,r),eh();break e}P=Error(n(426))}}else if(Ge&&R.mode&1){var rt=sp(v);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),op(rt,v,R,m,r),hc(Vs(P,R));break e}}m=P=Vs(P,R),dt!==4&&(dt=2),Yo===null?Yo=[m]:Yo.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var b=np(m,P,r);kd(m,b);break e;case 1:R=P;var V=m.type,z=m.stateNode;if(!(m.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(jr===null||!jr.has(z)))){m.flags|=65536,r&=-r,m.lanes|=r;var ee=rp(m,R,r);kd(m,ee);break e}}m=m.return}while(m!==null)}Fp(o)}catch(ce){r=ce,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function Mp(){var t=Cl.current;return Cl.current=wl,t===null?wl:t}function eh(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Vi&268435455)&&!(Pl&268435455)||Hr(vt,Rt)}function Ll(t,r){var o=Ne;Ne|=2;var c=Mp();(vt!==t||Rt!==r)&&(yr=null,Ni(t,r));do try{X_();break}catch(f){Lp(t,f)}while(!0);if(dc(),Ne=o,Cl.current=c,ot!==null)throw Error(n(261));return vt=null,Rt=0,dt}function X_(){for(;ot!==null;)Op(ot)}function J_(){for(;ot!==null&&!Va();)Op(ot)}function Op(t){var r=zp(t.alternate,t,on);t.memoizedProps=t.pendingProps,r===null?Fp(t):ot=r,Hc.current=null}function Fp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=H_(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(o=q_(o,r,on),o!==null){ot=o;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);dt===0&&(dt=5)}function Li(t,r,o){var c=Ce,f=gn.transition;try{gn.transition=null,Ce=1,Z_(t,r,o,c)}finally{gn.transition=f,Ce=c}return null}function Z_(t,r,o,c){do Ms();while($r!==null);if(Ne&6)throw Error(n(327));o=t.finishedWork;var f=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var m=o.lanes|o.childLanes;if(Be(t,m),t===vt&&(ot=vt=null,Rt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||xl||(xl=!0,Bp(un,function(){return Ms(),null})),m=(o.flags&15990)!==0,o.subtreeFlags&15990||m){m=gn.transition,gn.transition=null;var v=Ce;Ce=1;var R=Ne;Ne|=4,Hc.current=null,Q_(t,o),Cp(o,t),v_(ec),Dr=!!Zu,ec=Zu=null,t.current=o,K_(o),Fu(),Ne=R,Ce=v,gn.transition=m}else t.current=o;if(xl&&(xl=!1,$r=t,Vl=f),m=t.pendingLanes,m===0&&(jr=null),La(o.stateNode),Kt(t,$e()),r!==null)for(c=t.onRecoverableError,o=0;o<r.length;o++)f=r[o],c(f.value,{componentStack:f.stack,digest:f.digest});if(kl)throw kl=!1,t=Kc,Kc=null,t;return Vl&1&&t.tag!==0&&Ms(),m=t.pendingLanes,m&1?t===Gc?Xo++:(Xo=0,Gc=t):Xo=0,Ur(),null}function Ms(){if($r!==null){var t=xr(Vl),r=gn.transition,o=Ce;try{if(gn.transition=null,Ce=16>t?16:t,$r===null)var c=!1;else{if(t=$r,$r=null,Vl=0,Ne&6)throw Error(n(331));var f=Ne;for(Ne|=4,oe=t.current;oe!==null;){var m=oe,v=m.child;if(oe.flags&16){var R=m.deletions;if(R!==null){for(var P=0;P<R.length;P++){var B=R[P];for(oe=B;oe!==null;){var Y=oe;switch(Y.tag){case 0:case 11:case 15:Ko(8,Y,m)}var X=Y.child;if(X!==null)X.return=Y,oe=X;else for(;oe!==null;){Y=oe;var G=Y.sibling,re=Y.return;if(Tp(Y),Y===B){oe=null;break}if(G!==null){G.return=re,oe=G;break}oe=re}}}var ae=m.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var rt=ue.sibling;ue.sibling=null,ue=rt}while(ue!==null)}}oe=m}}if(m.subtreeFlags&2064&&v!==null)v.return=m,oe=v;else e:for(;oe!==null;){if(m=oe,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Ko(9,m,m.return)}var b=m.sibling;if(b!==null){b.return=m.return,oe=b;break e}oe=m.return}}var V=t.current;for(oe=V;oe!==null;){v=oe;var z=v.child;if(v.subtreeFlags&2064&&z!==null)z.return=v,oe=z;else e:for(v=V;oe!==null;){if(R=oe,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:Al(9,R)}}catch(ce){et(R,R.return,ce)}if(R===v){oe=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,oe=ee;break e}oe=R.return}}if(Ne=f,Ur(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(yi,t)}catch{}c=!0}return c}finally{Ce=o,gn.transition=r}}return!1}function Up(t,r,o){r=Vs(o,r),r=np(t,r,1),t=zr(t,r,1),r=Bt(),t!==null&&(Pr(t,1,r),Kt(t,r))}function et(t,r,o){if(t.tag===3)Up(t,t,o);else for(;r!==null;){if(r.tag===3){Up(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(jr===null||!jr.has(c))){t=Vs(o,t),t=rp(r,t,1),r=zr(r,t,1),t=Bt(),r!==null&&(Pr(r,1,t),Kt(r,t));break}}r=r.return}}function ev(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,vt===t&&(Rt&o)===o&&(dt===4||dt===3&&(Rt&130023424)===Rt&&500>$e()-Qc?Ni(t,0):Wc|=o),Kt(t,r)}function bp(t,r){r===0&&(t.mode&1?(r=is,is<<=1,!(is&130023424)&&(is=4194304)):r=1);var o=Bt();t=pr(t,r),t!==null&&(Pr(t,r,o),Kt(t,o))}function tv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),bp(t,o)}function nv(t,r){var o=0;switch(t.tag){case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(r),bp(t,o)}var zp;zp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Wt=!1,$_(t,r,o);Wt=!!(t.flags&131072)}else Wt=!1,Ge&&r.flags&1048576&&vd(r,ul,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Sl(t,r),t=r.pendingProps;var f=Is(r,Vt.current);ks(r,o),f=Sc(null,r,c,t,f,o);var m=Rc();return r.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ht(c)?(m=!0,ol(r)):m=!1,r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,yc(r),f.updater=Tl,r.stateNode=f,f._reactInternals=r,Vc(r,c,t,o),r=Mc(null,r,c,!0,m,o)):(r.tag=0,Ge&&m&&ac(r),zt(null,r,f,o),r=r.child),r;case 16:c=r.elementType;e:{switch(Sl(t,r),t=r.pendingProps,f=c._init,c=f(c._payload),r.type=c,f=r.tag=iv(c),t=kn(c,t),f){case 0:r=Lc(null,r,c,t,o);break e;case 1:r=fp(null,r,c,t,o);break e;case 11:r=ap(null,r,c,t,o);break e;case 14:r=lp(null,r,c,kn(c.type,t),o);break e}throw Error(n(306,c,""))}return r;case 0:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:kn(c,f),Lc(t,r,c,f,o);case 1:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:kn(c,f),fp(t,r,c,f,o);case 3:e:{if(dp(r),t===null)throw Error(n(387));c=r.pendingProps,m=r.memoizedState,f=m.element,Pd(t,r),ml(r,c,null,o);var v=r.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){f=Vs(Error(n(423)),r),r=pp(t,r,c,o,f);break e}else if(c!==f){f=Vs(Error(n(424)),r),r=pp(t,r,c,o,f);break e}else for(sn=Mr(r.stateNode.containerInfo.firstChild),rn=r,Ge=!0,Pn=null,o=Ad(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(As(),c===f){r=gr(t,r,o);break e}zt(t,r,c,o)}r=r.child}return r;case 5:return Vd(r),t===null&&cc(r),c=r.type,f=r.pendingProps,m=t!==null?t.memoizedProps:null,v=f.children,tc(c,f)?v=null:m!==null&&tc(c,m)&&(r.flags|=32),hp(t,r),zt(t,r,v,o),r.child;case 6:return t===null&&cc(r),null;case 13:return mp(t,r,o);case 4:return _c(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Cs(r,null,c,o):zt(t,r,c,o),r.child;case 11:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:kn(c,f),ap(t,r,c,f,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,f=r.pendingProps,m=r.memoizedProps,v=f.value,qe(fl,c._currentValue),c._currentValue=v,m!==null)if(Cn(m.value,v)){if(m.children===f.children&&!qt.current){r=gr(t,r,o);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var R=m.dependencies;if(R!==null){v=m.child;for(var P=R.firstContext;P!==null;){if(P.context===c){if(m.tag===1){P=mr(-1,o&-o),P.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var Y=B.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),B.pending=P}}m.lanes|=o,P=m.alternate,P!==null&&(P.lanes|=o),mc(m.return,o,r),R.lanes|=o;break}P=P.next}}else if(m.tag===10)v=m.type===r.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(n(341));v.lanes|=o,R=v.alternate,R!==null&&(R.lanes|=o),mc(v,o,r),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===r){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}zt(t,r,f.children,o),r=r.child}return r;case 9:return f=r.type,c=r.pendingProps.children,ks(r,o),f=pn(f),c=c(f),r.flags|=1,zt(t,r,c,o),r.child;case 14:return c=r.type,f=kn(c,r.pendingProps),f=kn(c.type,f),lp(t,r,c,f,o);case 15:return up(t,r,r.type,r.pendingProps,o);case 17:return c=r.type,f=r.pendingProps,f=r.elementType===c?f:kn(c,f),Sl(t,r),r.tag=1,Ht(c)?(t=!0,ol(r)):t=!1,ks(r,o),ep(r,c,f),Vc(r,c,f,o),Mc(null,r,c,!0,t,o);case 19:return yp(t,r,o);case 22:return cp(t,r,o)}throw Error(n(156,r.tag))};function Bp(t,r){return ns(t,r)}function rv(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,o,c){return new rv(t,r,o,c)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iv(t){if(typeof t=="function")return th(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F)return 11;if(t===kt)return 14}return 2}function Wr(t,r){var o=t.alternate;return o===null?(o=yn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Ml(t,r,o,c,f,m){var v=2;if(c=t,typeof t=="function")th(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case x:return Mi(o.children,f,m,r);case S:v=8,f|=8;break;case A:return t=yn(12,o,r,f|2),t.elementType=A,t.lanes=m,t;case C:return t=yn(13,o,r,f),t.elementType=C,t.lanes=m,t;case tt:return t=yn(19,o,r,f),t.elementType=tt,t.lanes=m,t;case ze:return Ol(o,f,m,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:v=10;break e;case N:v=9;break e;case F:v=11;break e;case kt:v=14;break e;case xt:v=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=yn(v,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Mi(t,r,o,c){return t=yn(7,t,c,r),t.lanes=o,t}function Ol(t,r,o,c){return t=yn(22,t,c,r),t.elementType=ze,t.lanes=o,t.stateNode={isHidden:!1},t}function nh(t,r,o){return t=yn(6,t,null,r),t.lanes=o,t}function rh(t,r,o){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function sv(t,r,o,c,f){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ih(t,r,o,c,f,m,v,R,P){return t=new sv(t,r,o,R,P),r===1?(r=1,m===!0&&(r|=8)):r=0,m=yn(3,null,null,r),t.current=m,m.stateNode=t,m.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},yc(m),t}function ov(t,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:c==null?null:""+c,children:t,containerInfo:r,implementation:o}}function jp(t){if(!t)return Fr;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ht(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Ht(o))return gd(t,o,r)}return r}function $p(t,r,o,c,f,m,v,R,P){return t=ih(o,c,!0,t,f,m,v,R,P),t.context=jp(null),o=t.current,c=Bt(),f=qr(o),m=mr(c,f),m.callback=r??null,zr(o,m,f),t.current.lanes=f,Pr(t,f,c),Kt(t,c),t}function Fl(t,r,o,c){var f=r.current,m=Bt(),v=qr(f);return o=jp(o),r.context===null?r.context=o:r.pendingContext=o,r=mr(m,v),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=zr(f,r,v),t!==null&&(Dn(t,f,v,m),pl(t,f,v)),v}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function sh(t,r){qp(t,r),(t=t.alternate)&&qp(t,r)}var Hp=typeof reportError=="function"?reportError:function(t){console.error(t)};function oh(t){this._internalRoot=t}bl.prototype.render=oh.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Fl(t,r,null,null)},bl.prototype.unmount=oh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Di(function(){Fl(null,t,null,null)}),r[cr]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ba();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Fn.length&&r!==0&&r<Fn[o].priority;o++);Fn.splice(o,0,t),o===0&&ja(t)}};function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function av(t,r,o,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var B=Ul(v);m.call(B)}}var v=$p(r,c,t,0,null,!1,!1,"",Wp);return t._reactRootContainer=v,t[cr]=v.current,Mo(t.nodeType===8?t.parentNode:t),Di(),v}for(;f=t.lastChild;)t.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var B=Ul(P);R.call(B)}}var P=ih(t,0,!1,null,null,!1,!1,"",Wp);return t._reactRootContainer=P,t[cr]=P.current,Mo(t.nodeType===8?t.parentNode:t),Di(function(){Fl(r,P,o,c)}),P}function Bl(t,r,o,c,f){var m=o._reactRootContainer;if(m){var v=m;if(typeof f=="function"){var R=f;f=function(){var P=Ul(v);R.call(P)}}Fl(r,v,t,f)}else v=av(o,r,t,f,c);return Ul(v)}Fa=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(kr(r,o|1),Kt(r,$e()),!(Ne&6)&&(Ls=$e()+500,Ur()))}break;case 13:Di(function(){var c=pr(t,1);if(c!==null){var f=Bt();Dn(c,t,1,f)}}),sh(t,1)}},ss=function(t){if(t.tag===13){var r=pr(t,134217728);if(r!==null){var o=Bt();Dn(r,t,134217728,o)}sh(t,134217728)}},Ua=function(t){if(t.tag===13){var r=qr(t),o=pr(t,r);if(o!==null){var c=Bt();Dn(o,t,r,c)}sh(t,r)}},ba=function(){return Ce},za=function(t,r){var o=Ce;try{return Ce=t,r()}finally{Ce=o}},Yi=function(t,r,o){switch(r){case"input":if(so(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=il(c);if(!f)throw Error(n(90));qi(c),so(c,f)}}}break;case"textarea":Ki(t,o);break;case"select":r=o.value,r!=null&&nr(t,!!o.multiple,r,!1)}},fi=Jc,go=Di;var lv={usingClientEntryPoint:!1,Events:[Uo,ws,il,Mn,mo,Jc]},Jo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uv={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vo(t),t===null?null:t.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{yi=jl.inject(uv),Zt=jl}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv,Gt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(r))throw Error(n(200));return ov(t,r,null,o)},Gt.createRoot=function(t,r){if(!ah(t))throw Error(n(299));var o=!1,c="",f=Hp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),r=ih(t,1,!1,null,null,o,!1,c,f),t[cr]=r.current,Mo(t.nodeType===8?t.parentNode:t),new oh(r)},Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=vo(r),t=t===null?null:t.stateNode,t},Gt.flushSync=function(t){return Di(t)},Gt.hydrate=function(t,r,o){if(!zl(r))throw Error(n(200));return Bl(null,t,r,!0,o)},Gt.hydrateRoot=function(t,r,o){if(!ah(t))throw Error(n(405));var c=o!=null&&o.hydratedSources||null,f=!1,m="",v=Hp;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),r=$p(r,null,t,1,o??null,f,!1,m,v),t[cr]=r.current,Mo(t),c)for(t=0;t<c.length;t++)o=c[t],f=o._getVersion,f=f(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,f]:r.mutableSourceEagerHydrationData.push(o,f);return new bl(r)},Gt.render=function(t,r,o){if(!zl(r))throw Error(n(200));return Bl(null,t,r,!1,o)},Gt.unmountComponentAtNode=function(t){if(!zl(t))throw Error(n(40));return t._reactRootContainer?(Di(function(){Bl(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1},Gt.unstable_batchedUpdates=Jc,Gt.unstable_renderSubtreeIntoContainer=function(t,r,o,c){if(!zl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Bl(t,r,o,!1,c)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var em;function yv(){if(em)return ch.exports;em=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ch.exports=gv(),ch.exports}var tm;function _v(){if(tm)return $l;tm=1;var i=yv();return $l.createRoot=i.createRoot,$l.hydrateRoot=i.hydrateRoot,$l}var vv=_v(),ea={},nm;function Ev(){if(nm)return ea;nm=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.parse=h,ea.serialize=_;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,D){const M=new u,$=I.length;if($<2)return M;const O=(D==null?void 0:D.decode)||E;let q=0;do{const Z=I.indexOf("=",q);if(Z===-1)break;const J=I.indexOf(";",q),fe=J===-1?$:J;if(Z>fe){q=I.lastIndexOf(";",Z-1)+1;continue}const Re=p(I,q,Z),we=g(I,Z,Re),x=I.slice(Re,we);if(M[x]===void 0){let S=p(I,Z+1,fe),A=g(I,fe,S);const k=O(I.slice(S,A));M[x]=k}q=fe+1}while(q<$);return M}function p(I,D,M){do{const $=I.charCodeAt(D);if($!==32&&$!==9)return D}while(++D<M);return M}function g(I,D,M){for(;D>M;){const $=I.charCodeAt(--D);if($!==32&&$!==9)return D+1}return M}function _(I,D,M){const $=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const O=$(D);if(!e.test(O))throw new TypeError(`argument val is invalid: ${D}`);let q=I+"="+O;if(!M)return q;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);q+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);q+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);q+="; Path="+M.path}if(M.expires){if(!T(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);q+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(q+="; HttpOnly"),M.secure&&(q+="; Secure"),M.partitioned&&(q+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return q}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function T(I){return a.call(I)==="[object Date]"}return ea}Ev();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rm="popstate";function wv(i={}){function e(s,a){let{pathname:u,search:h,hash:p}=s.location;return Rh("",{pathname:u,search:h,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:ca(a)}return Iv(e,n,null,i)}function Je(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Gn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tv(){return Math.random().toString(36).substring(2,10)}function im(i,e){return{usr:i.state,key:i.key,idx:e}}function Rh(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Xs(e):e,state:n,key:e&&e.key||s||Tv()}}function ca({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Xs(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Iv(i,e,n,s={}){let{window:a=document.defaultView,v5Compat:u=!1}=s,h=a.history,p="POP",g=null,_=E();_==null&&(_=0,h.replaceState({...h.state,idx:_},""));function E(){return(h.state||{idx:null}).idx}function T(){p="POP";let O=E(),q=O==null?null:O-_;_=O,g&&g({action:p,location:$.location,delta:q})}function I(O,q){p="PUSH";let Z=Rh($.location,O,q);_=E()+1;let J=im(Z,_),fe=$.createHref(Z);try{h.pushState(J,"",fe)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;a.location.assign(fe)}u&&g&&g({action:p,location:$.location,delta:1})}function D(O,q){p="REPLACE";let Z=Rh($.location,O,q);_=E();let J=im(Z,_),fe=$.createHref(Z);h.replaceState(J,"",fe),u&&g&&g({action:p,location:$.location,delta:0})}function M(O){let q=a.location.origin!=="null"?a.location.origin:a.location.href,Z=typeof O=="string"?O:ca(O);return Z=Z.replace(/ $/,"%20"),Je(q,`No window.location.(origin|href) available to create URL for href: ${Z}`),new URL(Z,q)}let $={get action(){return p},get location(){return i(a,h)},listen(O){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(rm,T),g=O,()=>{a.removeEventListener(rm,T),g=null}},createHref(O){return e(a,O)},createURL:M,encodeLocation(O){let q=M(O);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:I,replace:D,go(O){return h.go(O)}};return $}function ug(i,e,n="/"){return Sv(i,e,n,!1)}function Sv(i,e,n,s){let a=typeof e=="string"?Xs(e):e,u=ei(a.pathname||"/",n);if(u==null)return null;let h=cg(i);Rv(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let _=Ov(u);p=Lv(h[g],_,s)}return p}function cg(i,e=[],n=[],s=""){let a=(u,h,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Je(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let _=_r([s,g.relativePath]),E=n.concat(g);u.children&&u.children.length>0&&(Je(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),cg(u.children,e,E,_)),!(u.path==null&&!u.index)&&e.push({path:_,score:Dv(_,u.index),routesMeta:E})};return i.forEach((u,h)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))a(u,h);else for(let g of hg(u.path))a(u,h,g)}),e}function hg(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return a?[u,""]:[u];let h=hg(s.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&p.push(...h),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function Rv(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:Nv(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Av=/^:[\w-]+$/,Cv=3,Pv=2,kv=1,xv=10,Vv=-2,sm=i=>i==="*";function Dv(i,e){let n=i.split("/"),s=n.length;return n.some(sm)&&(s+=Vv),e&&(s+=Pv),n.filter(a=>!sm(a)).reduce((a,u)=>a+(Av.test(u)?Cv:u===""?kv:xv),s)}function Nv(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function Lv(i,e,n=!1){let{routesMeta:s}=i,a={},u="/",h=[];for(let p=0;p<s.length;++p){let g=s[p],_=p===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=iu({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},E),I=g.route;if(!T&&_&&n&&!s[s.length-1].route.index&&(T=iu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!T)return null;Object.assign(a,T.params),h.push({params:a,pathname:_r([u,T.pathname]),pathnameBase:zv(_r([u,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(u=_r([u,T.pathnameBase]))}return h}function iu(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=Mv(i.path,i.caseSensitive,i.end),a=e.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),p=a.slice(1);return{params:s.reduce((_,{paramName:E,isOptional:T},I)=>{if(E==="*"){let M=p[I]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const D=p[I];return T&&!D?_[E]=void 0:_[E]=(D||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:h,pattern:i}}function Mv(i,e=!1,n=!0){Gn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(s.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function Ov(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ei(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function Fv(i,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof i=="string"?Xs(i):i;return{pathname:n?n.startsWith("/")?n:Uv(n,e):e,search:Bv(s),hash:jv(a)}}function Uv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function dh(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bv(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fg(i){let e=bv(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function dg(i,e,n,s=!1){let a;typeof i=="string"?a=Xs(i):(a={...i},Je(!a.pathname||!a.pathname.includes("?"),dh("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),dh("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),dh("#","search","hash",a)));let u=i===""||a.pathname==="",h=u?"/":a.pathname,p;if(h==null)p=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;a.pathname=I.join("/")}p=T>=0?e[T]:"/"}let g=Fv(a,p),_=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(_||E)&&(g.pathname+="/"),g}var _r=i=>i.join("/").replace(/\/\/+/g,"/"),zv=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Bv=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,jv=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function $v(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var pg=["POST","PUT","PATCH","DELETE"];new Set(pg);var qv=["GET",...pg];new Set(qv);var Js=H.createContext(null);Js.displayName="DataRouter";var yu=H.createContext(null);yu.displayName="DataRouterState";var mg=H.createContext({isTransitioning:!1});mg.displayName="ViewTransition";var Hv=H.createContext(new Map);Hv.displayName="Fetchers";var Wv=H.createContext(null);Wv.displayName="Await";var Jn=H.createContext(null);Jn.displayName="Navigation";var va=H.createContext(null);va.displayName="Location";var Zn=H.createContext({outlet:null,matches:[],isDataRoute:!1});Zn.displayName="Route";var Jh=H.createContext(null);Jh.displayName="RouteError";function Qv(i,{relative:e}={}){Je(Ea(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=H.useContext(Jn),{hash:a,pathname:u,search:h}=wa(i,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:_r([n,u])),s.createHref({pathname:p,search:h,hash:a})}function Ea(){return H.useContext(va)!=null}function zi(){return Je(Ea(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(va).location}var gg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yg(i){H.useContext(Jn).static||H.useLayoutEffect(i)}function Zh(){let{isDataRoute:i}=H.useContext(Zn);return i?aE():Kv()}function Kv(){Je(Ea(),"useNavigate() may be used only in the context of a <Router> component.");let i=H.useContext(Js),{basename:e,navigator:n}=H.useContext(Jn),{matches:s}=H.useContext(Zn),{pathname:a}=zi(),u=JSON.stringify(fg(s)),h=H.useRef(!1);return yg(()=>{h.current=!0}),H.useCallback((g,_={})=>{if(Gn(h.current,gg),!h.current)return;if(typeof g=="number"){n.go(g);return}let E=dg(g,JSON.parse(u),a,_.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:_r([e,E.pathname])),(_.replace?n.replace:n.push)(E,_.state,_)},[e,n,u,a,i])}H.createContext(null);function Gv(){let{matches:i}=H.useContext(Zn),e=i[i.length-1];return e?e.params:{}}function wa(i,{relative:e}={}){let{matches:n}=H.useContext(Zn),{pathname:s}=zi(),a=JSON.stringify(fg(n));return H.useMemo(()=>dg(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function Yv(i,e){return _g(i,e)}function _g(i,e,n,s){var Z;Je(Ea(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:u}=H.useContext(Jn),{matches:h}=H.useContext(Zn),p=h[h.length-1],g=p?p.params:{},_=p?p.pathname:"/",E=p?p.pathnameBase:"/",T=p&&p.route;{let J=T&&T.path||"";vg(_,!T||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let I=zi(),D;if(e){let J=typeof e=="string"?Xs(e):e;Je(E==="/"||((Z=J.pathname)==null?void 0:Z.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${J.pathname}" was given in the \`location\` prop.`),D=J}else D=I;let M=D.pathname||"/",$=M;if(E!=="/"){let J=E.replace(/^\//,"").split("/");$="/"+M.replace(/^\//,"").split("/").slice(J.length).join("/")}let O=!u&&n&&n.matches&&n.matches.length>0?n.matches:ug(i,{pathname:$});Gn(T||O!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Gn(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=tE(O&&O.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:_r([E,a.encodeLocation?a.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?E:_r([E,a.encodeLocation?a.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),h,n,s);return e&&q?H.createElement(va.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},q):q}function Xv(){let i=oE(),e=$v(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:u},"ErrorBoundary")," or"," ",H.createElement("code",{style:u},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:a},n):null,h)}var Jv=H.createElement(Xv,null),Zv=class extends H.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?H.createElement(Zn.Provider,{value:this.props.routeContext},H.createElement(Jh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eE({routeContext:i,match:e,children:n}){let s=H.useContext(Js);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Zn.Provider,{value:i},n)}function tE(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let a=i,u=n==null?void 0:n.errors;if(u!=null){let g=a.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);Je(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,p=-1;if(n)for(let g=0;g<a.length;g++){let _=a[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=g),_.route.id){let{loaderData:E,errors:T}=n,I=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!T||T[_.route.id]===void 0);if(_.route.lazy||I){h=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((g,_,E)=>{let T,I=!1,D=null,M=null;n&&(T=u&&_.route.id?u[_.route.id]:void 0,D=_.route.errorElement||Jv,h&&(p<0&&E===0?(vg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):p===E&&(I=!0,M=_.route.hydrateFallbackElement||null)));let $=e.concat(a.slice(0,E+1)),O=()=>{let q;return T?q=D:I?q=M:_.route.Component?q=H.createElement(_.route.Component,null):_.route.element?q=_.route.element:q=g,H.createElement(eE,{match:_,routeContext:{outlet:g,matches:$,isDataRoute:n!=null},children:q})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?H.createElement(Zv,{location:n.location,revalidation:n.revalidation,component:D,error:T,children:O(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):O()},null)}function ef(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(i){let e=H.useContext(Js);return Je(e,ef(i)),e}function rE(i){let e=H.useContext(yu);return Je(e,ef(i)),e}function iE(i){let e=H.useContext(Zn);return Je(e,ef(i)),e}function tf(i){let e=iE(i),n=e.matches[e.matches.length-1];return Je(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function sE(){return tf("useRouteId")}function oE(){var s;let i=H.useContext(Jh),e=rE("useRouteError"),n=tf("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function aE(){let{router:i}=nE("useNavigate"),e=tf("useNavigate"),n=H.useRef(!1);return yg(()=>{n.current=!0}),H.useCallback(async(a,u={})=>{Gn(n.current,gg),n.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var om={};function vg(i,e,n){!e&&!om[i]&&(om[i]=!0,Gn(!1,n))}H.memo(lE);function lE({routes:i,future:e,state:n}){return _g(i,void 0,n,e)}function Ah(i){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uE({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:u=!1}){Je(!Ea(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=H.useMemo(()=>({basename:h,navigator:a,static:u,future:{}}),[h,a,u]);typeof n=="string"&&(n=Xs(n));let{pathname:g="/",search:_="",hash:E="",state:T=null,key:I="default"}=n,D=H.useMemo(()=>{let M=ei(g,h);return M==null?null:{location:{pathname:M,search:_,hash:E,state:T,key:I},navigationType:s}},[h,g,_,E,T,I,s]);return Gn(D!=null,`<Router basename="${h}"> is not able to match the URL "${g}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:H.createElement(Jn.Provider,{value:p},H.createElement(va.Provider,{children:e,value:D}))}function cE({children:i,location:e}){return Yv(Ch(i),e)}function Ch(i,e=[]){let n=[];return H.Children.forEach(i,(s,a)=>{if(!H.isValidElement(s))return;let u=[...e,a];if(s.type===H.Fragment){n.push.apply(n,Ch(s.props.children,u));return}Je(s.type===Ah,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Ch(s.props.children,u)),n.push(h)}),n}var Yl="get",Xl="application/x-www-form-urlencoded";function _u(i){return i!=null&&typeof i.tagName=="string"}function hE(i){return _u(i)&&i.tagName.toLowerCase()==="button"}function fE(i){return _u(i)&&i.tagName.toLowerCase()==="form"}function dE(i){return _u(i)&&i.tagName.toLowerCase()==="input"}function pE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function mE(i,e){return i.button===0&&(!e||e==="_self")&&!pE(i)}var ql=null;function gE(){if(ql===null)try{new FormData(document.createElement("form"),0),ql=!1}catch{ql=!0}return ql}var yE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ph(i){return i!=null&&!yE.has(i)?(Gn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xl}"`),null):i}function _E(i,e){let n,s,a,u,h;if(fE(i)){let p=i.getAttribute("action");s=p?ei(p,e):null,n=i.getAttribute("method")||Yl,a=ph(i.getAttribute("enctype"))||Xl,u=new FormData(i)}else if(hE(i)||dE(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(s=g?ei(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||Yl,a=ph(i.getAttribute("formenctype"))||ph(p.getAttribute("enctype"))||Xl,u=new FormData(p,i),!gE()){let{name:_,type:E,value:T}=i;if(E==="image"){let I=_?`${_}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else _&&u.append(_,T)}}else{if(_u(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yl,s=null,a=Xl,h=i}return u&&a==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:u,body:h}}function nf(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function vE(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function wE(i,e,n){let s=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let h=await vE(u,n);return h.links?h.links():[]}return[]}));return RE(s.flat(1).filter(EE).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function am(i,e,n,s,a,u){let h=(g,_)=>n[_]?g.route.id!==n[_].route.id:!0,p=(g,_)=>{var E;return n[_].pathname!==g.pathname||((E=n[_].route.path)==null?void 0:E.endsWith("*"))&&n[_].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,_)=>h(g,_)||p(g,_)):u==="data"?e.filter((g,_)=>{var T;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,_)||p(g,_))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=n[0])==null?void 0:T.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function TE(i,e){return IE(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function IE(i){return[...new Set(i)]}function SE(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function RE(i,e){let n=new Set;return new Set(e),i.reduce((s,a)=>{let u=JSON.stringify(SE(a));return n.has(u)||(n.add(u),s.push({key:u,link:a})),s},[])}function AE(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function CE(){let i=H.useContext(Js);return nf(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function PE(){let i=H.useContext(yu);return nf(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var rf=H.createContext(void 0);rf.displayName="FrameworkContext";function Eg(){let i=H.useContext(rf);return nf(i,"You must render this element inside a <HydratedRouter> element"),i}function kE(i,e){let n=H.useContext(rf),[s,a]=H.useState(!1),[u,h]=H.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:_,onMouseLeave:E,onTouchStart:T}=e,I=H.useRef(null);H.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let $=q=>{q.forEach(Z=>{h(Z.isIntersecting)})},O=new IntersectionObserver($,{threshold:.5});return I.current&&O.observe(I.current),()=>{O.disconnect()}}},[i]),H.useEffect(()=>{if(s){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[s]);let D=()=>{a(!0)},M=()=>{a(!1),h(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:ta(p,D),onBlur:ta(g,M),onMouseEnter:ta(_,D),onMouseLeave:ta(E,M),onTouchStart:ta(T,D)}]:[!1,I,{}]}function ta(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function xE({page:i,...e}){let{router:n}=CE(),s=H.useMemo(()=>ug(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?H.createElement(DE,{page:i,matches:s,...e}):null}function VE(i){let{manifest:e,routeModules:n}=Eg(),[s,a]=H.useState([]);return H.useEffect(()=>{let u=!1;return wE(i,e,n).then(h=>{u||a(h)}),()=>{u=!0}},[i,e,n]),s}function DE({page:i,matches:e,...n}){let s=zi(),{manifest:a,routeModules:u}=Eg(),{loaderData:h,matches:p}=PE(),g=H.useMemo(()=>am(i,e,p,a,s,"data"),[i,e,p,a,s]),_=H.useMemo(()=>am(i,e,p,a,s,"assets"),[i,e,p,a,s]),E=H.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let D=new Set,M=!1;if(e.forEach(O=>{var Z;let q=a.routes[O.route.id];!q||!q.hasLoader||(!g.some(J=>J.route.id===O.route.id)&&O.route.id in h&&((Z=u[O.route.id])!=null&&Z.shouldRevalidate)||q.hasClientLoader?M=!0:D.add(O.route.id))}),D.size===0)return[];let $=AE(i);return M&&D.size>0&&$.searchParams.set("_routes",e.filter(O=>D.has(O.route.id)).map(O=>O.route.id).join(",")),[$.pathname+$.search]},[h,s,a,g,e,i,u]),T=H.useMemo(()=>TE(_,a),[_,a]),I=VE(_);return H.createElement(H.Fragment,null,E.map(D=>H.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),T.map(D=>H.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),I.map(({key:D,link:M})=>H.createElement("link",{key:D,...M})))}function NE(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var wg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wg&&(window.__reactRouterVersion="7.1.5")}catch{}function LE({basename:i,children:e,window:n}){let s=H.useRef();s.current==null&&(s.current=wv({window:n,v5Compat:!0}));let a=s.current,[u,h]=H.useState({action:a.action,location:a.location}),p=H.useCallback(g=>{H.startTransition(()=>h(g))},[h]);return H.useLayoutEffect(()=>a.listen(p),[a,p]),H.createElement(uE,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var Tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ig=H.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:u,replace:h,state:p,target:g,to:_,preventScrollReset:E,viewTransition:T,...I},D){let{basename:M}=H.useContext(Jn),$=typeof _=="string"&&Tg.test(_),O,q=!1;if(typeof _=="string"&&$&&(O=_,wg))try{let A=new URL(window.location.href),k=_.startsWith("//")?new URL(A.protocol+_):new URL(_),N=ei(k.pathname,M);k.origin===A.origin&&N!=null?_=N+k.search+k.hash:q=!0}catch{Gn(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=Qv(_,{relative:a}),[J,fe,Re]=kE(s,I),we=UE(_,{replace:h,state:p,target:g,preventScrollReset:E,relative:a,viewTransition:T});function x(A){e&&e(A),A.defaultPrevented||we(A)}let S=H.createElement("a",{...I,...Re,href:O||Z,onClick:q||u?e:x,ref:NE(D,fe),target:g,"data-discover":!$&&n==="render"?"true":void 0});return J&&!$?H.createElement(H.Fragment,null,S,H.createElement(xE,{page:Z})):S});Ig.displayName="Link";var ME=H.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:u,to:h,viewTransition:p,children:g,..._},E){let T=wa(h,{relative:_.relative}),I=zi(),D=H.useContext(yu),{navigator:M,basename:$}=H.useContext(Jn),O=D!=null&&$E(T)&&p===!0,q=M.encodeLocation?M.encodeLocation(T).pathname:T.pathname,Z=I.pathname,J=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),J=J?J.toLowerCase():null,q=q.toLowerCase()),J&&$&&(J=ei(J,$)||J);const fe=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let Re=Z===q||!a&&Z.startsWith(q)&&Z.charAt(fe)==="/",we=J!=null&&(J===q||!a&&J.startsWith(q)&&J.charAt(q.length)==="/"),x={isActive:Re,isPending:we,isTransitioning:O},S=Re?e:void 0,A;typeof s=="function"?A=s(x):A=[s,Re?"active":null,we?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(x):u;return H.createElement(Ig,{..._,"aria-current":S,className:A,ref:E,style:k,to:h,viewTransition:p},typeof g=="function"?g(x):g)});ME.displayName="NavLink";var OE=H.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:u,method:h=Yl,action:p,onSubmit:g,relative:_,preventScrollReset:E,viewTransition:T,...I},D)=>{let M=BE(),$=jE(p,{relative:_}),O=h.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&Tg.test(p),Z=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let fe=J.nativeEvent.submitter,Re=(fe==null?void 0:fe.getAttribute("formmethod"))||h;M(fe||J.currentTarget,{fetcherKey:e,method:Re,navigate:n,replace:a,state:u,relative:_,preventScrollReset:E,viewTransition:T})};return H.createElement("form",{ref:D,method:O,action:$,onSubmit:s?g:Z,...I,"data-discover":!q&&i==="render"?"true":void 0})});OE.displayName="Form";function FE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sg(i){let e=H.useContext(Js);return Je(e,FE(i)),e}function UE(i,{target:e,replace:n,state:s,preventScrollReset:a,relative:u,viewTransition:h}={}){let p=Zh(),g=zi(),_=wa(i,{relative:u});return H.useCallback(E=>{if(mE(E,e)){E.preventDefault();let T=n!==void 0?n:ca(g)===ca(_);p(i,{replace:T,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[g,p,_,n,s,e,i,a,u,h])}var bE=0,zE=()=>`__${String(++bE)}__`;function BE(){let{router:i}=Sg("useSubmit"),{basename:e}=H.useContext(Jn),n=sE();return H.useCallback(async(s,a={})=>{let{action:u,method:h,encType:p,formData:g,body:_}=_E(s,e);if(a.navigate===!1){let E=a.fetcherKey||zE();await i.fetch(E,n,a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:_,formMethod:a.method||h,formEncType:a.encType||p,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:_,formMethod:a.method||h,formEncType:a.encType||p,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,n])}function jE(i,{relative:e}={}){let{basename:n}=H.useContext(Jn),s=H.useContext(Zn);Je(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),u={...wa(i||".",{relative:e})},h=zi();if(i==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(E=>E==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let E=p.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:_r([n,u.pathname])),ca(u)}function $E(i,e={}){let n=H.useContext(mg);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Sg("useViewTransitionState"),a=wa(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=ei(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=ei(n.nextLocation.pathname,s)||n.nextLocation.pathname;return iu(a.pathname,h)!=null||iu(a.pathname,u)!=null}new TextEncoder;var lm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},qE=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[n++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[n++],h=i[n++],p=i[n++],g=((a&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Ag={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const u=i[a],h=a+1<i.length,p=h?i[a+1]:0,g=a+2<i.length,_=g?i[a+2]:0,E=u>>2,T=(u&3)<<4|p>>4;let I=(p&15)<<2|_>>6,D=_&63;g||(D=64,h||(I=64)),s.push(n[E],n[T],n[I],n[D])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Rg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):qE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const u=n[i.charAt(a++)],p=a<i.length?n[i.charAt(a)]:0;++a;const _=a<i.length?n[i.charAt(a)]:64;++a;const T=a<i.length?n[i.charAt(a)]:64;if(++a,u==null||p==null||_==null||T==null)throw new HE;const I=u<<2|p>>4;if(s.push(I),_!==64){const D=p<<4&240|_>>2;if(s.push(D),T!==64){const M=_<<6&192|T;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class HE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WE=function(i){const e=Rg(i);return Ag.encodeByteArray(e,!0)},su=function(i){return WE(i).replace(/\./g,"")},QE=function(i){try{return Ag.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=()=>KE().__FIREBASE_DEFAULTS__,YE=()=>{if(typeof process>"u"||typeof lm>"u")return;const i=lm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},XE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&QE(i[1]);return e&&JSON.parse(e)},sf=()=>{try{return GE()||YE()||XE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JE=i=>{var e,n;return(n=(e=sf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},ZE=i=>{const e=JE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Cg=()=>{var i;return(i=sf())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[su(JSON.stringify(n)),su(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rw(){var i;const e=(i=sf())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iw(){return!rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sw(){try{return typeof indexedDB=="object"}catch{return!1}}function ow(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="FirebaseError";class Zs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aw,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pg.prototype.create)}}class Pg{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],h=u?lw(u,s):"Error",p=`${this.serviceName}: ${h} (${a}).`;return new Zs(a,p,s)}}function lw(i,e){return i.replace(uw,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const uw=/\{\$([^}]+)}/g;function Ph(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const u=i[a],h=e[a];if(um(u)&&um(h)){if(!Ph(u,h))return!1}else if(u!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function um(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(i){return i&&i._delegate?i._delegate:i}class ha{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ew;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fw(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const h=this.instances.get(a);return h&&e(h,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hw(i){return i===Oi?void 0:i}function fw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const pw={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},mw=De.INFO,gw={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},yw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=gw[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=mw,this._logHandler=yw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const _w=(i,e)=>e.some(n=>i instanceof n);let cm,hm;function vw(){return cm||(cm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ew(){return hm||(hm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xg=new WeakMap,kh=new WeakMap,Vg=new WeakMap,mh=new WeakMap,of=new WeakMap;function ww(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Gr(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&xg.set(n,i)}).catch(()=>{}),of.set(e,i),e}function Tw(i){if(kh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});kh.set(i,e)}let xh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return kh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Vg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Iw(i){xh=i(xh)}function Sw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(gh(this),e,...n);return Vg.set(s,e.sort?e.sort():[e]),Gr(s)}:Ew().includes(i)?function(...e){return i.apply(gh(this),e),Gr(xg.get(this))}:function(...e){return Gr(i.apply(gh(this),e))}}function Rw(i){return typeof i=="function"?Sw(i):(i instanceof IDBTransaction&&Tw(i),_w(i,vw())?new Proxy(i,xh):i)}function Gr(i){if(i instanceof IDBRequest)return ww(i);if(mh.has(i))return mh.get(i);const e=Rw(i);return e!==i&&(mh.set(i,e),of.set(e,i)),e}const gh=i=>of.get(i);function Aw(i,e,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const h=indexedDB.open(i,e),p=Gr(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Gr(h.result),g.oldVersion,g.newVersion,Gr(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const Cw=["get","getKey","getAll","getAllKeys","count"],Pw=["put","add","delete","clear"],yh=new Map;function fm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(yh.get(e))return yh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Pw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Cw.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,a?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),a&&g.done]))[0]};return yh.set(e,u),u}Iw(i=>({...i,get:(e,n,s)=>fm(e,n)||i.get(e,n,s),has:(e,n)=>!!fm(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function xw(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",dm="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new kg("@firebase/app"),Vw="@firebase/app-compat",Dw="@firebase/analytics-compat",Nw="@firebase/analytics",Lw="@firebase/app-check-compat",Mw="@firebase/app-check",Ow="@firebase/auth",Fw="@firebase/auth-compat",Uw="@firebase/database",bw="@firebase/data-connect",zw="@firebase/database-compat",Bw="@firebase/functions",jw="@firebase/functions-compat",$w="@firebase/installations",qw="@firebase/installations-compat",Hw="@firebase/messaging",Ww="@firebase/messaging-compat",Qw="@firebase/performance",Kw="@firebase/performance-compat",Gw="@firebase/remote-config",Yw="@firebase/remote-config-compat",Xw="@firebase/storage",Jw="@firebase/storage-compat",Zw="@firebase/firestore",eT="@firebase/vertexai",tT="@firebase/firestore-compat",nT="firebase",rT="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="[DEFAULT]",iT={[Vh]:"fire-core",[Vw]:"fire-core-compat",[Nw]:"fire-analytics",[Dw]:"fire-analytics-compat",[Mw]:"fire-app-check",[Lw]:"fire-app-check-compat",[Ow]:"fire-auth",[Fw]:"fire-auth-compat",[Uw]:"fire-rtdb",[bw]:"fire-data-connect",[zw]:"fire-rtdb-compat",[Bw]:"fire-fn",[jw]:"fire-fn-compat",[$w]:"fire-iid",[qw]:"fire-iid-compat",[Hw]:"fire-fcm",[Ww]:"fire-fcm-compat",[Qw]:"fire-perf",[Kw]:"fire-perf-compat",[Gw]:"fire-rc",[Yw]:"fire-rc-compat",[Xw]:"fire-gcs",[Jw]:"fire-gcs-compat",[Zw]:"fire-fst",[tT]:"fire-fst-compat",[eT]:"fire-vertex","fire-js":"fire-js",[nT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new Map,sT=new Map,Nh=new Map;function pm(i,e){try{i.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function au(i){const e=i.name;if(Nh.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Nh.set(e,i);for(const n of ou.values())pm(n,i);for(const n of sT.values())pm(n,i);return!0}function oT(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Pg("app","Firebase",aT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=rT;function Dg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Dh,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(n||(n=Cg()),!n)throw Yr.create("no-options");const u=ou.get(a);if(u){if(Ph(n,u.options)&&Ph(s,u.config))return u;throw Yr.create("duplicate-app",{appName:a})}const h=new dw(a);for(const g of Nh.values())h.addComponent(g);const p=new lT(n,s,h);return ou.set(a,p),p}function cT(i=Dh){const e=ou.get(i);if(!e&&i===Dh&&Cg())return Dg();if(!e)throw Yr.create("no-app",{appName:i});return e}function zs(i,e,n){var s;let a=(s=iT[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const p=[`Unable to register library "${a}" with version "${e}":`];u&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(p.join(" "));return}au(new ha(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebase-heartbeat-database",fT=1,fa="firebase-heartbeat-store";let _h=null;function Ng(){return _h||(_h=Aw(hT,fT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fa)}catch(n){console.warn(n)}}}}).catch(i=>{throw Yr.create("idb-open",{originalErrorMessage:i.message})})),_h}async function dT(i){try{const n=(await Ng()).transaction(fa),s=await n.objectStore(fa).get(Lg(i));return await n.done,s}catch(e){if(e instanceof Zs)Er.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function mm(i,e){try{const s=(await Ng()).transaction(fa,"readwrite");await s.objectStore(fa).put(e,Lg(i)),await s.done}catch(n){if(n instanceof Zs)Er.warn(n.message);else{const s=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(s.message)}}}function Lg(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=1024,mT=30*24*60*60*1e3;class gT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _T(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=gm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=mT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Er.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gm(),{heartbeatsToSend:s,unsentEntries:a}=yT(this._heartbeatsCache.heartbeats),u=su(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Er.warn(n),""}}}function gm(){return new Date().toISOString().substring(0,10)}function yT(i,e=pT){const n=[];let s=i.slice();for(const a of i){const u=n.find(h=>h.agent===a.agent);if(u){if(u.dates.push(a.date),ym(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),ym(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _T{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sw()?ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return mm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return mm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ym(i){return su(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(i){au(new ha("platform-logger",e=>new kw(e),"PRIVATE")),au(new ha("heartbeat",e=>new gT(e),"PRIVATE")),zs(Vh,dm,i),zs(Vh,dm,"esm2017"),zs("fire-js","")}vT("");var ET="firebase",wT="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(ET,wT,"app");var _m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,Mg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function A(){}A.prototype=S.prototype,x.D=S.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(k,N,F){for(var C=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)C[tt-2]=arguments[tt];return S.prototype[N].apply(k,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,A){A||(A=0);var k=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)k[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=x.g[0],A=x.g[1],N=x.g[2];var F=x.g[3],C=S+(F^A&(N^F))+k[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=F+(N^S&(A^N))+k[1]+3905402710&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(A^F&(S^A))+k[2]+606105819&4294967295,N=F+(C<<17&4294967295|C>>>15),C=A+(S^N&(F^S))+k[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(F^A&(N^F))+k[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=F+(N^S&(A^N))+k[5]+1200080426&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(A^F&(S^A))+k[6]+2821735955&4294967295,N=F+(C<<17&4294967295|C>>>15),C=A+(S^N&(F^S))+k[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(F^A&(N^F))+k[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=F+(N^S&(A^N))+k[9]+2336552879&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(A^F&(S^A))+k[10]+4294925233&4294967295,N=F+(C<<17&4294967295|C>>>15),C=A+(S^N&(F^S))+k[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(F^A&(N^F))+k[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=F+(N^S&(A^N))+k[13]+4254626195&4294967295,F=S+(C<<12&4294967295|C>>>20),C=N+(A^F&(S^A))+k[14]+2792965006&4294967295,N=F+(C<<17&4294967295|C>>>15),C=A+(S^N&(F^S))+k[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(N^F&(A^N))+k[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=F+(A^N&(S^A))+k[6]+3225465664&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(F^S))+k[11]+643717713&4294967295,N=F+(C<<14&4294967295|C>>>18),C=A+(F^S&(N^F))+k[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(A^N))+k[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=F+(A^N&(S^A))+k[10]+38016083&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(F^S))+k[15]+3634488961&4294967295,N=F+(C<<14&4294967295|C>>>18),C=A+(F^S&(N^F))+k[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(A^N))+k[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=F+(A^N&(S^A))+k[14]+3275163606&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(F^S))+k[3]+4107603335&4294967295,N=F+(C<<14&4294967295|C>>>18),C=A+(F^S&(N^F))+k[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^F&(A^N))+k[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=F+(A^N&(S^A))+k[2]+4243563512&4294967295,F=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(F^S))+k[7]+1735328473&4294967295,N=F+(C<<14&4294967295|C>>>18),C=A+(F^S&(N^F))+k[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(A^N^F)+k[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=F+(S^A^N)+k[8]+2272392833&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^A)+k[11]+1839030562&4294967295,N=F+(C<<16&4294967295|C>>>16),C=A+(N^F^S)+k[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^F)+k[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=F+(S^A^N)+k[4]+1272893353&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^A)+k[7]+4139469664&4294967295,N=F+(C<<16&4294967295|C>>>16),C=A+(N^F^S)+k[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^F)+k[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=F+(S^A^N)+k[0]+3936430074&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^A)+k[3]+3572445317&4294967295,N=F+(C<<16&4294967295|C>>>16),C=A+(N^F^S)+k[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^F)+k[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=F+(S^A^N)+k[12]+3873151461&4294967295,F=S+(C<<11&4294967295|C>>>21),C=N+(F^S^A)+k[15]+530742520&4294967295,N=F+(C<<16&4294967295|C>>>16),C=A+(N^F^S)+k[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(N^(A|~F))+k[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=F+(A^(S|~N))+k[7]+1126891415&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~A))+k[14]+2878612391&4294967295,N=F+(C<<15&4294967295|C>>>17),C=A+(F^(N|~S))+k[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~F))+k[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=F+(A^(S|~N))+k[3]+2399980690&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~A))+k[10]+4293915773&4294967295,N=F+(C<<15&4294967295|C>>>17),C=A+(F^(N|~S))+k[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~F))+k[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=F+(A^(S|~N))+k[15]+4264355552&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~A))+k[6]+2734768916&4294967295,N=F+(C<<15&4294967295|C>>>17),C=A+(F^(N|~S))+k[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~F))+k[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=F+(A^(S|~N))+k[11]+3174756917&4294967295,F=S+(C<<10&4294967295|C>>>22),C=N+(S^(F|~A))+k[2]+718787259&4294967295,N=F+(C<<15&4294967295|C>>>17),C=A+(F^(N|~S))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+F&4294967295}s.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var A=S-this.blockSize,k=this.B,N=this.h,F=0;F<S;){if(N==0)for(;F<=A;)a(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<S;)if(k[N++]=x.charCodeAt(F++),N==this.blockSize){a(this,k),N=0;break}}else for(;F<S;)if(k[N++]=x[F++],N==this.blockSize){a(this,k),N=0;break}}this.h=N,this.o+=S},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var A=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=A&255,A/=256;for(this.u(x),x=Array(16),S=A=0;4>S;++S)for(var k=0;32>k;k+=8)x[A++]=this.g[S]>>>k&255;return x};function u(x,S){var A=p;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=S(x)}function h(x,S){this.h=S;for(var A=[],k=!0,N=x.length-1;0<=N;N--){var F=x[N]|0;k&&F==S||(A[N]=F,k=!1)}this.g=A}var p={};function g(x){return-128<=x&&128>x?u(x,function(S){return new h([S|0],0>S?-1:0)}):new h([x|0],0>x?-1:0)}function _(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return O(_(-x));for(var S=[],A=1,k=0;x>=A;k++)S[k]=x/A|0,A*=4294967296;return new h(S,0)}function E(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return O(E(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=_(Math.pow(S,8)),k=T,N=0;N<x.length;N+=8){var F=Math.min(8,x.length-N),C=parseInt(x.substring(N,N+F),S);8>F?(F=_(Math.pow(S,F)),k=k.j(F).add(_(C))):(k=k.j(A),k=k.add(_(C)))}return k}var T=g(0),I=g(1),D=g(16777216);i=h.prototype,i.m=function(){if($(this))return-O(this).m();for(var x=0,S=1,A=0;A<this.g.length;A++){var k=this.i(A);x+=(0<=k?k:4294967296+k)*S,S*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M(this))return"0";if($(this))return"-"+O(this).toString(x);for(var S=_(Math.pow(x,6)),A=this,k="";;){var N=fe(A,S).g;A=q(A,N.j(S));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=N,M(A))return F+k;for(;6>F.length;)F="0"+F;k=F+k}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function M(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function $(x){return x.h==-1}i.l=function(x){return x=q(this,x),$(x)?-1:M(x)?0:1};function O(x){for(var S=x.g.length,A=[],k=0;k<S;k++)A[k]=~x.g[k];return new h(A,~x.h).add(I)}i.abs=function(){return $(this)?O(this):this},i.add=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],k=0,N=0;N<=S;N++){var F=k+(this.i(N)&65535)+(x.i(N)&65535),C=(F>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);k=C>>>16,F&=65535,C&=65535,A[N]=C<<16|F}return new h(A,A[A.length-1]&-2147483648?-1:0)};function q(x,S){return x.add(O(S))}i.j=function(x){if(M(this)||M(x))return T;if($(this))return $(x)?O(this).j(O(x)):O(O(this).j(x));if($(x))return O(this.j(O(x)));if(0>this.l(D)&&0>x.l(D))return _(this.m()*x.m());for(var S=this.g.length+x.g.length,A=[],k=0;k<2*S;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<x.g.length;N++){var F=this.i(k)>>>16,C=this.i(k)&65535,tt=x.i(N)>>>16,kt=x.i(N)&65535;A[2*k+2*N]+=C*kt,Z(A,2*k+2*N),A[2*k+2*N+1]+=F*kt,Z(A,2*k+2*N+1),A[2*k+2*N+1]+=C*tt,Z(A,2*k+2*N+1),A[2*k+2*N+2]+=F*tt,Z(A,2*k+2*N+2)}for(k=0;k<S;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=S;k<2*S;k++)A[k]=0;return new h(A,0)};function Z(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function J(x,S){this.g=x,this.h=S}function fe(x,S){if(M(S))throw Error("division by zero");if(M(x))return new J(T,T);if($(x))return S=fe(O(x),S),new J(O(S.g),O(S.h));if($(S))return S=fe(x,O(S)),new J(O(S.g),S.h);if(30<x.g.length){if($(x)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var A=I,k=S;0>=k.l(x);)A=Re(A),k=Re(k);var N=we(A,1),F=we(k,1);for(k=we(k,2),A=we(A,2);!M(k);){var C=F.add(k);0>=C.l(x)&&(N=N.add(A),F=C),k=we(k,1),A=we(A,1)}return S=q(x,N.j(S)),new J(N,S)}for(N=T;0<=x.l(S);){for(A=Math.max(1,Math.floor(x.m()/S.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),F=_(A),C=F.j(S);$(C)||0<C.l(x);)A-=k,F=_(A),C=F.j(S);M(F)&&(F=I),N=N.add(F),x=q(x,C)}return new J(N,x)}i.A=function(x){return fe(this,x).h},i.and=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)&x.i(k);return new h(A,this.h&x.h)},i.or=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)|x.i(k);return new h(A,this.h|x.h)},i.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)^x.i(k);return new h(A,this.h^x.h)};function Re(x){for(var S=x.g.length+1,A=[],k=0;k<S;k++)A[k]=x.i(k)<<1|x.i(k-1)>>>31;return new h(A,x.h)}function we(x,S){var A=S>>5;S%=32;for(var k=x.g.length-A,N=[],F=0;F<k;F++)N[F]=0<S?x.i(F+A)>>>S|x.i(F+A+1)<<32-S:x.i(F+A);return new h(N,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Mg=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,Xr=h}).apply(typeof _m<"u"?_m:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Og,na,Fg,Jl,Lh,Ug,bg,zg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,y){return l==Array.prototype||l==Object.prototype||(l[d]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var d=0;d<l.length;++d){var y=l[d];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var y=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var U=l[w];if(!(U in y))break e;y=y[U]}l=l[l.length-1],w=y[l],d=d(w),d!=w&&d!=null&&e(y,l,{configurable:!0,writable:!0,value:d})}}function u(l,d){l instanceof String&&(l+="");var y=0,w=!1,U={next:function(){if(!w&&y<l.length){var j=y++;return{value:d(j,l[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(l){return l||function(){return u(this,function(d,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function _(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function E(l,d,y){return l.call.apply(l.bind,arguments)}function T(l,d,y){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),l.apply(d,U)}}return function(){return l.apply(d,arguments)}}function I(l,d,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,I.apply(null,arguments)}function D(l,d){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function M(l,d){function y(){}y.prototype=d.prototype,l.aa=d.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(w,U,j){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return d.prototype[U].apply(w,te)}}function $(l){const d=l.length;if(0<d){const y=Array(d);for(let w=0;w<d;w++)y[w]=l[w];return y}return[]}function O(l,d){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(g(w)){const U=l.length||0,j=w.length||0;l.length=U+j;for(let te=0;te<j;te++)l[U+te]=w[te]}else l.push(w)}}class q{constructor(d,y){this.i=d,this.j=y,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(l){return/^[\s\xa0]*$/.test(l)}function J(){var l=p.navigator;return l&&(l=l.userAgent)?l:""}function fe(l){return fe[" "](l),l}fe[" "]=function(){};var Re=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function we(l,d,y){for(const w in l)d.call(y,l[w],w,l)}function x(l,d){for(const y in l)d.call(void 0,l[y],y,l)}function S(l){const d={};for(const y in l)d[y]=l[y];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let y,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(y in w)l[y]=w[y];for(let j=0;j<A.length;j++)y=A[j],Object.prototype.hasOwnProperty.call(w,y)&&(l[y]=w[y])}}function N(l){var d=1;l=l.split(":");const y=[];for(;0<d&&l.length;)y.push(l.shift()),d--;return l.length&&y.push(l.join(":")),y}function F(l){p.setTimeout(()=>{throw l},0)}function C(){var l=pe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class tt{constructor(){this.h=this.g=null}add(d,y){const w=kt.get();w.set(d,y),this.h?this.h.next=w:this.g=w,this.h=w}}var kt=new q(()=>new xt,l=>l.reset());class xt{constructor(){this.next=this.g=this.h=null}set(d,y){this.h=d,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,ne=!1,pe=new tt,ie=()=>{const l=p.Promise.resolve(void 0);ze=()=>{l.then(L)}};var L=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(y){F(y)}var d=kt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}ne=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};p.addEventListener("test",y,d),p.removeEventListener("test",y,d)}catch{}return l}();function Ie(l,d){if(he.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Re){e:{try{fe(d.nodeName);var U=!0;break e}catch{}U=!1}U||(d=null)}}else y=="mouseover"?d=l.fromElement:y=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ie.aa.h.call(this)}}M(Ie,he);var ke={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function je(l,d,y,w,U){this.listener=l,this.proxy=null,this.src=d,this.type=y,this.capture=!!w,this.ha=U,this.key=++Fe,this.da=this.fa=!1}function gt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function er(l){this.src=l,this.g={},this.h=0}er.prototype.add=function(l,d,y,w,U){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var te=Ir(l,d,w,U);return-1<te?(d=l[te],y||(d.fa=!1)):(d=new je(d,this.src,j,!!w,U),d.fa=y,l.push(d)),d};function qi(l,d){var y=d.type;if(y in l.g){var w=l.g[y],U=Array.prototype.indexOf.call(w,d,void 0),j;(j=0<=U)&&Array.prototype.splice.call(w,U,1),j&&(gt(d),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ir(l,d,y,w){for(var U=0;U<l.length;++U){var j=l[U];if(!j.da&&j.listener==d&&j.capture==!!y&&j.ha==w)return U}return-1}var li="closure_lm_"+(1e6*Math.random()|0),Hi={};function io(l,d,y,w,U){if(Array.isArray(d)){for(var j=0;j<d.length;j++)io(l,d[j],y,w,U);return null}return y=ao(y),l&&l[Oe]?l.K(d,y,_(w)?!!w.capture:!1,U):so(l,d,y,!1,w,U)}function so(l,d,y,w,U,j){if(!d)throw Error("Invalid event type");var te=_(U)?!!U.capture:!!U,be=Qi(l);if(be||(l[li]=be=new er(l)),y=be.add(d,y,w,te,j),y.proxy)return y;if(w=Pa(),y.proxy=w,w.src=l,w.listener=y,l.addEventListener)Te||(U=te),U===void 0&&(U=!1),l.addEventListener(d.toString(),w,U);else if(l.attachEvent)l.attachEvent(nr(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Pa(){function l(y){return d.call(l.src,l.listener,y)}const d=oo;return l}function Wi(l,d,y,w,U){if(Array.isArray(d))for(var j=0;j<d.length;j++)Wi(l,d[j],y,w,U);else w=_(w)?!!w.capture:!!w,y=ao(y),l&&l[Oe]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],y=Ir(j,y,w,U),-1<y&&(gt(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=Qi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Ir(d,y,w,U)),(y=-1<l?d[l]:null)&&tr(y))}function tr(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Oe])qi(d.i,l);else{var y=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(y,w,l.capture):d.detachEvent?d.detachEvent(nr(y),w):d.addListener&&d.removeListener&&d.removeListener(w),(y=Qi(d))?(qi(y,l),y.h==0&&(y.src=null,d[li]=null)):gt(l)}}}function nr(l){return l in Hi?Hi[l]:Hi[l]="on"+l}function oo(l,d){if(l.da)l=!0;else{d=new Ie(d,this);var y=l.listener,w=l.ha||l.src;l.fa&&tr(l),l=y.call(w,d)}return l}function Qi(l){return l=l[li],l instanceof er?l:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function ao(l){return typeof l=="function"?l:(l[Ki]||(l[Ki]=function(d){return l.handleEvent(d)}),l[Ki])}function ut(){Q.call(this),this.i=new er(this),this.M=this,this.F=null}M(ut,Q),ut.prototype[Oe]=!0,ut.prototype.removeEventListener=function(l,d,y,w){Wi(this,l,d,y,w)};function ct(l,d){var y,w=l.F;if(w)for(y=[];w;w=w.F)y.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new he(d,l);else if(d instanceof he)d.target=d.target||l;else{var U=d;d=new he(w,l),k(d,U)}if(U=!0,y)for(var j=y.length-1;0<=j;j--){var te=d.g=y[j];U=rr(te,w,!0,d)&&U}if(te=d.g=l,U=rr(te,w,!0,d)&&U,U=rr(te,w,!1,d)&&U,y)for(j=0;j<y.length;j++)te=d.g=y[j],U=rr(te,w,!1,d)&&U}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var y=l.g[d],w=0;w<y.length;w++)gt(y[w]);delete l.g[d],l.h--}}this.F=null},ut.prototype.K=function(l,d,y,w){return this.i.add(String(l),d,!1,y,w)},ut.prototype.L=function(l,d,y,w){return this.i.add(String(l),d,!0,y,w)};function rr(l,d,y,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var U=!0,j=0;j<d.length;++j){var te=d[j];if(te&&!te.da&&te.capture==y){var be=te.listener,ht=te.ha||te.src;te.fa&&qi(l.i,te),U=be.call(ht,w)!==!1&&U}}return U&&!w.defaultPrevented}function lo(l,d,y){if(typeof l=="function")y&&(l=I(l,y));else if(l&&typeof l.handleEvent=="function")l=I(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:p.setTimeout(l,d||0)}function Sr(l){l.g=lo(()=>{l.g=null,l.i&&(l.i=!1,Sr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ui extends Q{constructor(d,y){super(),this.m=d,this.l=y,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(l){Q.call(this),this.h=l,this.g={}}M(ci,Q);var uo=[];function co(l){we(l.g,function(d,y){this.g.hasOwnProperty(y)&&tr(d)},l),l.g={}}ci.prototype.N=function(){ci.aa.N.call(this),co(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ho=p.JSON.stringify,fo=p.JSON.parse,po=class{stringify(l){return p.JSON.stringify(l,void 0)}parse(l){return p.JSON.parse(l,void 0)}};function hi(){}hi.prototype.h=null;function Gi(l){return l.h||(l.h=l.i())}function Yi(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){he.call(this,"d")}M(Ln,he);function Xi(){he.call(this,"c")}M(Xi,he);var Mn={},mo=null;function fi(){return mo=mo||new ut}Mn.La="serverreachability";function go(l){he.call(this,Mn.La,l)}M(go,he);function ir(l){const d=fi();ct(d,new go(d))}Mn.STAT_EVENT="statevent";function yo(l,d){he.call(this,Mn.STAT_EVENT,l),this.stat=d}M(yo,he);function nt(l){const d=fi();ct(d,new yo(d,l))}Mn.Ma="timingevent";function Ji(l,d){he.call(this,Mn.Ma,l),this.size=d}M(Ji,he);function _n(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){l()},d)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function pi(l,d,y,w,U,j){l.info(function(){if(l.g)if(j)for(var te="",be=j.split("&"),ht=0;ht<be.length;ht++){var xe=be[ht].split("=");if(1<xe.length){var yt=xe[0];xe=xe[1];var st=yt.split("_");te=2<=st.length&&st[1]=="type"?te+(yt+"="+xe+"&"):te+(yt+"=redacted&")}}else te=null;else te=j;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+d+`
`+y+`
`+te})}function Zi(l,d,y,w,U,j,te){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+d+`
`+y+`
`+j+" "+te})}function vn(l,d,y,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ou(l,y)+(w?" "+w:"")})}function _o(l,d){l.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function Ou(l,d){if(!l.g)return d;if(!d)return null;try{var y=JSON.parse(d);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var w=y[l];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var j=U[0];if(j!="noop"&&j!="stop"&&j!="close")for(var te=1;te<U.length;te++)U[te]=""}}}}return ho(y)}catch{return d}}var es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ka={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function mi(){}M(mi,hi),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},En=new mi;function wn(l,d,y,w){this.j=l,this.i=d,this.l=y,this.R=w||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xa}function xa(){this.i=null,this.g="",this.h=!1}var vo={},ts={};function ns(l,d,y){l.L=1,l.v=kr(en(d)),l.m=y,l.P=!0,Eo(l,null)}function Eo(l,d){l.F=Date.now(),$e(l),l.A=en(l.v);var y=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Vr(y.i,"t",w),l.C=0,y=l.j.J,l.h=new xa,l.g=Ka(l.j,y?d:null,!l.m),0<l.O&&(l.M=new ui(I(l.Y,l,l.g),l.O)),d=l.U,y=l.g,w=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(uo[0]=U.toString()),U=uo);for(var j=0;j<U.length;j++){var te=io(y,U[j],w||d.handleEvent,!1,d.h||d);if(!te)break;d.g[te.key]=te}d=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ir(),pi(l.i,l.u,l.A,l.l,l.R,l.m)}wn.prototype.ca=function(l){l=l.target;const d=this.M;d&&$t(l)==3?d.j():this.Y(l)},wn.prototype.Y=function(l){try{if(l==this.g)e:{const st=$t(this.g);var d=this.g.Ba();const hn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Ao(this.g)))){this.J||st!=4||d==7||(d==8||0>=hn?ir(3):ir(2)),gi(this);var y=this.g.Z();this.X=y;t:if(Va(this)){var w=Ao(this.g);l="";var U=w.length,j=$t(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Rr(this);var te="";break t}this.h.i=new p.TextDecoder}for(d=0;d<U;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(j&&d==U-1)});w.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,Zi(this.i,this.u,this.A,this.l,this.R,st,y),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ht=this.g;if((be=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(be)){var xe=be;break t}}xe=null}if(y=xe)vn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wo(this,y);else{this.o=!1,this.s=3,nt(12),un(this),Rr(this);break e}}if(this.P){y=!0;let nn;for(;!this.J&&this.C<te.length;)if(nn=Fu(this,te),nn==ts){st==4&&(this.s=4,nt(14),y=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==vo){this.s=4,nt(15),vn(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else vn(this.i,this.l,nn,null),wo(this,nn);if(Va(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||te.length!=0||this.h.h||(this.s=1,nt(16),y=!1),this.o=this.o&&y,!y)vn(this.i,this.l,te,"[Invalid Chunked Response]"),un(this),Rr(this);else if(0<te.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Po(yt),yt.M=!0,nt(11))}}else vn(this.i,this.l,te,null),wo(this,te);st==4&&un(this),this.o&&!this.J&&(st==4?ds(this.j,this):(this.o=!1,$e(this)))}else ls(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),un(this),Rr(this)}}}catch{}finally{}};function Va(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Fu(l,d){var y=l.C,w=d.indexOf(`
`,y);return w==-1?ts:(y=Number(d.substring(y,w)),isNaN(y)?vo:(w+=1,w+y>d.length?ts:(d=d.slice(w,w+y),l.C=w+y,d)))}wn.prototype.cancel=function(){this.J=!0,un(this)};function $e(l){l.S=Date.now()+l.I,Da(l,l.I)}function Da(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_n(I(l.ba,l),d)}function gi(l){l.B&&(p.clearTimeout(l.B),l.B=null)}wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(_o(this.i,this.A),this.L!=2&&(ir(),nt(17)),un(this),this.s=2,Rr(this)):Da(this,this.S-l)};function Rr(l){l.j.G==0||l.J||ds(l.j,l)}function un(l){gi(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,co(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function wo(l,d){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var w=y.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)fs(y),An(y);else break e;hs(y),nt(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=_n(I(y.Za,y),6e3));if(1>=La(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ur(y,11)}else if((l.K||y.g==l)&&fs(y),!Z(d))for(U=y.Da.g.parse(d),d=0;d<U.length;d++){let xe=U[d];if(y.T=xe[0],xe=xe[1],y.G==2)if(xe[0]=="c"){y.K=xe[1],y.ia=xe[2];const yt=xe[3];yt!=null&&(y.la=yt,y.j.info("VER="+y.la));const st=xe[4];st!=null&&(y.Aa=st,y.j.info("SVER="+y.Aa));const hn=xe[5];hn!=null&&typeof hn=="number"&&0<hn&&(w=1.5*hn,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const nn=l.g;if(nn){const Ii=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var j=w.h;j.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(To(j,j.h),j.h=null))}if(w.D){const ms=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ms&&(w.ya=ms,Be(w.I,w.D,ms))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var te=l;if(w.qa=Qa(w,w.J?w.ia:null,w.W),te.K){Ma(w.h,te);var be=te,ht=w.L;ht&&(be.I=ht),be.B&&(gi(be),$e(be)),w.g=te}else Ti(w);0<y.i.length&&bn(y)}else xe[0]!="stop"&&xe[0]!="close"||ur(y,7);else y.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ur(y,7):It(y):xe[0]!="noop"&&y.l&&y.l.ta(xe),y.v=0)}}ir(4)}catch{}}var Na=class{constructor(l,d){this.g=l,this.map=d}};function yi(l){this.l=l||10,p.PerformanceNavigationTiming?(l=p.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function La(l){return l.h?1:l.g?l.g.size:0}function Ut(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function To(l,d){l.g?l.g.add(d):l.h=d}function Ma(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}yi.prototype.cancel=function(){if(this.i=Oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Oa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const y of l.g.values())d=d.concat(y.D);return d}return $(l.i)}function rs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var d=[],y=l.length,w=0;w<y;w++)d.push(l[w]);return d}d=[],y=0;for(w in l)d[y++]=l[w];return d}function is(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var d=[];l=l.length;for(var y=0;y<l;y++)d.push(y);return d}d=[],y=0;for(const w in l)d[y++]=w;return d}}}function Ar(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var y=is(l),w=rs(l),U=w.length,j=0;j<U;j++)d.call(void 0,w[j],y&&y[j],l)}var _i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uu(l,d){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var w=l[y].indexOf("="),U=null;if(0<=w){var j=l[y].substring(0,w);U=l[y].substring(w+1)}else j=l[y];d(j,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function sr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof sr){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var d=l.i,y=new On;y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),Pr(this,y),this.m=l.m}else l&&(d=String(l).match(_i))?(this.h=!1,vi(this,d[1]||"",!0),this.o=Ce(d[2]||""),this.g=Ce(d[3]||"",!0),Cr(this,d[4]),this.l=Ce(d[5]||"",!0),Pr(this,d[6]||"",!0),this.m=Ce(d[7]||"")):(this.h=!1,this.i=new On(null,this.h))}sr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(xr(d,ss,!0),":");var y=this.g;return(y||d=="file")&&(l.push("//"),(d=this.o)&&l.push(xr(d,ss,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(xr(y,y.charAt(0)=="/"?ba:Ua,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",xr(y,Io)),l.join("")};function en(l){return new sr(l)}function vi(l,d,y){l.j=y?Ce(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Pr(l,d,y){d instanceof On?(l.i=d,Fn(l.i,l.h)):(y||(d=xr(d,za)),l.i=new On(d,l.h))}function Be(l,d,y){l.i.set(d,y)}function kr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ce(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xr(l,d,y){return typeof l=="string"?(l=encodeURI(l).replace(d,Fa),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Fa(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ss=/[#\/\?@]/g,Ua=/[#\?:]/g,ba=/[#\?]/g,za=/[#\?@]/g,Io=/#/g;function On(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Tt(l){l.g||(l.g=new Map,l.h=0,l.i&&Uu(l.i,function(d,y){l.add(decodeURIComponent(d.replace(/\+/g," ")),y)}))}i=On.prototype,i.add=function(l,d){Tt(this),this.i=null,l=cn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(d),this.h+=1,this};function Tn(l,d){Tt(l),d=cn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function In(l,d){return Tt(l),d=cn(l,d),l.g.has(d)}i.forEach=function(l,d){Tt(this),this.g.forEach(function(y,w){y.forEach(function(U){l.call(d,U,w,this)},this)},this)},i.na=function(){Tt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),y=[];for(let w=0;w<d.length;w++){const U=l[w];for(let j=0;j<U.length;j++)y.push(d[w])}return y},i.V=function(l){Tt(this);let d=[];if(typeof l=="string")In(this,l)&&(d=d.concat(this.g.get(cn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)d=d.concat(l[y])}return d},i.set=function(l,d){return Tt(this),this.i=null,l=cn(this,l),In(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Vr(l,d,y){Tn(l,d),0<y.length&&(l.i=null,l.g.set(cn(l,d),$(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var y=0;y<d.length;y++){var w=d[y];const j=encodeURIComponent(String(w)),te=this.V(w);for(w=0;w<te.length;w++){var U=j;te[w]!==""&&(U+="="+encodeURIComponent(String(te[w]))),l.push(U)}}return this.i=l.join("&")};function cn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Fn(l,d){d&&!l.j&&(Tt(l),l.i=null,l.g.forEach(function(y,w){var U=w.toLowerCase();w!=U&&(Tn(this,w),Vr(this,U,y))},l)),l.j=d}function bu(l,d){const y=new di;if(p.Image){const w=new Image;w.onload=D(jt,y,"TestLoadImage: loaded",!0,d,w),w.onerror=D(jt,y,"TestLoadImage: error",!1,d,w),w.onabort=D(jt,y,"TestLoadImage: abort",!1,d,w),w.ontimeout=D(jt,y,"TestLoadImage: timeout",!1,d,w),p.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function Ba(l,d){const y=new di,w=new AbortController,U=setTimeout(()=>{w.abort(),jt(y,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(j=>{clearTimeout(U),j.ok?jt(y,"TestPingServer: ok",!0,d):jt(y,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(U),jt(y,"TestPingServer: error",!1,d)})}function jt(l,d,y,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(y)}catch{}}function zu(){this.g=new po}function ja(l,d,y){const w=y||"";try{Ar(l,function(U,j){let te=U;_(U)&&(te=ho(U)),d.push(w+j+"="+encodeURIComponent(te))})}catch(U){throw d.push(w+"type="+encodeURIComponent("_badmap")),U}}function or(l){this.l=l.Ub||null,this.j=l.eb||!1}M(or,hi),or.prototype.g=function(){return new Ei(this.l,this.j)},or.prototype.i=function(l){return function(){return l}}({});function Ei(l,d){ut.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ei,ut),i=Ei.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Rn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||p).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$a(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function $a(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Sn(this):Rn(this),this.readyState==3&&$a(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Sn(this))},i.Qa=function(l){this.g&&(this.response=l,Sn(this))},i.ga=function(){this.g&&Sn(this)};function Sn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rn(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var y=d.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=d.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ar(l){let d="";return we(l,function(y,w){d+=w,d+=":",d+=y,d+=`\r
`}),d}function Dr(l,d,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=ar(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Be(l,d,y))}function Ke(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ke,ut);var Bu=/^https?$/i,So=["POST","PUT"];i=Ke.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?Gi(this.o):Gi(En),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){wi(this,j);return}if(l=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)y.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())y.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),U=p.FormData&&l instanceof p.FormData,!(0<=Array.prototype.indexOf.call(So,d,void 0))||w||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,te]of y)this.g.setRequestHeader(j,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{as(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){wi(this,j)}};function wi(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,os(l),tn(l)}function os(l){l.A||(l.A=!0,ct(l,"complete"),ct(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ct(this,"complete"),ct(this,"abort"),tn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ro(this):this.bb())},i.bb=function(){Ro(this)};function Ro(l){if(l.h&&typeof h<"u"&&(!l.v[1]||$t(l)!=4||l.Z()!=2)){if(l.u&&$t(l)==4)lo(l.Ea,0,l);else if(ct(l,"readystatechange"),$t(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var y;if(!(y=d)){var w;if(w=te===0){var U=String(l.D).match(_i)[1]||null;!U&&p.self&&p.self.location&&(U=p.self.location.protocol.slice(0,-1)),w=!Bu.test(U?U.toLowerCase():"")}y=w}if(y)ct(l,"complete"),ct(l,"success");else{l.m=6;try{var j=2<$t(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",os(l)}}finally{tn(l)}}}}function tn(l,d){if(l.g){as(l);const y=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ct(l,"ready");try{y.onreadystatechange=w}catch{}}}function as(l){l.I&&(p.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function $t(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),fo(d)}};function Ao(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(l){const d={};l=(l.g&&2<=$t(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(Z(l[w]))continue;var y=N(l[w]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=d[U]||[];d[U]=j,j.push(y)}x(d,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,d,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||d}function Co(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,l),this.cb=Un("retryDelaySeedMs",1e4,l),this.Wa=Un("forwardChannelMaxRetries",2,l),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new yi(l&&l.concurrentRequestLimit),this.Da=new zu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Co.prototype,i.la=8,i.G=1,i.connect=function(l,d,y,w){nt(0),this.W=l,this.H=d||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=Qa(this,null,this.W),bn(this)};function It(l){if(us(l),l.G==3){var d=l.U++,y=en(l.I);if(Be(y,"SID",l.K),Be(y,"RID",d),Be(y,"TYPE","terminate"),lr(l,y),d=new wn(l,l.j,d),d.L=2,d.v=kr(en(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(d.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=d.v,y=!0),y||(d.g=Ka(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$e(d)}Wa(l)}function An(l){l.g&&(Po(l),l.g.cancel(),l.g=null)}function us(l){An(l),l.u&&(p.clearTimeout(l.u),l.u=null),fs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&p.clearTimeout(l.s),l.s=null)}function bn(l){if(!Zt(l.h)&&!l.s){l.s=!0;var d=l.Ga;ze||ie(),ne||(ze(),ne=!0),pe.add(d,l),l.B=0}}function ju(l,d){return La(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_n(I(l.Ga,l,d),Ha(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new wn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=S(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(U.H=j,j=null),this.P)e:{for(var d=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=y;break e}if(d===4096||y===this.i.length-1){d=y+1;break e}}d=1e3}else d=1e3;d=Nr(this,U,d),y=en(this.I),Be(y,"RID",l),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),lr(this,y),j&&(this.O?d="headers="+encodeURIComponent(String(ar(j)))+"&"+d:this.m&&Dr(y,this.m,j)),To(this.h,U),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",d),Be(y,"SID","null"),U.T=!0,ns(U,y,null)):ns(U,y,d),this.G=2}}else this.G==3&&(l?cs(this,l):this.i.length==0||Zt(this.h)||cs(this))};function cs(l,d){var y;d?y=d.l:y=l.U++;const w=en(l.I);Be(w,"SID",l.K),Be(w,"RID",y),Be(w,"AID",l.T),lr(l,w),l.m&&l.o&&Dr(w,l.m,l.o),y=new wn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Nr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),To(l.h,y),ns(y,w,d)}function lr(l,d){l.H&&we(l.H,function(y,w){Be(d,w,y)}),l.l&&Ar({},function(y,w){Be(d,w,y)})}function Nr(l,d,y){y=Math.min(l.i.length,y);var w=l.l?I(l.l.Na,l.l,l):null;e:{var U=l.i;let j=-1;for(;;){const te=["count="+y];j==-1?0<y?(j=U[0].g,te.push("ofs="+j)):j=0:te.push("ofs="+j);let be=!0;for(let ht=0;ht<y;ht++){let xe=U[ht].g;const yt=U[ht].map;if(xe-=j,0>xe)j=Math.max(0,U[ht].g-100),be=!1;else try{ja(yt,te,"req"+xe+"_")}catch{w&&w(yt)}}if(be){w=te.join("&");break e}}}return l=l.i.splice(0,y),d.D=l,w}function Ti(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ze||ie(),ne||(ze(),ne=!0),pe.add(d,l),l.v=0}}function hs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_n(I(l.Fa,l),Ha(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,qa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_n(I(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),An(this),qa(this))};function Po(l){l.A!=null&&(p.clearTimeout(l.A),l.A=null)}function qa(l){l.g=new wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=en(l.qa);Be(d,"RID","rpc"),Be(d,"SID",l.K),Be(d,"AID",l.T),Be(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(d,"TO",l.ja),Be(d,"TYPE","xmlhttp"),lr(l,d),l.m&&l.o&&Dr(d,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=kr(en(d)),y.m=null,y.P=!0,Eo(y,l)}i.Za=function(){this.C!=null&&(this.C=null,An(this),hs(this),nt(19))};function fs(l){l.C!=null&&(p.clearTimeout(l.C),l.C=null)}function ds(l,d){var y=null;if(l.g==d){fs(l),Po(l),l.g=null;var w=2}else if(Ut(l.h,d))y=d.D,Ma(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){y=d.m?d.m.length:0,d=Date.now()-d.F;var U=l.B;w=fi(),ct(w,new Ji(w,y)),bn(l)}else Ti(l);else if(U=d.s,U==3||U==0&&0<d.X||!(w==1&&ju(l,d)||w==2&&hs(l)))switch(y&&0<y.length&&(d=l.h,d.i=d.i.concat(y)),U){case 1:ur(l,5);break;case 4:ur(l,10);break;case 3:ur(l,6);break;default:ur(l,2)}}}function Ha(l,d){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*d}function ur(l,d){if(l.j.info("Error code "+d),d==2){var y=I(l.fb,l),w=l.Xa;const U=!w;w=new sr(w||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||vi(w,"https"),kr(w),U?bu(w.toString(),y):Ba(w.toString(),y)}else nt(2);l.G=0,l.l&&l.l.sa(d),Wa(l),us(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Wa(l){if(l.G=0,l.ka=[],l.l){const d=Oa(l.h);(d.length!=0||l.i.length!=0)&&(O(l.ka,d),O(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function Qa(l,d,y){var w=y instanceof sr?en(y):new sr(y);if(w.g!="")d&&(w.g=d+"."+w.g),Cr(w,w.s);else{var U=p.location;w=U.protocol,d=d?d+"."+U.hostname:U.hostname,U=+U.port;var j=new sr(null);w&&vi(j,w),d&&(j.g=d),U&&Cr(j,U),y&&(j.l=y),w=j}return y=l.D,d=l.ya,y&&d&&Be(w,y,d),Be(w,"VER",l.la),lr(l,w),w}function Ka(l,d,y){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ke(new or({eb:y})):new Ke(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ko(){}i=ko.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ps(){}ps.prototype.g=function(l,d){return new bt(l,d)};function bt(l,d){ut.call(this),this.g=new Co(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!Z(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new zn(this)}M(bt,ut),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){It(this.g)},bt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=ho(l),l=y);d.i.push(new Na(d.Ya++,l)),d.G==3&&bn(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,It(this.g),delete this.g,bt.aa.N.call(this)};function Ga(l){Ln.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const y in d){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}M(Ga,Ln);function Ya(){Xi.call(this),this.status=1}M(Ya,Xi);function zn(l){this.g=l}M(zn,ko),zn.prototype.ua=function(){ct(this.g,"a")},zn.prototype.ta=function(l){ct(this.g,new Ga(l))},zn.prototype.sa=function(l){ct(this.g,new Ya)},zn.prototype.ra=function(){ct(this.g,"b")},ps.prototype.createWebChannel=ps.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,zg=function(){return new ps},bg=function(){return fi()},Ug=Mn,Lh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,Jl=es,ka.COMPLETE="complete",Fg=ka,Yi.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ut.prototype.listen=ut.prototype.K,na=Yi,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Og=Ke}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});const vm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new kg("@firebase/firestore");function Os(){return Ui.logLevel}function se(i,...e){if(Ui.logLevel<=De.DEBUG){const n=e.map(af);Ui.debug(`Firestore (${eo}): ${i}`,...n)}}function wr(i,...e){if(Ui.logLevel<=De.ERROR){const n=e.map(af);Ui.error(`Firestore (${eo}): ${i}`,...n)}}function js(i,...e){if(Ui.logLevel<=De.WARN){const n=e.map(af);Ui.warn(`Firestore (${eo}): ${i}`,...n)}}function af(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(i="Unexpected state"){const e=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function Ue(i,e){i||_e()}function Ee(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Zs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class IT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ST{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let s=this.i;const a=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},p=g=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new Bg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Ot(e)}}class RT{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class AT{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new RT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const s=u=>{u.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,se("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const a=u=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?a(u):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new CT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=kT(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%e.length))}return s}}function Pe(i,e){return i<e?-1:i>e?1:0}function $s(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new pt(0,0))}static max(){return new ve(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(),s===void 0?s=e.length-n:s>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const u=Hn.compareSegments(e.get(a),n.get(a));if(u!==0)return u}return Math.sign(e.length-n.length)}static compareSegments(e,n){const s=Hn.isNumericId(e),a=Hn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Hn.extractNumericId(e).compare(Hn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xr.fromString(e.substring(4,e.length-2))}}class Qe extends Hn{construct(e,n,s){return new Qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const xT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Hn{construct(e,n,s){return new Ct(e,n,s)}static isValidIdentifier(e){return xT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const u=()=>{if(s.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else p==="`"?(h=!h,a++):p!=="."||h?(s+=p,a++):(u(),a++)}if(u(),h)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Qe.fromString(e))}static fromName(e){return new de(Qe.fromString(e).popFirst(5))}static empty(){return new de(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Qe(e.slice()))}}function VT(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=ve.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new ti(a,de.empty(),e)}function DT(i){return new ti(i.readTime,i.key,-1)}class ti{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ti(ve.min(),de.empty(),-1)}static max(){return new ti(ve.max(),de.empty(),-1)}}function NT(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(i.documentKey,e.documentKey),n!==0?n:Pe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==LT)throw i;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let a=0,u=0,h=!1;e.forEach(p=>{++a,p.next(()=>{++u,h&&u===a&&n()},g=>s(g))}),h=!0,u===a&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(a=>a?W.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,u)=>{s.push(n.call(this,a,u))}),this.waitFor(s)}static mapArray(e,n){return new W((s,a)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const _=g;n(e[_]).next(E=>{h[_]=E,++p,p===u&&s(h)},E=>a(E))}})}static doWhile(e,n){return new W((s,a)=>{const u=()=>{e()===!0?n().next(()=>{u()},a):s()};u()})}}function OT(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vu.oe=-1;function Eu(i){return i==null}function lu(i){return i===0&&1/i==-1/0}function FT(i){return typeof i=="number"&&Number.isInteger(i)&&!lu(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Em(e)),e=bT(i.get(n),e);return Em(e)}function bT(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const u=i.charAt(a);switch(u){case"\0":n+="";break;case"":n+="";break;default:n+=u}}return n}function Em(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function oi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function $g(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,s,a,u){this.key=e,this.value=n,this.color=s??At.RED,this.left=a??At.EMPTY,this.right=u??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,u){return new At(e??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return At.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,s,a,u){return this}insert(e,n,s){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tm(this.data.getIterator())}getIteratorFrom(e){return new Tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Tm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new an([])}unionWith(e){let n=new mt(Ct.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new qg("Invalid base64 string: "+u):u}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(a){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);return u}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const zT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(i){if(Ue(!!i),typeof i=="string"){let e=0;const n=zT.exec(i);if(Ue(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ri(i){return typeof i=="string"?Pt.fromBase64String(i):Pt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wu(i){const e=i.mapValue.fields.__previous_value__;return lf(e)?wu(e):e}function da(i){const e=ni(i.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,s,a,u,h,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_}}class pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ii(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lf(i)?4:$T(i)?9007199254740991:jT(i)?10:11:_e()}function Xn(i,e){if(i===e)return!0;const n=ii(i);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return da(i).isEqual(da(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const h=ni(a.timestampValue),p=ni(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return ri(a.bytesValue).isEqual(ri(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return it(a.geoPointValue.latitude)===it(u.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return it(a.integerValue)===it(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const h=it(a.doubleValue),p=it(u.doubleValue);return h===p?lu(h)===lu(p):isNaN(h)&&isNaN(p)}return!1}(i,e);case 9:return $s(i.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(a,u){const h=a.mapValue.fields||{},p=u.mapValue.fields||{};if(wm(h)!==wm(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Xn(h[g],p[g])))return!1;return!0}(i,e);default:return _e()}}function ma(i,e){return(i.values||[]).find(n=>Xn(n,e))!==void 0}function qs(i,e){if(i===e)return 0;const n=ii(i),s=ii(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return function(u,h){const p=it(u.integerValue||u.doubleValue),g=it(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return Im(i.timestampValue,e.timestampValue);case 4:return Im(da(i),da(e));case 5:return Pe(i.stringValue,e.stringValue);case 6:return function(u,h){const p=ri(u),g=ri(h);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const p=u.split("/"),g=h.split("/");for(let _=0;_<p.length&&_<g.length;_++){const E=Pe(p[_],g[_]);if(E!==0)return E}return Pe(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const p=Pe(it(u.latitude),it(h.latitude));return p!==0?p:Pe(it(u.longitude),it(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Sm(i.arrayValue,e.arrayValue);case 10:return function(u,h){var p,g,_,E;const T=u.fields||{},I=h.fields||{},D=(p=T.value)===null||p===void 0?void 0:p.arrayValue,M=(g=I.value)===null||g===void 0?void 0:g.arrayValue,$=Pe(((_=D==null?void 0:D.values)===null||_===void 0?void 0:_.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return $!==0?$:Sm(D,M)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===Ql.mapValue&&h===Ql.mapValue)return 0;if(u===Ql.mapValue)return 1;if(h===Ql.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const I=Pe(g[T],E[T]);if(I!==0)return I;const D=qs(p[g[T]],_[E[T]]);if(D!==0)return D}return Pe(g.length,E.length)}(i.mapValue,e.mapValue);default:throw _e()}}function Im(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const n=ni(i),s=ni(e),a=Pe(n.seconds,s.seconds);return a!==0?a:Pe(n.nanos,s.nanos)}function Sm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const u=qs(n[a],s[a]);if(u)return u}return Pe(n.length,s.length)}function Hs(i){return Mh(i)}function Mh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ni(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ri(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return de.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const u of n.values||[])a?a=!1:s+=",",s+=Mh(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const h of s)u?u=!1:a+=",",a+=`${h}:${Mh(n.fields[h])}`;return a+"}"}(i.mapValue):_e()}function Zl(i){switch(ii(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wu(i);return e?16+Zl(e):16;case 5:return 2*i.stringValue.length;case 6:return ri(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,u)=>a+Zl(u),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return oi(s.fields,(u,h)=>{a+=u.length+Zl(h)}),a}(i.mapValue);default:throw _e()}}function Rm(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Oh(i){return!!i&&"integerValue"in i}function uf(i){return!!i&&"arrayValue"in i}function Am(i){return!!i&&"nullValue"in i}function Cm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function eu(i){return!!i&&"mapValue"in i}function jT(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return oi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=oa(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oa(i.arrayValue.values[n]);return e}return Object.assign({},i)}function $T(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(n)}setAll(e){let n=Ct.emptyPath(),s={},a=[];e.forEach((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,a),s={},a=[],n=p.popLast()}h?s[p.lastSegment()]=oa(h):a.push(p.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,a)}delete(e){const n=this.field(e.popLast());eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];eu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){oi(n,(a,u)=>e[a]=u);for(const a of s)delete e[a]}clone(){return new Xt(oa(this.value))}}function Hg(i){const e=[];return oi(i.fields,(n,s)=>{const a=new Ct([n]);if(eu(s)){const u=Hg(s.mapValue).fields;if(u.length===0)e.push(a);else for(const h of u)e.push(a.child(h))}else e.push(a)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,s,a,u,h,p){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Ft(e,0,ve.min(),ve.min(),ve.min(),Xt.empty(),0)}static newFoundDocument(e,n,s,a){return new Ft(e,1,n,ve.min(),s,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,ve.min(),ve.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ve.min(),ve.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.position=e,this.inclusive=n}}function Pm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const u=e[a],h=i.position[a];if(u.field.isKeyField()?s=de.comparator(de.fromName(h.referenceValue),n.key):s=qs(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function km(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Xn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function qT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{}class lt extends Wg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new WT(e,n,s):n==="array-contains"?new GT(e,s):n==="in"?new YT(e,s):n==="not-in"?new XT(e,s):n==="array-contains-any"?new JT(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new QT(e,s):new KT(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends Wg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return Qg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qg(i){return i.op==="and"}function Kg(i){return HT(i)&&Qg(i)}function HT(i){for(const e of i.filters)if(e instanceof Nn)return!1;return!0}function Fh(i){if(i instanceof lt)return i.field.canonicalString()+i.op.toString()+Hs(i.value);if(Kg(i))return i.filters.map(e=>Fh(e)).join(",");{const e=i.filters.map(n=>Fh(n)).join(",");return`${i.op}(${e})`}}function Gg(i,e){return i instanceof lt?function(s,a){return a instanceof lt&&s.op===a.op&&s.field.isEqual(a.field)&&Xn(s.value,a.value)}(i,e):i instanceof Nn?function(s,a){return a instanceof Nn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((u,h,p)=>u&&Gg(h,a.filters[p]),!0):!1}(i,e):void _e()}function Yg(i){return i instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(i):i instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(Yg).join(" ,")+"}"}(i):"Filter"}class WT extends lt{constructor(e,n,s){super(e,n,s),this.key=de.fromName(s.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class QT extends lt{constructor(e,n){super(e,"in",n),this.keys=Xg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KT extends lt{constructor(e,n){super(e,"not-in",n),this.keys=Xg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>de.fromName(s.referenceValue))}class GT extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uf(n)&&ma(n.arrayValue,this.value)}}class YT extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class XT extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ma(this.value.arrayValue,n)}}class JT extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ma(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n=null,s=[],a=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=h,this.endAt=p,this.ue=null}}function xm(i,e=null,n=[],s=[],a=null,u=null,h=null){return new ZT(i,e,n,s,a,u,h)}function cf(i){const e=Ee(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Fh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Eu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hs(s)).join(",")),e.ue=n}return e.ue}function hf(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!qT(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Gg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!km(i.startAt,e.startAt)&&km(i.endAt,e.endAt)}function Uh(i){return de.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,s=[],a=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function e0(i,e,n,s,a,u,h,p){return new Ta(i,e,n,s,a,u,h,p)}function ff(i){return new Ta(i)}function Vm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Jg(i){return i.collectionGroup!==null}function aa(i){const e=Ee(i);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new mt(Ct.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new cu(u,s))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new cu(Ct.keyField(),s))}return e.ce}function Wn(i){const e=Ee(i);return e.le||(e.le=t0(e,aa(i))),e.le}function t0(i,e){if(i.limitType==="F")return xm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new cu(a.field,u)});const n=i.endAt?new uu(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new uu(i.startAt.position,i.startAt.inclusive):null;return xm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function bh(i,e){const n=i.filters.concat([e]);return new Ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function zh(i,e,n){return new Ta(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Tu(i,e){return hf(Wn(i),Wn(e))&&i.limitType===e.limitType}function Zg(i){return`${cf(Wn(i))}|lt:${i.limitType}`}function Fs(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Yg(a)).join(", ")}]`),Eu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Hs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Hs(a)).join(",")),`Target(${s})`}(Wn(i))}; limitType=${i.limitType})`}function Iu(i,e){return e.isFoundDocument()&&function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):de.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,a){for(const u of aa(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,p,g){const _=Pm(h,p,g);return h.inclusive?_<=0:_<0}(s.startAt,aa(s),a)||s.endAt&&!function(h,p,g){const _=Pm(h,p,g);return h.inclusive?_>=0:_>0}(s.endAt,aa(s),a))}(i,e)}function n0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ey(i){return(e,n)=>{let s=!1;for(const a of aa(i)){const u=r0(a,e,n);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function r0(i,e,n){const s=i.field.isKeyField()?de.comparator(e.key,n.key):function(u,h,p){const g=h.data.field(u),_=p.data.field(u);return g!==null&&_!==null?qs(g,_):_e()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oi(this.inner,(n,s)=>{for(const[a,u]of s)e(a,u)})}isEmpty(){return $g(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Ze(de.comparator);function Tr(){return i0}const ty=new Ze(de.comparator);function ra(...i){let e=ty;for(const n of i)e=e.insert(n.key,n);return e}function ny(i){let e=ty;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Fi(){return la()}function ry(){return la()}function la(){return new Bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const s0=new Ze(de.comparator),o0=new mt(de.comparator);function Ae(...i){let e=o0;for(const n of i)e=e.add(n);return e}const a0=new mt(Pe);function l0(){return a0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function iy(i){return{integerValue:""+i}}function u0(i,e){return FT(e)?iy(e):df(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function c0(i,e,n){return i instanceof ga?function(a,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&lf(u)&&(u=wu(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(n,e):i instanceof ya?oy(i,e):i instanceof _a?ay(i,e):function(a,u){const h=sy(a,u),p=Dm(h)+Dm(a.Pe);return Oh(h)&&Oh(a.Pe)?iy(p):df(a.serializer,p)}(i,e)}function h0(i,e,n){return i instanceof ya?oy(i,e):i instanceof _a?ay(i,e):n}function sy(i,e){return i instanceof hu?function(s){return Oh(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class ga extends Su{}class ya extends Su{constructor(e){super(),this.elements=e}}function oy(i,e){const n=ly(e);for(const s of i.elements)n.some(a=>Xn(a,s))||n.push(s);return{arrayValue:{values:n}}}class _a extends Su{constructor(e){super(),this.elements=e}}function ay(i,e){let n=ly(e);for(const s of i.elements)n=n.filter(a=>!Xn(a,s));return{arrayValue:{values:n}}}class hu extends Su{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dm(i){return it(i.integerValue||i.doubleValue)}function ly(i){return uf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.field=e,this.transform=n}}function d0(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ya&&a instanceof ya||s instanceof _a&&a instanceof _a?$s(s.elements,a.elements,Xn):s instanceof hu&&a instanceof hu?Xn(s.Pe,a.Pe):s instanceof ga&&a instanceof ga}(i.transform,e.transform)}class p0{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ru{}function uy(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new hy(i.key,Qn.none()):new Ia(i.key,i.data,Qn.none());{const n=i.data,s=Xt.empty();let a=new mt(Ct.comparator);for(let u of e.fields)if(!a.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),a=a.add(u)}return new ai(i.key,s,new an(a.toArray()),Qn.none())}}function m0(i,e,n){i instanceof Ia?function(a,u,h){const p=a.value.clone(),g=Lm(a.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,n):i instanceof ai?function(a,u,h){if(!tu(a.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Lm(a.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(cy(a)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,n):function(a,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function ua(i,e,n,s){return i instanceof Ia?function(u,h,p,g){if(!tu(u.precondition,h))return p;const _=u.value.clone(),E=Mm(u.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(i,e,n,s):i instanceof ai?function(u,h,p,g){if(!tu(u.precondition,h))return p;const _=Mm(u.fieldTransforms,g,h),E=h.data;return E.setAll(cy(u)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(i,e,n,s):function(u,h,p){return tu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(i,e,n)}function g0(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),u=sy(s.transform,a||null);u!=null&&(n===null&&(n=Xt.empty()),n.set(s.field,u))}return n||null}function Nm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&$s(s,a,(u,h)=>d0(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ia extends Ru{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ai extends Ru{constructor(e,n,s,a,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cy(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Lm(i,e,n){const s=new Map;Ue(i.length===n.length);for(let a=0;a<n.length;a++){const u=i[a],h=u.transform,p=e.data.field(u.field);s.set(u.field,h0(h,p,n[a]))}return s}function Mm(i,e,n){const s=new Map;for(const a of i){const u=a.transform,h=n.data.field(a.field);s.set(a.field,c0(u,h,e))}return s}class hy extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends Ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&m0(u,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ua(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ua(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ry();return this.mutations.forEach(a=>{const u=e.get(a.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(a.key)?null:p;const g=uy(h,p);g!==null&&s.set(a.key,g),h.isValidDocument()||h.convertToNoDocument(ve.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,s)=>Nm(n,s))&&$s(this.baseMutations,e.baseMutations,(n,s)=>Nm(n,s))}}class pf{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Ue(e.mutations.length===s.length);let a=function(){return s0}();const u=e.mutations;for(let h=0;h<u.length;h++)a=a.insert(u[h].key,s[h].version);return new pf(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ve;function w0(i){switch(i){default:return _e();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function fy(i){if(i===void 0)return wr("GRPC error has no .code"),K.UNKNOWN;switch(i){case at.OK:return K.OK;case at.CANCELLED:return K.CANCELLED;case at.UNKNOWN:return K.UNKNOWN;case at.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case at.INTERNAL:return K.INTERNAL;case at.UNAVAILABLE:return K.UNAVAILABLE;case at.UNAUTHENTICATED:return K.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case at.NOT_FOUND:return K.NOT_FOUND;case at.ALREADY_EXISTS:return K.ALREADY_EXISTS;case at.PERMISSION_DENIED:return K.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case at.ABORTED:return K.ABORTED;case at.OUT_OF_RANGE:return K.OUT_OF_RANGE;case at.UNIMPLEMENTED:return K.UNIMPLEMENTED;case at.DATA_LOSS:return K.DATA_LOSS;default:return _e()}}(Ve=at||(at={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Xr([4294967295,4294967295],0);function Om(i){const e=T0().encode(i),n=new Mg;return n.update(e),new Uint8Array(n.digest())}function Fm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xr([n,s],0),new Xr([a,u],0)]}class mf{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ia(`Invalid padding: ${n}`);if(s<0)throw new ia(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ia(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ia(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Xr.fromNumber(this.Te)}de(e,n,s){let a=e.add(n.multiply(Xr.fromNumber(s)));return a.compare(I0)===1&&(a=new Xr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Om(e),[s,a]=Fm(n);for(let u=0;u<this.hashCount;u++){const h=this.de(s,a,u);if(!this.Ee(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new mf(u,a,n);return s.forEach(p=>h.insert(p)),h}insert(e){if(this.Te===0)return;const n=Om(e),[s,a]=Fm(n);for(let u=0;u<this.hashCount;u++){const h=this.de(s,a,u);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ia extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,s,a,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Au(ve.min(),a,new Ze(Pe),Tr(),Ae())}}class Sa{constructor(e,n,s,a,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Sa(s,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class dy{constructor(e,n){this.targetId=e,this.me=n}}class py{constructor(e,n,s=Pt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Um{constructor(){this.fe=0,this.ge=bm(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),s=Ae();return this.ge.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:_e()}}),new Sa(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=bm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S0{constructor(e){this.Be=e,this.Le=new Map,this.ke=Tr(),this.qe=Kl(),this.Qe=Kl(),this.Ke=new Ze(Pe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const u=a.target;if(Uh(u))if(s===0){const h=new de(u.path);this.We(n,h,Ft.newNoDocument(h,ve.min()))}else Ue(s===1);else{const h=this.Ze(n);if(h!==s){const p=this.Xe(e),g=p?this.et(p,e,h):1;if(g!==0){this.He(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,_)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=n;let h,p;try{h=ri(s).toUint8Array()}catch(g){if(g instanceof qg)return js("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new mf(h,a,u)}catch(g){return js(g instanceof ia?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.Te===0?null:p}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Be.getRemoteKeysForTarget(n);let a=0;return s.forEach(u=>{const h=this.Be.nt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.We(n,u,null),a++)}),a}it(e){const n=new Map;this.Le.forEach((u,h)=>{const p=this.Ye(h);if(p){if(u.current&&Uh(p.target)){const g=new de(p.target.path);this.st(g).has(h)||this.ot(h,g)||this.We(h,g,Ft.newNoDocument(g,e))}u.be&&(n.set(h,u.ve()),u.Ce())}});let s=Ae();this.Qe.forEach((u,h)=>{let p=!0;h.forEachWhile(g=>{const _=this.Ye(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const a=new Au(e,n,this.Ke,this.ke,s);return this.ke=Tr(),this.qe=Kl(),this.Qe=Kl(),this.Ke=new Ze(Pe),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new Um,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new mt(Pe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(Pe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Um),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Kl(){return new Ze(de.comparator)}function bm(){return new Ze(de.comparator)}const R0={asc:"ASCENDING",desc:"DESCENDING"},A0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C0={and:"AND",or:"OR"};class P0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bh(i,e){return i.useProto3Json||Eu(e)?e:{value:e}}function fu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function my(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function k0(i,e){return fu(i,e.toTimestamp())}function Kn(i){return Ue(!!i),ve.fromTimestamp(function(n){const s=ni(n);return new pt(s.seconds,s.nanos)}(i))}function gf(i,e){return jh(i,e).canonicalString()}function jh(i,e){const n=function(a){return new Qe(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function gy(i){const e=Qe.fromString(i);return Ue(wy(e)),e}function $h(i,e){return gf(i.databaseId,e.path)}function vh(i,e){const n=gy(e);if(n.get(1)!==i.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new de(_y(n))}function yy(i,e){return gf(i.databaseId,e)}function x0(i){const e=gy(i);return e.length===4?Qe.emptyPath():_y(e)}function qh(i){return new Qe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _y(i){return Ue(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function zm(i,e,n){return{name:$h(i,e),fields:n.value.mapValue.fields}}function V0(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Ue(E===void 0||typeof E=="string"),Pt.fromBase64String(E||"")):(Ue(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Pt.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(_){const E=_.code===void 0?K.UNKNOWN:fy(_.code);return new le(E,_.message||"")}(h);n=new py(s,a,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=vh(i,s.document.name),u=Kn(s.document.updateTime),h=s.document.createTime?Kn(s.document.createTime):ve.min(),p=new Xt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(a,u,h,p),_=s.targetIds||[],E=s.removedTargetIds||[];n=new nu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=vh(i,s.document),u=s.readTime?Kn(s.readTime):ve.min(),h=Ft.newNoDocument(a,u),p=s.removedTargetIds||[];n=new nu([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=vh(i,s.document),u=s.removedTargetIds||[];n=new nu([],u,a,null)}else{if(!("filter"in e))return _e();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,h=new E0(a,u),p=s.targetId;n=new dy(p,h)}}return n}function D0(i,e){let n;if(e instanceof Ia)n={update:zm(i,e.key,e.value)};else if(e instanceof hy)n={delete:$h(i,e.key)};else if(e instanceof ai)n={update:zm(i,e.key,e.data),updateMask:B0(e.fieldMask)};else{if(!(e instanceof y0))return _e();n={verify:$h(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const p=h.transform;if(p instanceof ga)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ya)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof _a)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof hu)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw _e()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:k0(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e()}(i,e.precondition)),n}function N0(i,e){return i&&i.length>0?(Ue(e!==void 0),i.map(n=>function(a,u){let h=a.updateTime?Kn(a.updateTime):Kn(u);return h.isEqual(ve.min())&&(h=Kn(u)),new p0(h,a.transformResults||[])}(n,e))):[]}function L0(i,e){return{documents:[yy(i,e.path)]}}function M0(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=yy(i,a);const u=function(_){if(_.length!==0)return Ey(Nn.create(_,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(E=>function(I){return{field:Us(I.field),direction:U0(I.dir)}}(E))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Bh(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ct:n,parent:a}}function O0(i){let e=x0(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Ue(s===1);const E=n.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(T){const I=vy(T);return I instanceof Nn&&Kg(I)?I.getFilters():[I]}(n.where));let h=[];n.orderBy&&(h=function(T){return T.map(I=>function(M){return new cu(bs(M.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let p=null;n.limit&&(p=function(T){let I;return I=typeof T=="object"?T.value:T,Eu(I)?null:I}(n.limit));let g=null;n.startAt&&(g=function(T){const I=!!T.before,D=T.values||[];return new uu(D,I)}(n.startAt));let _=null;return n.endAt&&(_=function(T){const I=!T.before,D=T.values||[];return new uu(D,I)}(n.endAt)),e0(e,a,h,u,p,"F",g,_)}function F0(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vy(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=bs(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=bs(n.unaryFilter.field);return lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=bs(n.unaryFilter.field);return lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=bs(n.unaryFilter.field);return lt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(i):i.fieldFilter!==void 0?function(n){return lt.create(bs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(s=>vy(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(i):_e()}function U0(i){return R0[i]}function b0(i){return A0[i]}function z0(i){return C0[i]}function Us(i){return{fieldPath:i.canonicalString()}}function bs(i){return Ct.fromServerFormat(i.fieldPath)}function Ey(i){return i instanceof lt?function(n){if(n.op==="=="){if(Cm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(Am(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cm(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(Am(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:b0(n.op),value:n.value}}}(i):i instanceof Nn?function(n){const s=n.getFilters().map(a=>Ey(a));return s.length===1?s[0]:{compositeFilter:{op:z0(n.op),filters:s}}}(i):_e()}function B0(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,s,a,u=ve.min(),h=ve.min(),p=Pt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.ht=e}}function $0(i){const e=O0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.ln=new H0}addToCollectionParentIndex(e,n){return this.ln.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ti.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class H0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new mt(Qe.comparator),u=!a.has(s);return this.index[n]=a.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ws(0)}static Qn(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm([i,e],[n,s]){const a=Pe(i,n);return a===0?Pe(e,s):a}class W0{constructor(e){this.Gn=e,this.buffer=new mt(jm),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();jm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Q0{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await to(n)}await this.Yn(3e5)})}}class K0{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve(vu.oe);const s=new W0(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Bm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bm):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,u,h,p,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,h=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(s=T,p=Date.now(),this.removeTargets(e,s,n))).next(T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(_=Date.now(),Os()<=De.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${a} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:T})))}}function G0(i,e){return new K0(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&ua(s.mutation,a,an.empty(),pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const a=Fi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(u=>{let h=ra();return u.forEach((p,g)=>{h=h.insert(p,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Fi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const a=[];return s.forEach(u=>{n.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((h,p)=>{n.set(h,p)})})}computeViews(e,n,s,a){let u=Tr();const h=la(),p=function(){return la()}();return n.forEach((g,_)=>{const E=s.get(_.key);a.has(_.key)&&(E===void 0||E.mutation instanceof ai)?u=u.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),ua(E.mutation,_,E.mutation.getFieldMask(),pt.now())):h.set(_.key,an.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((_,E)=>h.set(_,E)),n.forEach((_,E)=>{var T;return p.set(_,new X0(E,(T=h.get(_))!==null&&T!==void 0?T:null))}),p))}recalculateAndSaveOverlays(e,n){const s=la();let a=new Ze((h,p)=>h-p),u=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const p of h)p.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let E=s.get(g)||an.empty();E=p.applyToLocalView(_,E),s.set(g,E);const T=(a.get(p.batchId)||Ae()).add(g);a=a.insert(p.batchId,T)})}).next(()=>{const h=[],p=a.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,E=g.value,T=ry();E.forEach(I=>{if(!u.has(I)){const D=uy(n.get(I),s.get(I));D!==null&&T.set(I,D),u=u.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,T))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(h){return de.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(u=>{const h=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-u.size):W.resolve(Fi());let p=-1,g=u;return h.next(_=>W.forEach(_,(E,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{g=g.insert(E,I)}))).next(()=>this.populateOverlays(e,_,u)).next(()=>this.computeViews(e,g,_,Ae())).next(E=>({batchId:p,changes:ny(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(s=>{let a=ra();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const u=n.collectionGroup;let h=ra();return this.indexManager.getCollectionParents(e,u).next(p=>W.forEach(p,g=>{const _=function(T,I){return new Ta(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,s,a).next(E=>{E.forEach((T,I)=>{h=h.insert(T,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,a))).next(h=>{u.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Ft.newInvalidDocument(E)))});let p=ra();return h.forEach((g,_)=>{const E=u.get(g);E!==void 0&&ua(E.mutation,_,an.empty(),pt.now()),Iu(n,_)&&(p=p.insert(g,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return W.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Kn(a.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:$0(a.bundledQuery),readTime:Kn(a.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.overlays=new Ze(de.comparator),this.dr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Fi();return W.forEach(n,a=>this.getOverlay(e,a).next(u=>{u!==null&&s.set(a,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,u)=>{this.Tt(e,n,u)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.dr.get(s);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.dr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const a=Fi(),u=n.length+1,h=new de(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>s&&a.set(g.getKey(),g)}return W.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let u=new Ze((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let E=u.get(_.largestBatchId);E===null&&(E=Fi(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const p=Fi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>p.set(_,E)),!(p.size()>=a)););return W.resolve(p)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.dr.get(a.largestBatchId).delete(s.key);this.dr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new v0(n,s));let u=this.dr.get(n);u===void 0&&(u=Ae(),this.dr.set(n,u)),this.dr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.Er=new mt(wt.Ar),this.Rr=new mt(wt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const s=new wt(e,n);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new wt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new de(new Qe([])),s=new wt(n,e),a=new wt(n,e+1),u=[];return this.Rr.forEachInRange([s,a],h=>{this.gr(h),u.push(h.key)}),u}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new de(new Qe([])),s=new wt(n,e),a=new wt(n,e+1);let u=Ae();return this.Rr.forEachInRange([s,a],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new wt(e,0),s=this.Er.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class wt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return de.comparator(e.key,n.key)||Pe(e.br,n.br)}static Vr(e,n){return Pe(e.br,n.br)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new mt(wt.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const u=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new _0(u,n,s,a);this.mutationQueue.push(h);for(const p of a)this.vr=this.vr.add(new wt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,n){return W.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),u=a<0?0:a;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new wt(n,0),a=new wt(n,Number.POSITIVE_INFINITY),u=[];return this.vr.forEachInRange([s,a],h=>{const p=this.Cr(h.br);u.push(p)}),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(Pe);return n.forEach(a=>{const u=new wt(a,0),h=new wt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([u,h],p=>{s=s.add(p.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let u=s;de.isDocumentKey(u)||(u=u.child(""));const h=new wt(new de(u),0);let p=new mt(Pe);return this.vr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===a&&(p=p.add(g.br)),!0)},h),W.resolve(this.Mr(p))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Ue(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(n.mutations,a=>{const u=new wt(a.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,n){const s=new wt(n,0),a=this.vr.firstAfterOrEqual(s);return W.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.Nr=e,this.docs=function(){return new Ze(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),u=a?a.size:0,h=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let s=Tr();return n.forEach(a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():Ft.newInvalidDocument(a))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let u=Tr();const h=n.path,p=new de(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||NT(DT(E),s)<=0||(a.has(E.key)||Iu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,a){_e()}Br(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new iI(this)}getSize(e){return W.resolve(this.size)}}class iI extends Y0{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.persistence=e,this.Lr=new Bi(n=>cf(n),hf),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.kr=0,this.qr=new yf,this.targetCount=0,this.Qr=Ws.qn()}forEachTarget(e,n){return this.Lr.forEach((s,a)=>n(a)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),W.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Un(n),W.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let a=0;const u=[];return this.Lr.forEach((h,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.Lr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)}),W.waitFor(u).next(()=>a)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.Lr.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach(h=>{u.push(a.markPotentiallyOrphaned(e,h))}),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.Kr={},this.overlays={},this.$r=new vu(0),this.Ur=!1,this.Ur=!0,this.Wr=new tI,this.referenceDelegate=e(this),this.Gr=new sI(this),this.indexManager=new q0,this.remoteDocumentCache=function(a){return new rI(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new j0(n),this.jr=new Z0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new nI(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){se("MemoryPersistence","Starting transaction:",e);const a=new oI(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(u=>this.referenceDelegate.Jr(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Yr(e,n){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class oI extends MT{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Zr=new yf,this.Xr=null}static ei(e){return new _f(e)}get ti(){if(this.Xr)return this.Xr;throw _e()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),W.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(u=>this.ti.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const a=de.fromPath(s);return this.ni(e,a).next(u=>{u||n.removeEntry(a,ve.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return W.or([()=>W.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class du{constructor(e,n){this.persistence=e,this.ri=new Bi(s=>UT(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=G0(this,n)}static ei(e,n){return new du(e,n)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return W.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(u=>u?W.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Br(e,h=>this.ir(e,h,n).next(p=>{p||(s++,u.removeEntry(h,ve.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zl(e.data.value)),n}ir(e,n,s){return W.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return W.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ae(),a=Ae();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new vf(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return iw()?8:OT(nw())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const u={result:null};return this.Xi(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.es(e,n,a,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new aI;return this.ts(e,n,h).next(p=>{if(u.result=p,this.Hi)return this.ns(e,n,h,p.size)})}).next(()=>u.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Os()<=De.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(Os()<=De.DEBUG&&se("QueryEngine","Query:",Fs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Os()<=De.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):W.resolve())}Xi(e,n){if(Vm(n))return W.resolve(null);let s=Wn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=zh(n,null,"F"),s=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Ae(...u);return this.Zi.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,s).next(g=>{const _=this.rs(n,p);return this.ss(n,_,h,g.readTime)?this.Xi(e,zh(n,null,"F")):this.os(e,_,n,g)}))})))}es(e,n,s,a){return Vm(n)||a.isEqual(ve.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(u=>{const h=this.rs(n,u);return this.ss(n,h,s,a)?W.resolve(null):(Os()<=De.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fs(n)),this.os(e,h,n,VT(a,-1)).next(p=>p))})}rs(e,n){let s=new mt(ey(e));return n.forEach((a,u)=>{Iu(e,u)&&(s=s.add(u))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ts(e,n,s){return Os()<=De.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Zi.getDocumentsMatchingQuery(e,n,ti.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ze(Pe),this.cs=new Bi(u=>cf(u),hf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J0(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function cI(i,e,n,s){return new uI(i,e,n,s)}async function Iy(i,e){const n=Ee(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(u=>(a=u,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],p=[];let g=Ae();for(const _ of a){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){p.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next(_=>({Ts:_,removedBatchIds:h,addedBatchIds:p}))})})}function hI(i,e){const n=Ee(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),u=n.hs.newChangeBuffer({trackRemovals:!0});return function(p,g,_,E){const T=_.batch,I=T.keys();let D=W.resolve();return I.forEach(M=>{D=D.next(()=>E.getEntry(g,M)).next($=>{const O=_.docVersions.get(M);Ue(O!==null),$.version.compareTo(O)<0&&(T.applyToRemoteDocument($,_),$.isValidDocument()&&($.setReadTime(_.commitVersion),E.addEntry($)))})}),D.next(()=>p.mutationQueue.removeMutationBatch(g,T))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=Ae();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Sy(i){const e=Ee(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function fI(i,e){const n=Ee(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const p=[];e.targetChanges.forEach((E,T)=>{const I=a.get(T);if(!I)return;p.push(n.Gr.removeMatchingKeys(u,E.removedDocuments,T).next(()=>n.Gr.addMatchingKeys(u,E.addedDocuments,T)));let D=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(Pt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),a=a.insert(T,D),function($,O,q){return $.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,D,E)&&p.push(n.Gr.updateTargetData(u,D))});let g=Tr(),_=Ae();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),p.push(dI(u,h,e.documentUpdates).next(E=>{g=E.Is,_=E.ds})),!s.isEqual(ve.min())){const E=n.Gr.getLastRemoteSnapshotVersion(u).next(T=>n.Gr.setTargetsMetadata(u,u.currentSequenceNumber,s));p.push(E)}return W.waitFor(p).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(n.us=a,u))}function dI(i,e,n){let s=Ae(),a=Ae();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=Tr();return n.forEach((p,g)=>{const _=u.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(p)),g.isNoDocument()&&g.version.isEqual(ve.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):se("LocalStore","Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)}),{Is:h,ds:a}})}function pI(i,e){const n=Ee(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function mI(i,e){const n=Ee(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(u=>u?(a=u,W.resolve(a)):n.Gr.allocateTargetId(s).next(h=>(a=new Kr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function Hh(i,e,n){const s=Ee(i),a=s.us.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!no(h))throw h;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function $m(i,e,n){const s=Ee(i);let a=ve.min(),u=Ae();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const T=Ee(g),I=T.cs.get(E);return I!==void 0?W.resolve(T.us.get(I)):T.Gr.getTargetData(_,E)}(s,h,Wn(e)).next(p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,p.targetId).next(g=>{u=g})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,n?a:ve.min(),n?u:Ae())).next(p=>(gI(s,n0(e),p),{documents:p,Es:u})))}function gI(i,e,n){let s=i.ls.get(e)||ve.min();n.forEach((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.ls.set(e,s)}class qm{constructor(){this.activeTargetIds=l0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yI{constructor(){this._o=new qm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new qm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function Eh(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class wI extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${u}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${u}`}Oo(n,s,a,u,h){const p=Eh(),g=this.No(n,s.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${p}:`,g,a);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(_,u,h),this.Lo(n,g,_,a).then(E=>(se("RestConnection",`Received RPC '${n}' ${p}: `,E),E),E=>{throw js("RestConnection",`RPC '${n}' ${p} failed with error: `,E,"url: ",g,"request:",a),E})}ko(n,s,a,u,h,p){return this.Oo(n,s,a,u,h)}Bo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((u,h)=>n[h]=u),a&&a.headers.forEach((u,h)=>n[h]=u)}No(n,s){const a=vI[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,s,a){const u=Eh();return new Promise((h,p)=>{const g=new Og;g.setWithCredentials(!0),g.listenOnce(Fg.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Jl.NO_ERROR:const E=g.getResponseJson();se(Mt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case Jl.TIMEOUT:se(Mt,`RPC '${e}' ${u} timed out`),p(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case Jl.HTTP_ERROR:const T=g.getStatus();if(se(Mt,`RPC '${e}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const D=I==null?void 0:I.error;if(D&&D.status&&D.message){const M=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(q)>=0?q:K.UNKNOWN}(D.status);p(new le(M,D.message))}else p(new le(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new le(K.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{se(Mt,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(a);se(Mt,`RPC '${e}' ${u} sending request:`,a),g.send(n,"POST",_,s,15)})}qo(e,n,s){const a=Eh(),u=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=zg(),p=bg(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Bo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");se(Mt,`Creating RPC '${e}' stream ${a}: ${E}`,g);const T=h.createWebChannel(E,g);let I=!1,D=!1;const M=new EI({Eo:O=>{D?se(Mt,`Not sending because RPC '${e}' stream ${a} is closed:`,O):(I||(se(Mt,`Opening RPC '${e}' stream ${a} transport.`),T.open(),I=!0),se(Mt,`RPC '${e}' stream ${a} sending:`,O),T.send(O))},Ao:()=>T.close()}),$=(O,q,Z)=>{O.listen(q,J=>{try{Z(J)}catch(fe){setTimeout(()=>{throw fe},0)}})};return $(T,na.EventType.OPEN,()=>{D||(se(Mt,`RPC '${e}' stream ${a} transport opened.`),M.So())}),$(T,na.EventType.CLOSE,()=>{D||(D=!0,se(Mt,`RPC '${e}' stream ${a} transport closed`),M.Do())}),$(T,na.EventType.ERROR,O=>{D||(D=!0,js(Mt,`RPC '${e}' stream ${a} transport errored:`,O),M.Do(new le(K.UNAVAILABLE,"The operation could not be completed")))}),$(T,na.EventType.MESSAGE,O=>{var q;if(!D){const Z=O.data[0];Ue(!!Z);const J=Z,fe=(J==null?void 0:J.error)||((q=J[0])===null||q===void 0?void 0:q.error);if(fe){se(Mt,`RPC '${e}' stream ${a} received error:`,fe);const Re=fe.status;let we=function(A){const k=at[A];if(k!==void 0)return fy(k)}(Re),x=fe.message;we===void 0&&(we=K.INTERNAL,x="Unknown error status: "+Re+" with message "+fe.message),D=!0,M.Do(new le(we,x)),T.close()}else se(Mt,`RPC '${e}' stream ${a} received:`,Z),M.vo(Z)}}),$(p,Ug.STAT_EVENT,O=>{O.stat===Lh.PROXY?se(Mt,`RPC '${e}' stream ${a} detected buffering proxy`):O.stat===Lh.NOPROXY&&se(Mt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{M.bo()},0),M}}function wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(i){return new P0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,s=1e3,a=1.5,u=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=u,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,s,a,u,h,p,g){this.li=e,this.Yo=s,this.Zo=a,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Ry(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new le(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.d_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TI extends Ay{constructor(e,n,s,a,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=V0(this.serializer,e),s=function(u){if(!("targetChange"in u))return ve.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?ve.min():h.readTime?Kn(h.readTime):ve.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=qh(this.serializer),n.addTarget=function(u,h){let p;const g=h.target;if(p=Uh(g)?{documents:L0(u,g)}:{query:M0(u,g).ct},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=my(u,h.resumeToken);const _=Bh(u,h.expectedCount);_!==null&&(p.expectedCount=_)}else if(h.snapshotVersion.compareTo(ve.min())>0){p.readTime=fu(u,h.snapshotVersion.toTimestamp());const _=Bh(u,h.expectedCount);_!==null&&(p.expectedCount=_)}return p}(this.serializer,e);const s=F0(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=qh(this.serializer),n.removeTarget=e,this.c_(n)}}class II extends Ay{constructor(e,n,s,a,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=N0(e.writeResults,e.commitTime),s=Kn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=qh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>D0(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Oo(e,jh(n,s),a,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(K.UNKNOWN,u.toString())})}ko(e,n,s,a,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.ko(e,jh(n,s),a,h,p,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(K.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class RI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wr(n),this.C_=!1):se("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,s,a,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=u,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{ji(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(g){const _=Ee(g);_.k_.add(4),await Ra(_),_.K_.set("Unknown"),_.k_.delete(4),await Pu(_)}(this))})}),this.K_=new RI(s,a)}}async function Pu(i){if(ji(i))for(const e of i.q_)await e(!0)}async function Ra(i){for(const e of i.q_)await e(!1)}function Cy(i,e){const n=Ee(i);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),If(n)?Tf(n):ro(n).s_()&&wf(n,e))}function Ef(i,e){const n=Ee(i),s=ro(n);n.L_.delete(e),s.s_()&&Py(n,e),n.L_.size===0&&(s.s_()?s.a_():ji(n)&&n.K_.set("Unknown"))}function wf(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(i).V_(e)}function Py(i,e){i.U_.xe(e),ro(i).m_(e)}function Tf(i){i.U_=new S0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.L_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),ro(i).start(),i.K_.F_()}function If(i){return ji(i)&&!ro(i).i_()&&i.L_.size>0}function ji(i){return Ee(i).k_.size===0}function ky(i){i.U_=void 0}async function CI(i){i.K_.set("Online")}async function PI(i){i.L_.forEach((e,n)=>{wf(i,e)})}async function kI(i,e){ky(i),If(i)?(i.K_.O_(e),Tf(i)):i.K_.set("Unknown")}async function xI(i,e,n){if(i.K_.set("Online"),e instanceof py&&e.state===2&&e.cause)try{await async function(a,u){const h=u.cause;for(const p of u.targetIds)a.L_.has(p)&&(await a.remoteSyncer.rejectListen(p,h),a.L_.delete(p),a.U_.removeTarget(p))}(i,e)}catch(s){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pu(i,s)}else if(e instanceof nu?i.U_.$e(e):e instanceof dy?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(ve.min()))try{const s=await Sy(i.localStore);n.compareTo(s)>=0&&await function(u,h){const p=u.U_.it(h);return p.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.L_.get(_);E&&u.L_.set(_,E.withResumeToken(g.resumeToken,h))}}),p.targetMismatches.forEach((g,_)=>{const E=u.L_.get(g);if(!E)return;u.L_.set(g,E.withResumeToken(Pt.EMPTY_BYTE_STRING,E.snapshotVersion)),Py(u,g);const T=new Kr(E.target,g,_,E.sequenceNumber);wf(u,T)}),u.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(s){se("RemoteStore","Failed to raise snapshot:",s),await pu(i,s)}}async function pu(i,e,n){if(!no(e))throw e;i.k_.add(1),await Ra(i),i.K_.set("Offline"),n||(n=()=>Sy(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await Pu(i)})}function xy(i,e){return e().catch(n=>pu(i,n,e))}async function ku(i){const e=Ee(i),n=si(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;VI(e);)try{const a=await pI(e.localStore,s);if(a===null){e.B_.length===0&&n.a_();break}s=a.batchId,DI(e,a)}catch(a){await pu(e,a)}Vy(e)&&Dy(e)}function VI(i){return ji(i)&&i.B_.length<10}function DI(i,e){i.B_.push(e);const n=si(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Vy(i){return ji(i)&&!si(i).i_()&&i.B_.length>0}function Dy(i){si(i).start()}async function NI(i){si(i).w_()}async function LI(i){const e=si(i);for(const n of i.B_)e.g_(n.mutations)}async function MI(i,e,n){const s=i.B_.shift(),a=pf.from(s,e,n);await xy(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await ku(i)}async function OI(i,e){e&&si(i).f_&&await async function(s,a){if(function(h){return w0(h)&&h!==K.ABORTED}(a.code)){const u=s.B_.shift();si(s).__(),await xy(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a)),await ku(s)}}(i,e),Vy(i)&&Dy(i)}async function Wm(i,e){const n=Ee(i);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const s=ji(n);n.k_.add(3),await Ra(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Pu(n)}async function FI(i,e){const n=Ee(i);e?(n.k_.delete(2),await Pu(n)):e||(n.k_.add(2),await Ra(n),n.K_.set("Unknown"))}function ro(i){return i.W_||(i.W_=function(n,s,a){const u=Ee(n);return u.b_(),new TI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:CI.bind(null,i),mo:PI.bind(null,i),po:kI.bind(null,i),R_:xI.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),If(i)?Tf(i):i.K_.set("Unknown")):(await i.W_.stop(),ky(i))})),i.W_}function si(i){return i.G_||(i.G_=function(n,s,a){const u=Ee(n);return u.b_(),new II(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:NI.bind(null,i),po:OI.bind(null,i),p_:LI.bind(null,i),y_:MI.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await ku(i)):(await i.G_.stop(),i.B_.length>0&&(se("RemoteStore",`Stopping write stream with ${i.B_.length} pending writes`),i.B_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){const h=Date.now()+s,p=new Sf(e,n,h,a,u);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(i,e){if(wr("AsyncQueue",`${e}: ${i}`),no(i))return new le(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static emptySet(e){return new Bs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||de.comparator(n.key,s.key):(n,s)=>de.comparator(n.key,s.key),this.keyedMap=ra(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Bs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.z_=new Ze(de.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):_e():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Qs{constructor(e,n,s,a,u,h,p,g,_){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,s,a,u){const h=[];return n.forEach(p=>{h.push({type:0,doc:p})}),new Qs(e,n,Bs.emptySet(n),h,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class bI{constructor(){this.queries=Km(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=Ee(n),u=a.queries;a.queries=Km(),u.forEach((h,p)=>{for(const g of p.J_)g.onError(s)})})(this,new le(K.ABORTED,"Firestore shutting down"))}}function Km(){return new Bi(i=>Zg(i),Tu)}async function Ny(i,e){const n=Ee(i);let s=3;const a=e.query;let u=n.queries.get(a);u?!u.Y_()&&e.Z_()&&(s=2):(u=new UI,s=e.Z_()?0:1);try{switch(s){case 0:u.H_=await n.onListen(a,!0);break;case 1:u.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const p=Rf(h,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(p)}n.queries.set(a,u),u.J_.push(e),e.ea(n.onlineState),u.H_&&e.ta(u.H_)&&Af(n)}async function Ly(i,e){const n=Ee(i),s=e.query;let a=3;const u=n.queries.get(s);if(u){const h=u.J_.indexOf(e);h>=0&&(u.J_.splice(h,1),u.J_.length===0?a=e.Z_()?0:1:!u.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function zI(i,e){const n=Ee(i);let s=!1;for(const a of e){const u=a.query,h=n.queries.get(u);if(h){for(const p of h.J_)p.ta(a)&&(s=!0);h.H_=a}}s&&Af(n)}function BI(i,e,n){const s=Ee(i),a=s.queries.get(e);if(a)for(const u of a.J_)u.onError(n);s.queries.delete(e)}function Af(i){i.X_.forEach(e=>{e.next()})}var Wh,Gm;(Gm=Wh||(Wh={})).na="default",Gm.Cache="cache";class My{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.key=e}}class Fy{constructor(e){this.key=e}}class jI{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ae(),this.mutatedKeys=Ae(),this.Va=ey(e),this.ma=new Bs(this.Va)}get fa(){return this.Ea}ga(e,n){const s=n?n.pa:new Qm,a=n?n.ma:this.ma;let u=n?n.mutatedKeys:this.mutatedKeys,h=a,p=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((E,T)=>{const I=a.get(E),D=Iu(this.query,T)?T:null,M=!!I&&this.mutatedKeys.has(I.key),$=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let O=!1;I&&D?I.data.isEqual(D.data)?M!==$&&(s.track({type:3,doc:D}),O=!0):this.ya(I,D)||(s.track({type:2,doc:D}),O=!0,(g&&this.Va(D,g)>0||_&&this.Va(D,_)<0)&&(p=!0)):!I&&D?(s.track({type:0,doc:D}),O=!0):I&&!D&&(s.track({type:1,doc:I}),O=!0,(g||_)&&(p=!0)),O&&(D?(h=h.add(D),u=$?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{ma:h,pa:s,ss:p,mutatedKeys:u}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const u=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,T)=>function(D,M){const $=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return $(D)-$(M)}(E.type,T.type)||this.Va(E.doc,T.doc)),this.wa(s),a=a!=null&&a;const p=n&&!a?this.Sa():[],g=this.Ra.size===0&&this.current&&!a?1:0,_=g!==this.Aa;return this.Aa=g,h.length!==0||_?{snapshot:new Qs(this.query,e.ma,u,h,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:p}:{ba:p}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Qm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ae(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Fy(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new Oy(s))}),n}va(e){this.Ea=e.Es,this.Ra=Ae();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Qs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class $I{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class qI{constructor(e){this.key=e,this.Fa=!1}}class HI{constructor(e,n,s,a,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Bi(p=>Zg(p),Tu),this.Oa=new Map,this.Na=new Set,this.Ba=new Ze(de.comparator),this.La=new Map,this.ka=new yf,this.qa={},this.Qa=new Map,this.Ka=Ws.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function WI(i,e,n=!0){const s=$y(i);let a;const u=s.xa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.Ca()):a=await Uy(s,e,n,!0),a}async function QI(i,e){const n=$y(i);await Uy(n,e,!0,!1)}async function Uy(i,e,n,s){const a=await mI(i.localStore,Wn(e)),u=a.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await KI(i,e,u,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&Cy(i.remoteStore,a),p}async function KI(i,e,n,s,a){i.Ua=(T,I,D)=>async function($,O,q,Z){let J=O.view.ga(q);J.ss&&(J=await $m($.localStore,O.query,!1).then(({documents:x})=>O.view.ga(x,J)));const fe=Z&&Z.targetChanges.get(O.targetId),Re=Z&&Z.targetMismatches.get(O.targetId)!=null,we=O.view.applyChanges(J,$.isPrimaryClient,fe,Re);return Xm($,O.targetId,we.ba),we.snapshot}(i,T,I,D);const u=await $m(i.localStore,e,!0),h=new jI(e,u.Es),p=h.ga(u.documents),g=Sa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),_=h.applyChanges(p,i.isPrimaryClient,g);Xm(i,n,_.ba);const E=new $I(e,n,h);return i.xa.set(e,E),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),_.snapshot}async function GI(i,e,n){const s=Ee(i),a=s.xa.get(e),u=s.Oa.get(a.targetId);if(u.length>1)return s.Oa.set(a.targetId,u.filter(h=>!Tu(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Hh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Ef(s.remoteStore,a.targetId),Qh(s,a.targetId)}).catch(to)):(Qh(s,a.targetId),await Hh(s.localStore,a.targetId,!0))}async function YI(i,e){const n=Ee(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ef(n.remoteStore,s.targetId))}async function XI(i,e,n){const s=iS(i);try{const a=await function(h,p){const g=Ee(h),_=pt.now(),E=p.reduce((D,M)=>D.add(M.key),Ae());let T,I;return g.persistence.runTransaction("Locally write mutations","readwrite",D=>{let M=Tr(),$=Ae();return g.hs.getEntries(D,E).next(O=>{M=O,M.forEach((q,Z)=>{Z.isValidDocument()||($=$.add(q))})}).next(()=>g.localDocuments.getOverlayedDocuments(D,M)).next(O=>{T=O;const q=[];for(const Z of p){const J=g0(Z,T.get(Z.key).overlayedDocument);J!=null&&q.push(new ai(Z.key,J,Hg(J.value.mapValue),Qn.exists(!0)))}return g.mutationQueue.addMutationBatch(D,_,q,p)}).next(O=>{I=O;const q=O.applyToLocalDocumentSet(T,$);return g.documentOverlayCache.saveOverlays(D,O.batchId,q)})}).then(()=>({batchId:I.batchId,changes:ny(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,p,g){let _=h.qa[h.currentUser.toKey()];_||(_=new Ze(Pe)),_=_.insert(p,g),h.qa[h.currentUser.toKey()]=_}(s,a.batchId,n),await Aa(s,a.changes),await ku(s.remoteStore)}catch(a){const u=Rf(a,"Failed to persist write");n.reject(u)}}async function by(i,e){const n=Ee(i);try{const s=await fI(n.localStore,e);e.targetChanges.forEach((a,u)=>{const h=n.La.get(u);h&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Fa=!0:a.modifiedDocuments.size>0?Ue(h.Fa):a.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await Aa(n,s,e)}catch(s){await to(s)}}function Ym(i,e,n){const s=Ee(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((u,h)=>{const p=h.view.ea(e);p.snapshot&&a.push(p.snapshot)}),function(h,p){const g=Ee(h);g.onlineState=p;let _=!1;g.queries.forEach((E,T)=>{for(const I of T.J_)I.ea(p)&&(_=!0)}),_&&Af(g)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JI(i,e,n){const s=Ee(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.La.get(e),u=a&&a.key;if(u){let h=new Ze(de.comparator);h=h.insert(u,Ft.newNoDocument(u,ve.min()));const p=Ae().add(u),g=new Au(ve.min(),new Map,new Ze(Pe),h,p);await by(s,g),s.Ba=s.Ba.remove(u),s.La.delete(e),Cf(s)}else await Hh(s.localStore,e,!1).then(()=>Qh(s,e,n)).catch(to)}async function ZI(i,e){const n=Ee(i),s=e.batch.batchId;try{const a=await hI(n.localStore,e);By(n,s,null),zy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Aa(n,a)}catch(a){await to(a)}}async function eS(i,e,n){const s=Ee(i);try{const a=await function(h,p){const g=Ee(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,p).next(T=>(Ue(T!==null),E=T.keys(),g.mutationQueue.removeMutationBatch(_,T))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(s.localStore,e);By(s,e,n),zy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Aa(s,a)}catch(a){await to(a)}}function zy(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function By(i,e,n){const s=Ee(i);let a=s.qa[s.currentUser.toKey()];if(a){const u=a.get(e);u&&(n?u.reject(n):u.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Qh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||jy(i,s)})}function jy(i,e){i.Na.delete(e.path.canonicalString());const n=i.Ba.get(e);n!==null&&(Ef(i.remoteStore,n),i.Ba=i.Ba.remove(e),i.La.delete(n),Cf(i))}function Xm(i,e,n){for(const s of n)s instanceof Oy?(i.ka.addReference(s.key,e),tS(i,s)):s instanceof Fy?(se("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||jy(i,s.key)):_e()}function tS(i,e){const n=e.key,s=n.path.canonicalString();i.Ba.get(n)||i.Na.has(s)||(se("SyncEngine","New document in limbo: "+n),i.Na.add(s),Cf(i))}function Cf(i){for(;i.Na.size>0&&i.Ba.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new de(Qe.fromString(e)),s=i.Ka.next();i.La.set(s,new qI(n)),i.Ba=i.Ba.insert(n,s),Cy(i.remoteStore,new Kr(Wn(ff(n.path)),s,"TargetPurposeLimboResolution",vu.oe))}}async function Aa(i,e,n){const s=Ee(i),a=[],u=[],h=[];s.xa.isEmpty()||(s.xa.forEach((p,g)=>{h.push(s.Ua(g,e,n).then(_=>{var E;if((_||n)&&s.isPrimaryClient){const T=_?!_.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(_){a.push(_);const T=vf.zi(g.targetId,_);u.push(T)}}))}),await Promise.all(h),s.Ma.R_(a),await async function(g,_){const E=Ee(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>W.forEach(_,I=>W.forEach(I.Wi,D=>E.persistence.referenceDelegate.addReference(T,I.targetId,D)).next(()=>W.forEach(I.Gi,D=>E.persistence.referenceDelegate.removeReference(T,I.targetId,D)))))}catch(T){if(!no(T))throw T;se("LocalStore","Failed to update sequence numbers: "+T)}for(const T of _){const I=T.targetId;if(!T.fromCache){const D=E.us.get(I),M=D.snapshotVersion,$=D.withLastLimboFreeSnapshotVersion(M);E.us=E.us.insert(I,$)}}}(s.localStore,u))}async function nS(i,e){const n=Ee(i);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const s=await Iy(n.localStore,e);n.currentUser=e,function(u,h){u.Qa.forEach(p=>{p.forEach(g=>{g.reject(new le(K.CANCELLED,h))})}),u.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Aa(n,s.Ts)}}function rS(i,e){const n=Ee(i),s=n.La.get(e);if(s&&s.Fa)return Ae().add(s.key);{let a=Ae();const u=n.Oa.get(e);if(!u)return a;for(const h of u){const p=n.xa.get(h);a=a.unionWith(p.view.fa)}return a}}function $y(i){const e=Ee(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=by.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JI.bind(null,e),e.Ma.R_=zI.bind(null,e.eventManager),e.Ma.Wa=BI.bind(null,e.eventManager),e}function iS(i){const e=Ee(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eS.bind(null,e),e}class mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return cI(this.persistence,new lI,e.initialUser,this.serializer)}ja(e){return new Ty(_f.ei,this.serializer)}za(e){return new yI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mu.provider={build:()=>new mu};class sS extends mu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ue(this.persistence.referenceDelegate instanceof du);const s=this.persistence.referenceDelegate.garbageCollector;return new Q0(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Ty(s=>du.ei(s,n),this.serializer)}}class Kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ym(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nS.bind(null,this.syncEngine),await FI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bI}()}createDatastore(e){const n=Cu(e.databaseInfo.databaseId),s=function(u){return new wI(u)}(e.databaseInfo);return function(u,h,p,g){return new SI(u,h,p,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,u,h,p){return new AI(s,a,u,h,p)}(this.localStore,this.datastore,e.asyncQueue,n=>Ym(this.syncEngine,n,0),function(){return Hm.p()?new Hm:new _I}())}createSyncEngine(e,n){return function(a,u,h,p,g,_,E){const T=new HI(a,u,h,p,g,_);return E&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const u=Ee(a);se("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await Ra(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kh.provider={build:()=>new Kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,s,a,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ot.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{se("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(se("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Rf(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Th(i,e){i.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Iy(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Jm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await aS(i);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Wm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Wm(e.remoteStore,a)),i._onlineComponents=e}async function aS(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Th(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await Th(i,new mu)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Th(i,new sS(void 0));return i._offlineComponents}async function Hy(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await Jm(i,i._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await Jm(i,new Kh))),i._onlineComponents}function lS(i){return Hy(i).then(e=>e.syncEngine)}async function Gh(i){const e=await Hy(i),n=e.eventManager;return n.onListen=WI.bind(null,e.syncEngine),n.onUnlisten=GI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YI.bind(null,e.syncEngine),n}function uS(i,e,n={}){const s=new Jr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,p,g,_){const E=new qy({next:I=>{E.eu(),h.enqueueAndForget(()=>Ly(u,T)),I.fromCache&&g.source==="server"?_.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(I)},error:I=>_.reject(I)}),T=new My(p,E,{includeMetadataChanges:!0,ua:!0});return Ny(u,T)}(await Gh(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(i,e,n){if(!n)throw new le(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cS(i,e,n,s){if(e===!0&&s===!0)throw new le(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function eg(i){if(!de.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tg(i){if(de.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function xu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_e()}function vr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xu(i);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wy((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ng({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ng(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new TT;switch(s.type){case"firstParty":return new AT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Zm.get(n);s&&(se("ComponentProvider","Removing Datastore"),Zm.delete(n),s.terminate())}(this),Promise.resolve()}}function hS(i,e,n,s={}){var a;const u=(i=vr(i,Vu))._getSettings(),h=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let p,g;if(typeof s.mockUserToken=="string")p=s.mockUserToken,g=Ot.MOCK_USER;else{p=tw(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ot(_)}i._authCredentials=new IT(new Bg(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class Jt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Zr extends $i{constructor(e,n,s){super(e,n,ff(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new de(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Ky(i,e,...n){if(i=Yn(i),Qy("collection","path",e),i instanceof Vu){const s=Qe.fromString(e,...n);return tg(s),new Zr(i,null,s)}{if(!(i instanceof Jt||i instanceof Zr))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return tg(s),new Zr(i.firestore,null,s)}}function Ks(i,e,...n){if(i=Yn(i),arguments.length===1&&(e=jg.newId()),Qy("doc","path",e),i instanceof Vu){const s=Qe.fromString(e,...n);return eg(s),new Jt(i,null,new de(s))}{if(!(i instanceof Jt||i instanceof Zr))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return eg(s),new Jt(i.firestore,i instanceof Zr?i.converter:null,new de(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Ry(this,"async_queue_retry"),this.fu=()=>{const s=wh();s&&se("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Jr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!no(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p}(s);throw wr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Sf.createAndSchedule(this,e,n,s,u=>this.Su(u));return this.Eu.push(a),a}pu(){this.Au&&_e()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function ig(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const u of s)if(u in a&&typeof a[u]=="function")return!0;return!1}(i,["next","error","complete"])}class Gs extends Vu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new rg,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rg(e),this._firestoreClient=void 0,await e}}}function fS(i,e){const n=typeof i=="object"?i:cT(),s=typeof i=="string"?i:"(default)",a=oT(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=ZE("firestore");u&&hS(a,...u)}return a}function Pf(i){if(i._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||dS(i),i._firestoreClient}function dS(i){var e,n,s;const a=i._freezeSettings(),u=function(p,g,_,E){return new BT(p,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Wy(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new oS(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(Pt.fromBase64String(e))}catch(n){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ys(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=/^__.*__$/;class mS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ia(e,this.data,n,this.fieldTransforms)}}class Gy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ai(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Vf{constructor(e,n,s,a,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Fu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Bu(e),a}Lu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return gu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Yy(this.Mu)&&pS.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class gS{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Cu(e)}$u(e,n,s,a=!1){return new Vf({Mu:e,methodName:n,Ku:s,path:Ct.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Df(i){const e=i._freezeSettings(),n=Cu(i._databaseId);return new gS(i._databaseId,!!e.ignoreUndefinedProperties,n)}function yS(i,e,n,s,a,u={}){const h=i.$u(u.merge||u.mergeFields?2:0,e,n,a);Lf("Data must be an object, but it was:",h,s);const p=Xy(s,h);let g,_;if(u.merge)g=new an(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const I=Yh(e,T,n);if(!h.contains(I))throw new le(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Zy(E,I)||E.push(I)}g=new an(E),_=h.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,_=h.fieldTransforms;return new mS(new Xt(p),g,_)}class Lu extends Nu{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lu}}class Nf extends Nu{_toFieldTransform(e){return new f0(e.path,new ga)}isEqual(e){return e instanceof Nf}}function _S(i,e,n,s){const a=i.$u(1,e,n);Lf("Data must be an object, but it was:",a,s);const u=[],h=Xt.empty();oi(s,(g,_)=>{const E=Mf(e,g,n);_=Yn(_);const T=a.Lu(E);if(_ instanceof Lu)u.push(E);else{const I=Ca(_,T);I!=null&&(u.push(E),h.set(E,I))}});const p=new an(u);return new Gy(h,p,a.fieldTransforms)}function vS(i,e,n,s,a,u){const h=i.$u(1,e,n),p=[Yh(e,s,n)],g=[a];if(u.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)p.push(Yh(e,u[I])),g.push(u[I+1]);const _=[],E=Xt.empty();for(let I=p.length-1;I>=0;--I)if(!Zy(_,p[I])){const D=p[I];let M=g[I];M=Yn(M);const $=h.Lu(D);if(M instanceof Lu)_.push(D);else{const O=Ca(M,$);O!=null&&(_.push(D),E.set(D,O))}}const T=new an(_);return new Gy(E,T,h.fieldTransforms)}function ES(i,e,n,s=!1){return Ca(n,i.$u(s?4:3,e))}function Ca(i,e){if(Jy(i=Yn(i)))return Lf("Unsupported field value:",e,i),Xy(i,e);if(i instanceof Nu)return function(s,a){if(!Yy(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const u=[];let h=0;for(const p of s){let g=Ca(p,a.ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,a){if((s=Yn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return u0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=pt.fromDate(s);return{timestampValue:fu(a.serializer,u)}}if(s instanceof pt){const u=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fu(a.serializer,u)}}if(s instanceof kf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ys)return{bytesValue:my(a.serializer,s._byteString)};if(s instanceof Jt){const u=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw a.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:gf(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof xf)return function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw p.qu("VectorValues must only contain numeric values.");return df(p.serializer,g)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${xu(s)}`)}(i,e)}function Xy(i,e){const n={};return $g(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oi(i,(s,a)=>{const u=Ca(a,e.Ou(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Jy(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof kf||i instanceof Ys||i instanceof Jt||i instanceof Nu||i instanceof xf)}function Lf(i,e,n){if(!Jy(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=xu(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function Yh(i,e,n){if((e=Yn(e))instanceof Du)return e._internalPath;if(typeof e=="string")return Mf(i,e);throw gu("Field path arguments must be of type string or ",i,!1,void 0,n)}const wS=new RegExp("[~\\*/\\[\\]]");function Mf(i,e,n){if(e.search(wS)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Du(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function gu(i,e,n,s,a){const u=s&&!s.isEmpty(),h=a!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${a}`),g+=")"),new le(K.INVALID_ARGUMENT,p+i+g)}function Zy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,s,a,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TS extends e_{data(){return super.data()}}function Of(i,e){return typeof e=="string"?Mf(i,e):e instanceof Du?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}class IS extends Ff{}function sg(i,e,...n){let s=[];e instanceof Ff&&s.push(e),s=s.concat(n),function(u){const h=u.filter(g=>g instanceof Uf).length,p=u.filter(g=>g instanceof Mu).length;if(h>1||h>0&&p>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class Mu extends IS{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Mu(e,n,s)}_apply(e){const n=this._parse(e);return n_(e._query,n),new $i(e.firestore,e.converter,bh(e._query,n))}_parse(e){const n=Df(e.firestore);return function(u,h,p,g,_,E,T){let I;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){ag(T,E);const D=[];for(const M of T)D.push(og(g,u,M));I={arrayValue:{values:D}}}else I=og(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||ag(T,E),I=ES(p,h,T,E==="in"||E==="not-in");return lt.create(_,E,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ih(i,e,n){const s=e,a=Of("where",i);return Mu._create(a,s,n)}class Uf extends Ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uf(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,u){let h=a;const p=u.getFlattenedFilters();for(const g of p)n_(h,g),h=bh(h,g)}(e._query,n),new $i(e.firestore,e.converter,bh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function og(i,e,n){if(typeof(n=Yn(n))=="string"){if(n==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jg(e)&&n.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Qe.fromString(n));if(!de.isDocumentKey(s))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Rm(i,new de(s))}if(n instanceof Jt)return Rm(i,n._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xu(n)}.`)}function ag(i,e){if(!Array.isArray(i)||i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n_(i,e){const n=function(a,u){for(const h of a)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class SS{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return oi(e,(a,u)=>{s[a]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,a;const u=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>it(h.doubleValue));return new xf(u)}convertGeoPoint(e){return new kf(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=wu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){const n=ni(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qe.fromString(e);Ue(wy(s));const a=new pa(s.get(1),s.get(3)),u=new de(s.popFirst(5));return a.isEqual(n)||wr(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class r_ extends e_{constructor(e,n,s,a,u,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Of("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ru extends r_{data(e={}){return super.data(e)}}class i_{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new sa(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ru(this._firestore,this._userDataWriter,s.key,s,new sa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,u){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(p=>{const g=new ru(a._firestore,a._userDataWriter,p.doc.key,p.doc,new sa(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(p=>u||p.type!==3).map(p=>{const g=new ru(a._firestore,a._userDataWriter,p.doc.key,p.doc,new sa(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,E=-1;return p.type!==0&&(_=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),E=h.indexOf(p.doc.key)),{type:AS(p.type),doc:g,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function AS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}class bf extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function lg(i){i=vr(i,$i);const e=vr(i.firestore,Gs),n=Pf(e),s=new bf(e);return t_(i._query),uS(n,i._query).then(a=>new i_(e,s,i,a))}function zf(i,e,n,...s){i=vr(i,Jt);const a=vr(i.firestore,Gs),u=Df(a);let h;return h=typeof(e=Yn(e))=="string"||e instanceof Du?vS(u,"updateDoc",i._key,e,n,s):_S(u,"updateDoc",i._key,e),a_(a,[h.toMutation(i._key,Qn.exists(!0))])}function s_(i,e){const n=vr(i.firestore,Gs),s=Ks(i),a=RS(i.converter,e);return a_(n,[yS(Df(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Qn.exists(!1))]).then(()=>s)}function o_(i,...e){var n,s,a;i=Yn(i);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||ig(e[h])||(u=e[h],h++);const p={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(ig(e[h])){const T=e[h];e[h]=(n=T.next)===null||n===void 0?void 0:n.bind(T),e[h+1]=(s=T.error)===null||s===void 0?void 0:s.bind(T),e[h+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let g,_,E;if(i instanceof Jt)_=vr(i.firestore,Gs),E=ff(i._key.path),g={next:T=>{e[h]&&e[h](CS(_,i,T))},error:e[h+1],complete:e[h+2]};else{const T=vr(i,$i);_=vr(T.firestore,Gs),E=T._query;const I=new bf(_);g={next:D=>{e[h]&&e[h](new i_(_,I,T,D))},error:e[h+1],complete:e[h+2]},t_(i._query)}return function(I,D,M,$){const O=new qy($),q=new My(D,O,M);return I.asyncQueue.enqueueAndForget(async()=>Ny(await Gh(I),q)),()=>{O.eu(),I.asyncQueue.enqueueAndForget(async()=>Ly(await Gh(I),q))}}(Pf(_),E,p,g)}function a_(i,e){return function(s,a){const u=new Jr;return s.asyncQueue.enqueueAndForget(async()=>XI(await lS(s),a,u)),u.promise}(Pf(i),e)}function CS(i,e,n){const s=n.docs.get(e._key),a=new bf(i);return new r_(i,a,e._key,s,new sa(n.hasPendingWrites,n.fromCache),e.converter)}function l_(){return new Nf("serverTimestamp")}(function(e,n=!0){(function(a){eo=a})(uT),au(new ha("firestore",(s,{instanceIdentifier:a,options:u})=>{const h=s.getProvider("app").getImmediate(),p=new Gs(new ST(s.getProvider("auth-internal")),new PT(s.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(_.options.projectId,E)}(h,a),h);return u=Object.assign({useFetchStreams:n},u),p._setSettings(u),p},"PUBLIC").setMultipleInstances(!0)),zs(vm,"4.7.6",e),zs(vm,"4.7.6","esm2017")})();const PS={apiKey:"AIzaSyDaEht6QHwCBNzAQls7vT_nKD2sd8FKC9k",authDomain:"webb-691bc.firebaseapp.com",databaseURL:"https://webb-691bc-default-rtdb.firebaseio.com",projectId:"webb-691bc",storageBucket:"webb-691bc.firebasestorage.app",messagingSenderId:"622780809662",appId:"1:622780809662:web:4d620e797af5b4058979ef",measurementId:"G-Z2TNLLDD4G"},kS=Dg(PS),bi=fS(kS),xS=Ky(bi,"players"),Sh=Ky(bi,"rooms"),VS=async i=>{if(!i.trim())return null;try{return(await s_(xS,{name:i,status:"waiting",score:0,timeStamp:l_()})).id}catch(e){return console.error("Error adding player:",e),null}},DS=async(i,e)=>{if(!(!e||!i))try{await zf(Ks(bi,"players",i),{name:e})}catch(n){console.error("Error updating player:",n.message)}},NS=async(i,e)=>{if(!i||!e)return null;try{const n=sg(Sh,Ih("status","in",["waiting","ongoing"]),Ih("player1","==",i)),s=await lg(n);if(!s.empty)return s.docs[0].id;const a=sg(Sh,Ih("status","==","waiting")),u=await lg(a);for(let p of u.docs)if(!p.data().player2)return await zf(Ks(bi,"rooms",p.id),{player2:i,player2Name:e,status:"ongoing",generatedNumber:Math.floor(Math.random()*100)+1}),p.id;const h=await s_(Sh,{player1:i,player1Name:e,player2:null,player2Name:null,turn:i,status:"waiting",lowest:0,highest:101,winner:null,generatedNumber:Math.floor(Math.random()*100)+1,timeStamp:l_()});return console.log("New room created:",h.id),h.id}catch(n){return console.error("Error in findOrCreateRoom:",n),null}},LS=()=>{const{roomId:i,playerId:e}=Gv(),n=Zh(),[s,a]=H.useState(0),[u,h]=H.useState(101),[p,g]=H.useState("Guess the Number"),[_,E]=H.useState(null),[T,I]=H.useState(!1);H.useEffect(()=>{if(!i)return;const M=Ks(bi,"rooms",i),$=o_(M,O=>{if(O.exists()){const q=O.data();E(q),q.turn&&I(q.turn===e);const Z={[q.player1]:q.player1Name||"player 1",[q.player2]:q.player2Name||"player 2"};q.winner&&(g(`${Z[q.winner]} wins! 🎉`),setTimeout(()=>{n("/")},5e3))}});return()=>$()},[i,e,n]);const D=async M=>{if(!T||!_)return;const $=Ks(bi,"rooms",i),O=_.generatedNumber;let q=null,Z=_.status;O<M?(h(M),g("Select a lower number")):O>M?(a(M),g("Select a higher number")):(q=e,Z="finished",g("You win! 🎉"));const J=_.player1===e?_.player2:_.player1;await zf($,{[`playerGuess.${e}`]:M,winner:q,turn:q?null:J,status:Z})};return Le.jsxs("div",{className:"NumPage",children:[Le.jsx("h1",{children:p}),_&&!_.winner&&Le.jsx("h2",{children:T?"Your Turn!":"Opponent's Turn"}),_!=null&&_.winner?Le.jsxs("div",{children:[Le.jsx("h2",{children:"Game Over"}),Le.jsx("button",{onClick:()=>n("/"),className:"play-again-btn",children:"Home Page"}),Le.jsx("p",{children:"Redirecting in 5 seconds..."})]}):[...Array(10)].map((M,$)=>Le.jsx("div",{className:"chunks",children:[...Array(10)].map((O,q)=>{const Z=$*10+q+1;return Le.jsx("button",{className:`num-button ${Z>s&&Z<u?"highlight":"normal"}`,onClick:()=>D(Z),disabled:!T||(_==null?void 0:_.winner),children:Z},Z)})},$)),Le.jsxs("div",{children:["Highest: ",u]}),Le.jsxs("div",{children:["Lowest: ",s]})]})},MS=({roomId:i,playerId:e})=>{const n=Zh(),[s,a]=H.useState("waiting");return H.useEffect(()=>{const u=Ks(bi,"rooms",i),h=o_(u,p=>{if(p.exists()){const g=p.data();a(g.status),g.status==="ongoing"&&n(`/game/${i}/${e}`)}});return()=>h()},[i]),Le.jsx("div",{className:"WaitingScreen",children:Le.jsx("h2",{children:"waiting for a player 2 ..."})})},OS=()=>{const[i,e]=H.useState(""),[n,s]=H.useState(null),[a,u]=H.useState(null),[h,p]=H.useState(""),g=H.useRef(null);H.useEffect(()=>{const I=localStorage.getItem("player-name"),D=localStorage.getItem("player-id");console.log("Stored Player ID:",D),console.log("Stored Name:",I),I&&e(I),D&&s(D)},[]);const _=async()=>{const I=g.current.value.trim();if(I){if(n)console.log("Updating existing player:",n),await DS(n,I)?console.log("Player name updated successfully!"):console.warn("Failed to update player, ID might be invalid.");else{const D=await VS(I);D&&(s(D),localStorage.setItem("player-id",D))}e(I),localStorage.setItem("player-name",I),g.current.value=""}},E=()=>{e(""),g.current.value=""},T=async()=>{if(!n){p("please Enter Name");return}const I=await NS(n,i);I&&(u(I),console.log(`joined room : ${I}`))};return Le.jsxs("div",{className:"IntroPage",children:[!i&&Le.jsx("h3",{children:h}),i?Le.jsxs("div",{className:"name-display",children:[Le.jsxs("p",{children:["Player Name: ",i]}),Le.jsx("button",{onClick:E,children:"Change Name"})]}):Le.jsxs(Le.Fragment,{children:[Le.jsx("input",{type:"text",ref:g,placeholder:"Enter Name ..."}),Le.jsx("button",{onClick:_,children:"Set Name"})]}),Le.jsx("div",{className:"game-join",children:a?Le.jsx(MS,{roomId:a,playerId:n}):Le.jsx("button",{className:"play-with-random",onClick:T,children:"Play with Random"})})]})};function FS(){return Le.jsx(LE,{children:Le.jsxs(cE,{children:[Le.jsx(Ah,{path:"/",element:Le.jsx(OS,{})}),Le.jsx(Ah,{path:"/game/:roomId/:playerId",element:Le.jsx(LS,{})})]})})}vv.createRoot(document.getElementById("root")).render(Le.jsx(H.StrictMode,{children:Le.jsx(FS,{})}));
